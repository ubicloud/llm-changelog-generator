[
  {
    "pr": 3103,
    "title": "Add support for respirate partitioning",
    "description": "This adds a partition keyword argument to the dispatcher, which accepts a range of UUID strings.  If provided, the dispatcher runs in partitioning mode.  In partitioning mode:\r\n\r\n* The default scan query returns only strands inside the partition.\r\n\r\n* There is a scan_old method that can be used to return strands where schedule is more than 5 seconds in the past.  Respirate runs this scan every 5 seconds.  This handles failure of one paritioned respirate process gracefully.  Other respirate processes will pick up the slack, just with an additional 5 seconds of latency.\r\n\r\nThe advantage of partitioning is that multiple respirate processes no longer try to operate on the same strands, so this reduces contention.\r\n\r\nFor bin/respirate usage, provide 2 arguments to enable partitioning. The first argument is the number of partitions, and the second is the partition number for each partition (1 based). So:\r\n\r\n  partition 4 2\r\n\r\nDivides the UUID space into 4 partitions, and operates on the 2nd of 4 (\"80000000-0000-0000-0000-000000000000\"...\"c0000000-0000-0000-0000-000000000000\").\r\n\r\nFor Heroku usage, the second argument is optional if the DYNO environment variable is present, in which case it will try to parse the DYNO value to determine the current partition.\r\n\r\nCurrently, up to 16 partitions are supported, and it is trivial to go from 16 to 256 if needed.\r\n\r\nThis should be compatible with an index-only scan if we have an index on `strand(schedule, lease, id) WHERE exitval IS NULL`, once the `lease IS NULL` condition is removed.  The scan_old query should also be able to use the same index for an index-only scan.\r\n\r\nWhile here, add a minor spec fix to shutdown the dispatcher when using custom dispatcher options.",
    "ellipsis_summary": ""
  },
  {
    "pr": 3258,
    "title": "Remove asdf-direnv .envrc",
    "description": "This emits an annoying message if `asdf-direnv` is not installed but `direnv` is installed.  I'm leaving this patch outstanding for a couple of weeks while people get their toolchains adjusted, but after it is applied, `asdf-direnv` won't work anymore.",
    "ellipsis_summary": "Removes `.envrc` to prevent message when `asdf-direnv` is not installed, disabling `asdf-direnv`.\n> \n>   - **Behavior**:\n>     - Removes `.envrc` file to prevent annoying message when `asdf-direnv` is not installed but `direnv` is installed.\n>     - After removal, `asdf-direnv` will not function anymore.\n>   - **Misc**:\n>     - `.envrc` file deleted.\n> \n>"
  },
  {
    "pr": 3293,
    "title": "Avoid sleeping inside transaction in runtime github route",
    "description": "This actually avoids the transaction completely.  Previously, the behavior was:\n\n* BEGIN\n* GithubCacheEntry.create\n  * SELECT to check for existing object\n  * INSERT\n* Upload blob\n* GithubCacheEntry#update (UPDATE)\n* COMMIT\n\nNow behavior is:\n\n* SELECT to check for existing object\n* Upload blob\n* GithubCacheEntry.create\n  * SELECT to check for existing object\n  * INSERT\n\nPreviously, if the GithubCacheEntry#update failed, I believe the uploaded object was never deleted from the blob store, but that should only happen if the upload_id returned matched an existing record, which seems unlikely without a bug in the blob store.  This deletes the uploaded object the if the INSERT fails.\n\nI don't think the sleeping inside transaction is related to the H12 errors, but when increasing the Puma threads beyond the database connection pool size, you definitely want to avoid sleeping inside transactions.\n\nBest reviewed without whitespace differences.",
    "ellipsis_summary": "Refactor GitHub cache route to avoid sleeping inside transactions and ensure uploaded objects are deleted if entry creation fails.\n> \n>   - **Behavior**:\n>     - Refactor transaction handling in `routes/runtime/github.rb` to avoid sleeping inside transactions.\n>     - Check for existing `GithubCacheEntry` before upload; create entry after successful upload.\n>     - Delete uploaded object if `GithubCacheEntry.create` fails.\n>   - **Tests**:\n>     - Update `github_spec.rb` to test new behavior, including pre-upload existence check and post-upload failure handling.\n>     - Add test for deleting uploaded object if entry creation fails.\n> \n>"
  },
  {
    "pr": 3327,
    "title": "Treat processing the same as pending for Acme DNS challenge order_status",
    "description": "",
    "ellipsis_summary": "> [!IMPORTANT]\n> `wait_dns_validation` in `cert_nexus.rb` now treats `\"processing\"` status like `\"pending\"`, causing a 10-second nap.\n> \n>   - **Behavior**:\n>     - In `cert_nexus.rb`, `wait_dns_validation` now treats `\"processing\"` status the same as `\"pending\"`, causing a 10-second nap in both cases.\n>   - **Misc**:\n>     - No other changes or refactors were made.\n> \n>"
  },
  {
    "pr": 3328,
    "title": "Use the premium VM pool if the premium runner is enabled",
    "description": "- **Remove the location field from the runner label configs**\n  In the initial design, we planned to create a separate label for each\n  location, but we decided against it. Our codebase expects the runner to\n  have the location set as \"github-runners\" in multiple places. Therefore,\n  the location field is redundant and makes the config file cluttered.\n  \n\n- **Remove the gpu field from the runner label config**\n  We use the vm size family to determine GPU requirements. Since the vm\n  size is \"standard-gpu-6\" for our GPU runners, the label.gpu is not used\n  anywhere in the codebase.\n  \n\n- **Separate family and vCPUs in runner label configs**\n  We need family and vCPUs separated in multiple places, so it's better to\n  keep them separate instead of using a single property.\n  \n\n- **Clean up the Prog::Vm::GithubRunner tests**\n  We're trying to keep our tests as close to the database as possible.\n  Some of the runner nexus specs relied heavily on mocking instead of\n  using real database queries, so I refactored them. This removed a lot of\n  lines and made testing easier in some cases.\n  \n\n- **Use the premium VM pool if the premium runner is enabled**\n  Before, we skipped the VM pool when the premium runner was enabled. Now,\n  we can use the premium pools for them.",
    "ellipsis_summary": "Enhance GitHub runner configuration by using premium VM pools, simplifying label configs, and refactoring tests.\n> \n>   - **Behavior**:\n>     - Use premium VM pool if premium runner is enabled in `github_runner.rb` and `github_runner_spec.rb`.\n>     - Remove `location` and `gpu` fields from runner label configs in `config/github_runner_labels.yml`.\n>     - Separate `family` and `vCPUs` in runner label configs in `config/github_runner_labels.yml`.\n>   - **Code Refactoring**:\n>     - Refactor `Prog::Vm::GithubRunner` tests in `github_runner_spec.rb` to reduce mocking and use real database queries.\n>     - Update `runner_labels` in `lib/github.rb` to compute `vm_size` from `family` and `vCPUs`.\n>   - **Misc**:\n>     - Update `total_active_runner_vcpus` in `model/github_runner.rb` to use `vCPUs` directly.\n>     - Adjust `setup_info` in `prog/vm/github_runner.rb` to reflect new label structure.\n>     - Update `views/github/runner.erb` to display `vCPUs` and `family` from new label structure.\n> \n>"
  },
  {
    "pr": 3334,
    "title": "Add a workflow to trigger E2E tests with the \"/run-e2e\" command",
    "description": "Currently, to trigger E2E tests, we need to open the workflow page on the GitHub UI, select a branch, and run the tests. There's a more developer-friendly way to do this. We can easily add support for the `/run-e2e` command using GitHub Actions workflows. When you run `/run-e2e` on a pull request, it triggers E2E tests for that PR. You can also pass specific test cases with `/run-e2e\nvm,github_runner_ubuntu_2404`.\n\nIt only accepts comments from contributors, similar to the E2E test trigger.\n\nSince \"issue_comment\" event doesn't have pull request head ref, we get it from API.\n\nAdditionally, we can add a check to this workflow to trigger E2E tests if there are any code changes in the `rhizome` path.",
    "ellipsis_summary": "Adds a GitHub Actions workflow to trigger E2E tests via `/run-e2e` comment on PRs, with contributor validation and test case security checks.\n> \n>   - **New Workflow**:\n>     - Adds `trigger-e2e.yml` to trigger E2E tests via `/run-e2e` comment on PRs.\n>     - Validates comment author is a contributor and test cases string is secure.\n>     - Uses `actions/github-script@v7` to handle comment parsing and validation.\n>   - **Behavior**:\n>     - Triggers E2E tests for PRs when `/run-e2e` is commented.\n>     - Supports specific test cases via `/run-e2e vm,github_runner_ubuntu_2404`.\n>     - Adds a reaction to the comment based on validation success.\n>   - **Modifications**:\n>     - Updates `e2e.yml` to handle `workflow_dispatch` with specific test cases input.\n> \n>"
  },
  {
    "pr": 3344,
    "title": "Add node_exporter installation prog to VmHost",
    "description": "A new prog is added to install the node_exporter on VmHosts.\n\nA flag is also added to make sure the application will serve the metrics on localhost instead of all network interfaces.\n\nFor the VmHosts which are already setup and do not have the app installed we can create this strand:\n\nStrand.create(prog: \"SetupNodeExporter\", label: \"start\",\n\tstack: [{subject_id: vm_host.id}])",
    "ellipsis_summary": "Adds `SetupNodeExporter` to install node_exporter on `VmHost`, serving metrics on localhost, with integration into the setup process and corresponding tests.\n> \n>   - **Behavior**:\n>     - Adds `Prog::SetupNodeExporter` to install node_exporter on `VmHost`, serving metrics on localhost.\n>     - Updates `host_nexus.rb` to include `SetupNodeExporter` in the setup process.\n>     - Adds `metrics_config` method in `VmHost` to configure metrics collection.\n>   - **Configuration**:\n>     - Adds `monitoring_service_project_id` to `config.rb`.\n>   - **Tests**:\n>     - Adds `setup_node_exporter_spec.rb` to test `SetupNodeExporter` functionality.\n>     - Updates `vm_host_spec.rb` to test `metrics_config` and metrics session initiation.\n>     - Updates `host_nexus_spec.rb` to test integration of `SetupNodeExporter` in the setup process.\n> \n>"
  },
  {
    "pr": 3356,
    "title": "Only update/destroy related objects in Firewall and LoadBalancer methods",
    "description": "Additional refactoring in Firewall and LoadBalancer, included in this PR to avoid conflicts with upcoming PRs.",
    "ellipsis_summary": "Refactor `Firewall` and `LoadBalancer` methods to update/destroy only related objects, improving efficiency and clarity.\n> \n>   - **Behavior**:\n>     - `Firewall` methods now only update/destroy related objects, using `firewall_rules_dataset` and `private_subnets`.\n>     - `LoadBalancer` methods refactored to use subqueries and helper methods for related object updates.\n>   - **Refactoring**:\n>     - Introduced `update_private_subnet_firewall_rules` in `Firewall` for updating firewall rules.\n>     - Added `remove_cert_server` in `LoadBalancer` to handle certificate server removal.\n>   - **Tests**:\n>     - Updated `firewall_spec.rb` to reflect changes in `Firewall` methods, ensuring correct behavior.\n> \n>"
  },
  {
    "pr": 3357,
    "title": "Refactor some PrivateSubnet methods",
    "description": "Biggest change is using a recursive CTE instead of a recursive ruby method for PrivateSubnet#find_all_connected_nics.",
    "ellipsis_summary": "Refactor `PrivateSubnet#find_all_connected_nics` to use a recursive CTE and update connection methods for efficiency.\n> \n>   - **Behavior**:\n>     - Refactor `PrivateSubnet#find_all_connected_nics` to use a recursive CTE instead of a recursive Ruby method.\n>     - Update `connect_subnet` and `disconnect_subnet` methods in `private_subnet.rb` to use `subnet_hash` for creating and destroying connections.\n>   - **Code Improvements**:\n>     - Add `association_lazy_eager_option` plugin to `model.rb`.\n>     - Simplify `connected_subnets` method in `private_subnet.rb`.\n>     - Use `nics_with_strand_label` in `subnet_nexus.rb` for filtering NICs by strand label.\n>   - **Tests**:\n>     - Update tests in `private_subnet_spec.rb` and `subnet_nexus_spec.rb` to reflect changes in methods and behavior.\n>     - Add tests for new behavior in `find_all_connected_nics` and connection methods.\n> \n>"
  },
  {
    "pr": 3359,
    "title": "Cache Strand#subject",
    "description": "I was suprised this wasn't cached already. There is one spec that doesn't work correctly with the caching, update it.",
    "ellipsis_summary": "Cache `Strand#subject` to improve performance and update test to ensure compatibility with caching.\n> \n>   - **Behavior**:\n>     - Cache `subject` in `Strand` class by storing decoded `ubid` in `@subject`.\n>     - Check if `@subject` is defined before decoding `ubid` again.\n>   - **Tests**:\n>     - Update test in `inference_router_target_nexus_spec.rb` to re-fetch `Strand` object before checking `subject` to ensure compatibility with caching.\n> \n>"
  },
  {
    "pr": 3360,
    "title": "Model Refactoring",
    "description": "I did a review of all model code, and in this PR are a bunch of minor improvements, each separated into their own commit for easier review.  The larger changes I submitted separate PRs for.\n\nThe base branch is the one used for #3557 , because there is one spec that needs fixes in that PR to pass.",
    "ellipsis_summary": "Refactor model code by replacing `include ResourceMethods` with `plugin ResourceMethods`, introduce new modules in `resource_methods.rb`, and update tests accordingly.\n> \n>   - **Refactoring**:\n>     - Replace `include ResourceMethods` with `plugin ResourceMethods` in multiple model files such as `access_control_entry.rb`, `account.rb`, and `action_tag.rb`.\n>     - Introduce `InstanceMethods` and `UbidTypeEtcMethods` modules in `resource_methods.rb`.\n>     - Update `configure` method in `resource_methods.rb` to use `instance_exec` and conditionally extend `UbidTypeEtcMethods`.\n>   - **Tests**:\n>     - Update `strand_spec.rb` to use `exists?` method for integrity check.\n>     - Move `resource_methods_spec.rb` to `spec/resource_methods_spec.rb` and update tests to reflect refactoring changes.\n>   - **Miscellaneous**:\n>     - Remove `resource_methods_spec.rb` file from `spec/model/` directory.\n> \n>"
  },
  {
    "pr": 3368,
    "title": "Add image sizes to E2E logs",
    "description": "",
    "ellipsis_summary": "> [!IMPORTANT]\n> Add logging of image sizes during VM host setup in `wait_setup_host` and update tests accordingly.\n> \n>   - **Behavior**:\n>     - In `hetzner_server.rb`, `wait_setup_host` now logs image sizes when `vm_host.strand.label` is `wait_download_boot_images`.\n>     - Adds a conditional logging statement using `Clog.emit` to log image sizes.\n>   - **Tests**:\n>     - In `hetzner_server_spec.rb`, adds test for logging image sizes when `vm_host.strand.label` is `wait_download_boot_images`.\n>     - Updates existing tests to check for repeated label checks using `at_least(:once)`.\n> \n>"
  },
  {
    "pr": 3369,
    "title": "Bump the js-dependencies group across 1 directory with 5 updates",
    "description": "Bumps the js-dependencies group with 5 updates in the / directory:\n\n| Package | From | To |\n| --- | --- | --- |\n| [@types/node](https://github.com/DefinitelyTyped/DefinitelyTyped/tree/HEAD/types/node) | `22.15.17` | `22.15.21` |\n| [debug](https://github.com/debug-js/debug) | `4.4.0` | `4.4.1` |\n| [dompurify](https://github.com/cure53/DOMPurify) | `3.2.5` | `3.2.6` |\n| [es-abstract](https://github.com/ljharb/es-abstract) | `1.23.9` | `1.23.10` |\n| [undici](https://github.com/nodejs/undici) | `6.21.2` | `6.21.3` |\n\n\nUpdates `@types/node` from 22.15.17 to 22.15.21\n<details>\n<summary>Commits</summary>\n<ul>\n<li>See full diff in <a href=\"https://github.com/DefinitelyTyped/DefinitelyTyped/commits/HEAD/types/node\">compare view</a></li>\n</ul>\n</details>\n<br />\n\nUpdates `debug` from 4.4.0 to 4.4.1\n<details>\n<summary>Release notes</summary>\n<p><em>Sourced from <a href=\"https://github.com/debug-js/debug/releases\">debug's releases</a>.</em></p>\n<blockquote>\n<h2>4.4.1</h2>\n<h2>What's Changed</h2>\n<ul>\n<li>fix(Issue-996): replace whitespaces in namespaces string with commas globally by <a href=\"https://github.com/pdahal-cx\"><code>@​pdahal-cx</code></a> in <a href=\"https://redirect.github.com/debug-js/debug/pull/997\">debug-js/debug#997</a></li>\n<li>fixes <a href=\"https://redirect.github.com/debug-js/debug/issues/987\">#987</a> fallback to localStorage.DEBUG if debug is not defined by <a href=\"https://github.com/lzilioli\"><code>@​lzilioli</code></a> in <a href=\"https://redirect.github.com/debug-js/debug/pull/988\">debug-js/debug#988</a></li>\n</ul>\n<h2>New Contributors</h2>\n<ul>\n<li><a href=\"https://github.com/pdahal-cx\"><code>@​pdahal-cx</code></a> made their first contribution in <a href=\"https://redirect.github.com/debug-js/debug/pull/997\">debug-js/debug#997</a></li>\n<li><a href=\"https://github.com/lzilioli\"><code>@​lzilioli</code></a> made their first contribution in <a href=\"https://redirect.github.com/debug-js/debug/pull/988\">debug-js/debug#988</a></li>\n</ul>\n<p><strong>Full Changelog</strong>: <a href=\"https://github.com/debug-js/debug/compare/4.4.0...4.4.1\">https://github.com/debug-js/debug/compare/4.4.0...4.4.1</a></p>\n</blockquote>\n</details>\n<details>\n<summary>Commits</summary>\n<ul>\n<li><a href=\"https://github.com/debug-js/debug/commit/33330fa8616b9b33f29f7674747be77266878ba6\"><code>33330fa</code></a> 4.4.1</li>\n<li><a href=\"https://github.com/debug-js/debug/commit/98df33ed9d5215c1d801b74e6ab00969759a6839\"><code>98df33e</code></a> remove istanbul</li>\n<li><a href=\"https://github.com/debug-js/debug/commit/bf2f574c3e588ce4b660bf4e392e7a5e788640c0\"><code>bf2f574</code></a> fixes <a href=\"https://redirect.github.com/debug-js/debug/issues/987\">#987</a> fallback to localStorage.DEBUG if debug is not defined (<a href=\"https://redirect.github.com/debug-js/debug/issues/988\">#988</a>)</li>\n<li><a href=\"https://github.com/debug-js/debug/commit/a0497bd46dacb701437f62cfc065dc72bf0952c7\"><code>a0497bd</code></a> Replace whitespaces in namespaces string with commas globally instead of just...</li>\n<li>See full diff in <a href=\"https://github.com/debug-js/debug/compare/4.4.0...4.4.1\">compare view</a></li>\n</ul>\n</details>\n<br />\n\nUpdates `dompurify` from 3.2.5 to 3.2.6\n<details>\n<summary>Release notes</summary>\n<p><em>Sourced from <a href=\"https://github.com/cure53/DOMPurify/releases\">dompurify's releases</a>.</em></p>\n<blockquote>\n<h2>DOMPurify 3.2.6</h2>\n<ul>\n<li>Fixed several typos and removed clutter from our documentation, thanks <a href=\"https://github.com/Rotzbua\"><code>@​Rotzbua</code></a></li>\n<li>Added <code>matrix:</code> as an allowed URI scheme, thanks <a href=\"https://github.com/kleinesfilmroellchen\"><code>@​kleinesfilmroellchen</code></a></li>\n<li>Added better config hardening against prototype pollution, thanks <a href=\"https://github.com/EffectRenan\"><code>@​EffectRenan</code></a></li>\n<li>Added better handling of attribute removal, thanks <a href=\"https://github.com/michalnieruchalski-tiugo\"><code>@​michalnieruchalski-tiugo</code></a></li>\n<li>Added better configuration for aggressive mXSS scrubbing behavior, thanks <a href=\"https://github.com/BryanValverdeU\"><code>@​BryanValverdeU</code></a></li>\n<li>Removed the script that caused the fake entry <a href=\"https://security.snyk.io/vuln/SNYK-JS-DOMPURIFY-10176060\">CVE-2025-48050</a></li>\n</ul>\n</blockquote>\n</details>\n<details>\n<summary>Commits</summary>\n<ul>\n<li><a href=\"https://github.com/cure53/DOMPurify/commit/32f765e632ff34eebf5e08128ae1ff8f0d0bbe7a\"><code>32f765e</code></a> Merge pull request <a href=\"https://redirect.github.com/cure53/DOMPurify/issues/1105\">#1105</a> from cure53/main</li>\n<li><a href=\"https://github.com/cure53/DOMPurify/commit/6158ecbd1b3997b37f88a339a5d47a39f324c63b\"><code>6158ecb</code></a> Merge pull request <a href=\"https://redirect.github.com/cure53/DOMPurify/issues/1103\">#1103</a> from cure53/main</li>\n<li><a href=\"https://github.com/cure53/DOMPurify/commit/0f7ce144b2dd12295366b3e677da7d64bff2b60d\"><code>0f7ce14</code></a> chore: Preparing 3.2.6 release</li>\n<li><a href=\"https://github.com/cure53/DOMPurify/commit/848463b05247ecbcf1d96cd4204063a5de854365\"><code>848463b</code></a> chore: removed unused test server script</li>\n<li><a href=\"https://github.com/cure53/DOMPurify/commit/b0e0ebbd9e861e7b657caa3b939dabf0102246fd\"><code>b0e0ebb</code></a> Update README.md</li>\n<li><a href=\"https://github.com/cure53/DOMPurify/commit/f094f76f0bd66a603f06935a1ed715b05b60279b\"><code>f094f76</code></a> Update README.md</li>\n<li><a href=\"https://github.com/cure53/DOMPurify/commit/6bc6d60e49256f27a4022181b7d8a5b0721fd534\"><code>6bc6d60</code></a> Merge pull request <a href=\"https://redirect.github.com/cure53/DOMPurify/issues/1101\">#1101</a> from odaysec/patch-1</li>\n<li><a href=\"https://github.com/cure53/DOMPurify/commit/e9afd609397aa31b0747a766504f698fcb6ad0f7\"><code>e9afd60</code></a> Update server.js</li>\n<li><a href=\"https://github.com/cure53/DOMPurify/commit/166151cc46cfed892d0d70bd5dcf822bf9a4e129\"><code>166151c</code></a> see <a href=\"https://redirect.github.com/cure53/DOMPurify/issues/1095\">#1095</a></li>\n<li><a href=\"https://github.com/cure53/DOMPurify/commit/ac7c59460c7c8c0ebf75c61007dd6c34119e099f\"><code>ac7c594</code></a> Merge pull request <a href=\"https://redirect.github.com/cure53/DOMPurify/issues/1096\">#1096</a> from Rotzbua/fix_missing</li>\n<li>Additional commits viewable in <a href=\"https://github.com/cure53/DOMPurify/compare/3.2.5...3.2.6\">compare view</a></li>\n</ul>\n</details>\n<br />\n\nUpdates `es-abstract` from 1.23.9 to 1.23.10\n<details>\n<summary>Changelog</summary>\n<p><em>Sourced from <a href=\"https://github.com/ljharb/es-abstract/blob/main/CHANGELOG.md\">es-abstract's changelog</a>.</em></p>\n<blockquote>\n<h1>1.23.10 / 2025-05-21</h1>\n<ul>\n<li>[Fix] properly handle Float16Array</li>\n<li>[Fix] <code>ES2024</code>+: <code>IsViewOutOfBounds</code>: properly handle resizable array buffers</li>\n<li>[Fix] <code>ES2024</code>+: <code>IsTypedArrayOutOfBounds</code>: properly handle resizable arrays</li>\n<li>[Fix] <code>ES2024</code>+: <code>GetViewByteLength</code>, <code>TypedArrayByteLength</code>, <code>TypedArrayLength</code>: properly handle resizable arrays</li>\n<li>[Fix] <code>ES2020</code>+: <code>abs</code> should accept bigints too</li>\n<li>[Fix] <code>ES2024</code>+: <code>ArrayBufferByteLength</code>: return the byte length for SABs, not NaN</li>\n<li>[Fix] <code>ES2024</code>+: <code>ArrayBufferCopyAndDetach</code>: properly handle resizable ArrayBuffers; add tests</li>\n<li>[Fix] <code>ES2021</code>: <code>SetTypedArrayFromTypedArray</code>: get proper source element size</li>\n<li>[Fix] <code>ES2023</code>+: <code>SetTypedArrayFromTypedArray</code>: ArrayBuffer shouldn‘t be bound</li>\n<li>[Fix] <code>ES2022</code>,<code>ES2023</code>: <code>ValidateIntegerTypedArray</code>: return the buffer</li>\n<li>[patch] <code>ES2023</code>+: <code>SortIndexedProperties</code>: improve error message</li>\n<li>[patch] clean up some comments</li>\n<li>[patch] <code>ES2023</code>+: <code>InternalizeJSONProperty</code>: remove extra argument</li>\n<li>[patch] <code>ES2020</code>+<code>: </code>GetIterator`: fix comment to indicate that it changed in ES2018</li>\n<li>[Refactor] Typed Array stuff: store &quot;choices&quot; string in the table file</li>\n<li>[Refactor] <code>ES2021</code>+: use isInteger directly in a few AOs</li>\n<li>[Refactor] <code>ES2022</code>+: <code>ValidateAndApplyPropertyDescriptor</code>: use <code>typeof</code> over <code>Type()</code></li>\n<li>[Refactor] <code>helpers/getIteratorMethod</code>: no longer require a passed-in <code>IsArray</code></li>\n<li>[Refactor] <code>ES2017</code>+: <code>Num{ber,eric}ToRawBytes</code>, <code>RawBytesToNum{ber,eric}</code>: use TAO table sizes</li>\n<li>[Refactor] <code>ES2015</code>+: <code>{,Ordinary}ObjectCreate</code>: prefer <code>__proto__</code> syntax over <code>Object.create</code></li>\n<li>[Refactor] <code>CopyDataProperties</code> tests are the same in ES2020 as in ES2018</li>\n<li>[Refactor] <code>ES2016</code> - <code>ES2020</code>: <code>UTF16Encoding</code>: match <code>UTF16EncodeCodePoint</code></li>\n<li>[Refactor] use <code>es-object-atoms/isObject</code> directly</li>\n<li>[Refactor] add <code>isSameType</code> helper, and use it</li>\n<li>[Refactor] <code>ES2017</code>+: <code>WordCharacters</code>: <code>String.prototype.indexOf</code> should always be present</li>\n<li>[Refactor] use <code>arr[arr.length] = x</code> instead of <code>$push(arr, x)</code></li>\n<li>[Robustness] <code>ES2015</code>+: <code>ObjectDefineProperties</code>: use <code>OrdinaryGetOwnProperty</code> to handle a missing <code>gOPD</code></li>\n<li>[meta] add missing comments</li>\n<li>[meta] fix operations npmignores</li>\n<li>[meta] fix URL in comment</li>\n<li>[meta] note <code>isNegativeZero</code> helper is slated for removal (<a href=\"https://redirect.github.com/ljharb/es-abstract/issues/155\">#155</a>)</li>\n<li>[Deps] update <code>call-bound</code>, <code>which-typed-array</code>, <code>es-object-atoms</code>, <code>get-intrinsic</code>, <code>get-proto</code>, <code>regexp.prototype.flags</code>, <code>is-weakref</code>, <code>object-inspect</code></li>\n<li>[Dev Deps] pin <code>glob</code> to v7</li>\n<li>[Dev Deps] update <code>@unicode/unicode-15.0.0</code>, <code>es-value-fixtures</code>, <code>for-each</code>, <code>has-strict-mode</code>, <code>ses</code></li>\n<li>[Tests] avoid an OOM in node 20 on SES tests</li>\n<li>[Tests] compare correct TA type</li>\n<li>[Tests] consolidate map of AO property names to prose names</li>\n<li>[Tests] extract common helpers</li>\n<li>[Tests] increase coverage</li>\n<li>[Tests] increase coverage</li>\n<li>[Tests] node 20 throws with RABs that are not a multiple of 4 and 8</li>\n<li>[Tests] refactor TA types arrays to year-taking functions</li>\n<li>[Tests] refactor test megafile into file-per-method tests</li>\n<li>[Tests] remove now-unused test mega-file</li>\n<li>[Tests] some cleanups</li>\n<li>[Tests] use proper import</li>\n</ul>\n</blockquote>\n</details>\n<details>\n<summary>Commits</summary>\n<ul>\n<li><a href=\"https://github.com/ljharb/es-abstract/commit/194b788a8c355662c75a47d92cb943f799c514ca\"><code>194b788</code></a> v1.23.10</li>\n<li><a href=\"https://github.com/ljharb/es-abstract/commit/895ca1a12aec2b070cfd4f513e8728bf6e76a0e2\"><code>895ca1a</code></a> [Tests] use proper import</li>\n<li><a href=\"https://github.com/ljharb/es-abstract/commit/871c9c72c3b3fa61cc3dbfa67f1c512e69c19e9c\"><code>871c9c7</code></a> [Refactor] Typed Array stuff: store &quot;choices&quot; string in the table file</li>\n<li><a href=\"https://github.com/ljharb/es-abstract/commit/eae69ae44fbd7216bf22e51365de0a09365403fa\"><code>eae69ae</code></a> [Tests] refactor TA types arrays to year-taking functions</li>\n<li><a href=\"https://github.com/ljharb/es-abstract/commit/cd7b7afe584a1c9963aa9de335ce0bd88f6ff374\"><code>cd7b7af</code></a> [Fix] properly handle Float16Array</li>\n<li><a href=\"https://github.com/ljharb/es-abstract/commit/978a0b03835dbcafd5c2c9f09537356d6cae76cf\"><code>978a0b0</code></a> [Tests] remove now-unused test mega-file</li>\n<li><a href=\"https://github.com/ljharb/es-abstract/commit/f9ec37092f33267165215ffc686b24439f0a0d3f\"><code>f9ec370</code></a> [Tests] refactor test megafile into file-per-method tests</li>\n<li><a href=\"https://github.com/ljharb/es-abstract/commit/dd43bb50d4681617df20a84e3877f8e6ef91b1dd\"><code>dd43bb5</code></a> [Dev Deps] pin <code>glob</code> to v7</li>\n<li><a href=\"https://github.com/ljharb/es-abstract/commit/35d2061fed6f4df94273e080ae2ab71f28e4f470\"><code>35d2061</code></a> [Refactor] <code>ES2021</code>+: use isInteger directly in a few AOs</li>\n<li><a href=\"https://github.com/ljharb/es-abstract/commit/75511e23a375a658a327b7b3dc768327d1fb3d39\"><code>75511e2</code></a> [Refactor] <code>ES2022</code>+: <code>ValidateAndApplyPropertyDescriptor</code>: use <code>typeof</code> over...</li>\n<li>Additional commits viewable in <a href=\"https://github.com/ljharb/es-abstract/compare/v1.23.9...v1.23.10\">compare view</a></li>\n</ul>\n</details>\n<br />\n\nUpdates `undici` from 6.21.2 to 6.21.3\n<details>\n<summary>Release notes</summary>\n<p><em>Sourced from <a href=\"https://github.com/nodejs/undici/releases\">undici's releases</a>.</em></p>\n<blockquote>\n<h2>v6.21.3</h2>\n<h2>What's Changed</h2>\n<ul>\n<li>[Backport v6.x] append crlf to formdata body by <a href=\"https://github.com/github-actions\"><code>@​github-actions</code></a> in <a href=\"https://redirect.github.com/nodejs/undici/pull/4210\">nodejs/undici#4210</a></li>\n</ul>\n<p><strong>Full Changelog</strong>: <a href=\"https://github.com/nodejs/undici/compare/v6.21.2...v6.21.3\">https://github.com/nodejs/undici/compare/v6.21.2...v6.21.3</a></p>\n</blockquote>\n</details>\n<details>\n<summary>Commits</summary>\n<ul>\n<li><a href=\"https://github.com/nodejs/undici/commit/da0e823ac0e89390256d61c429df0cf236afb79e\"><code>da0e823</code></a> Bumped v6.21.4</li>\n<li><a href=\"https://github.com/nodejs/undici/commit/dbbe0a2d5004cd7b6016e52736f59ce37bdb1556\"><code>dbbe0a2</code></a> append crlf to formdata body (<a href=\"https://redirect.github.com/nodejs/undici/issues/3625\">#3625</a>) (<a href=\"https://redirect.github.com/nodejs/undici/issues/4210\">#4210</a>)</li>\n<li>See full diff in <a href=\"https://github.com/nodejs/undici/compare/v6.21.2...v6.21.3\">compare view</a></li>\n</ul>\n</details>\n<br />\n\n\nDependabot will resolve any conflicts with this PR as long as you don't alter it yourself. You can also trigger a rebase manually by commenting `@dependabot rebase`.\n\n[//]: # (dependabot-automerge-start)\n[//]: # (dependabot-automerge-end)\n\n---\n\n<details>\n<summary>Dependabot commands and options</summary>\n<br />\n\nYou can trigger Dependabot actions by commenting on this PR:\n- `@dependabot rebase` will rebase this PR\n- `@dependabot recreate` will recreate this PR, overwriting any edits that have been made to it\n- `@dependabot merge` will merge this PR after your CI passes on it\n- `@dependabot squash and merge` will squash and merge this PR after your CI passes on it\n- `@dependabot cancel merge` will cancel a previously requested merge and block automerging\n- `@dependabot reopen` will reopen this PR if it is closed\n- `@dependabot close` will close this PR and stop Dependabot recreating it. You can achieve the same result by closing it manually\n- `@dependabot show <dependency name> ignore conditions` will show all of the ignore conditions of the specified dependency\n- `@dependabot ignore <dependency name> major version` will close this group update PR and stop Dependabot creating any more for the specific dependency's major version (unless you unignore this specific dependency's major version or upgrade to it yourself)\n- `@dependabot ignore <dependency name> minor version` will close this group update PR and stop Dependabot creating any more for the specific dependency's minor version (unless you unignore this specific dependency's minor version or upgrade to it yourself)\n- `@dependabot ignore <dependency name>` will close this group update PR and stop Dependabot creating any more for the specific dependency (unless you unignore this specific dependency or upgrade to it yourself)\n- `@dependabot unignore <dependency name>` will remove all of the ignore conditions of the specified dependency\n- `@dependabot unignore <dependency name> <ignore condition>` will remove the ignore condition of the specified dependency and ignore conditions\n\n\n</details>",
    "ellipsis_summary": ""
  },
  {
    "pr": 3375,
    "title": "Handle Aws::S3::Errors::ServiceUnavailable during multipart upload",
    "description": "Treat this as a 503 error and not a 400 errors, because it is not an issue with the request.\n\nFixes an unhandled production exception.",
    "ellipsis_summary": "Handle `Aws::S3::Errors::ServiceUnavailable` as a 503 error during multipart uploads in `routes/runtime/github.rb`.\n> \n>   - **Error Handling**:\n>     - In `routes/runtime/github.rb`, handle `Aws::S3::Errors::ServiceUnavailable` during multipart upload by logging the error and returning a 503 status code.\n>   - **Tests**:\n>     - Add test in `github_spec.rb` to verify 503 error handling when S3 service is unavailable during multipart upload.\n> \n>"
  },
  {
    "pr": 3382,
    "title": "Put PG lantern behind a feature flag",
    "description": "",
    "ellipsis_summary": "> [!IMPORTANT]\n> Introduces a feature flag for Lantern PostgreSQL databases, renames Lantern to ParadeDB, and updates UI and tests accordingly.\n> \n>   - **Feature Flag**:\n>     - Adds `:postgres_lantern` feature flag to `Project` class in `model/project.rb`.\n>     - Checks `get_ff_postgres_lantern` in `postgres_post` in `helpers/postgres.rb` to restrict Lantern flavor creation.\n>   - **Renaming**:\n>     - Renames `lantern` flavor to `paradedb` in `success.txt`, `create_spec.rb`, and `postgres_spec.rb`.\n>   - **UI Changes**:\n>     - Updates `index.erb` to hide Lantern option if `get_ff_postgres_lantern` is false.\n>   - **Tests**:\n>     - Adds test in `postgres_spec.rb` to ensure Lantern creation fails without feature flag.\n> \n>"
  },
  {
    "pr": 3386,
    "title": "Fix K8s Worker Node Pricing",
    "description": "We were calculating the worker node prices slightly off, because the calculator was assuming that the nodes would get 40GB storage, while in reality the default storage is calculated in the VM nexus with `vm_size.storage_size_options.first`. This commit uses the same logic in the UI option content generator.\n\nAlso we display the local storage of the nodes.",
    "ellipsis_summary": "Fixes Kubernetes worker node pricing by using actual storage size and updates UI to display it correctly.\n> \n>   - **Behavior**:\n>     - Fixes worker node pricing in `content_generator.rb` by using `worker_size.storage_size_options.first` instead of hardcoded 40GB.\n>     - Updates UI to display correct storage size in `worker_size()`.\n>   - **Tests**:\n>     - Adds test in `kubernetes_cluster_spec.rb` to verify correct display of vCPUs, RAM, and storage size for worker nodes.\n> \n>"
  },
  {
    "pr": 3388,
    "title": "Add a gen_timestamp_ubid_uuid database function",
    "description": "Use this function in Semaphore.incr to reduce the number of queries from 4 to 1.\n\nThe function is basically the same as the existing gen_random_ubid_uuid, except the first 48 bits are the epoch timestamp in milliseconds instead of being random.",
    "ellipsis_summary": "Add `gen_timestamp_ubid_uuid` function to generate timestamp-based UUIDs, optimizing `Semaphore.incr` to reduce queries.\n> \n>   - **Database Functionality**:\n>     - Adds `gen_timestamp_ubid_uuid` function in `20250529_gen_timestamp_ubid_uuid.rb` to generate timestamp-based UUIDs in UBID format.\n>     - Function uses 48-bit timestamp and random bits for UUID generation.\n>   - **Model Changes**:\n>     - Updates `Semaphore.incr` in `semaphore.rb` to use `gen_timestamp_ubid_uuid`, reducing queries from 4 to 1.\n>     - Handles invalid `name` in `Semaphore.incr` by raising `RuntimeError`.\n>   - **Testing**:\n>     - Updates `semaphore_spec.rb` to test `Semaphore.incr` with invalid names.\n>     - Adds test in `ubid_spec.rb` to verify timestamp UUID generation in UBID format.\n> \n>"
  },
  {
    "pr": 3389,
    "title": "First phase of route cleanup",
    "description": "Most of these are fairly simple route restructuring changes, best viewed ignored whitespace differences. There a a couple that change queries to be more efficient.",
    "ellipsis_summary": "Refactored and optimized route handling across multiple files for improved organization and efficiency, including query optimizations and test updates.\n> \n>   - **Route Restructuring**:\n>     - Consolidated `r.get` and `r.post` blocks under `r.is` in `project.rb`, `billing.rb`, `discount_code.rb`, `inference_api_key.rb`, `kubernetes_cluster.rb`, `firewall.rb`, `firewall_rule.rb`, `load_balancer.rb`, `postgres.rb`, `private_subnet.rb`, `private_location.rb`, `token.rb`, `usage_alert.rb`, `user.rb`, and `github.rb`.\n>     - Changed `r.delete true` to `r.delete` in `billing.rb`, `firewall.rb`, `firewall_rule.rb`, `load_balancer.rb`, `postgres.rb`, `private_subnet.rb`, `token.rb`, `usage_alert.rb`, and `user.rb`.\n>     - Replaced `r.get true` with `r.get` in `project.rb`, `billing.rb`, `firewall.rb`, `load_balancer.rb`, `postgres.rb`, `private_subnet.rb`, `private_location.rb`, `user.rb`, and `github.rb`.\n>   - **Query Optimization**:\n>     - Improved query efficiency in `billing.rb` by using `unless ... empty?` instead of `select_map.include?` for fraud check.\n>     - Optimized dataset filtering in `github.rb` for cache entries.\n>   - **Miscellaneous**:\n>     - Updated test cases in `access_control_spec.rb` and `billing_spec.rb` to reflect route changes.\n>     - Minor refactoring and cleanup in various route files for consistency and readability.\n> \n>"
  },
  {
    "pr": 3390,
    "title": "Second phase of route cleanups",
    "description": "These contain the more complex changes, most of which are related to N+1 query reduction.",
    "ellipsis_summary": "Optimize N+1 queries and improve authorization checks across models and routes, with added tests for unauthorized access handling.\n> \n>   - **Behavior**:\n>     - Optimize N+1 query in `clover.rb` by using `first_project_with_resources` method in `Project`.\n>     - Update `routes/project.rb` and `routes/project/private_location.rb` to use `has_resources?` method for resource checks.\n>     - Modify `routes/project/location/firewall.rb` and `routes/project/location/private_subnet.rb` to use dataset queries for authorization checks.\n>   - **Models**:\n>     - Add `first_project_with_resources` method to `Project` in `project.rb` for efficient resource checking.\n>     - Change `has_resources` to `has_resources?` in `Location` and `Project` models.\n>     - Add `one_through_one :project` association in `GithubRunner` in `github_runner.rb`.\n>   - **Tests**:\n>     - Add test in `firewall_spec.rb` to check unauthorized access when firewall's private subnets are not authorized.\n>   - **Misc**:\n>     - Minor refactoring in `routes/project/location/postgres.rb` to use dataset updates instead of iterating over collections.\n> \n>"
  },
  {
    "pr": 3391,
    "title": "Third phase of route cleanups",
    "description": "These are all fairly simple changes.",
    "ellipsis_summary": "Refactor and clean up route handling across multiple files to improve readability, consistency, and behavior handling.\n> \n>   - **Behavior**:\n>     - Refactor route handling in `project.rb`, `billing.rb`, `firewall.rb`, `kubernetes_cluster.rb`, `postgres.rb`, `private_subnet.rb`, `vm.rb`, and `token.rb` to simplify and clean up route definitions.\n>     - Ensure consistent use of `check_found_object()` to handle missing resources in `firewall.rb`, `kubernetes_cluster.rb`, `postgres.rb`, `private_subnet.rb`, `vm.rb`, and `token.rb`.\n>     - Modify `r.is` and `r.delete` blocks to improve readability and consistency in `project.rb` and `postgres.rb`.\n>   - **Code Quality**:\n>     - Replace `if` with `unless` for better readability in `billing.rb`.\n>     - Remove unnecessary eager loading in `firewall.rb`, `private_subnet.rb`, and `vm.rb`.\n>     - Use `servers_dataset` instead of `servers` in `postgres.rb` and `postgres_spec.rb` for consistency.\n>   - **Testing**:\n>     - Update `postgres_spec.rb` to reflect changes in route handling and ensure tests cover new behavior.\n> \n>"
  },
  {
    "pr": 3395,
    "title": "Revert the dispatcher changes",
    "description": "This PR is only designed for use by the on-call, in case there are problems discovered over the next few days, and backing out the changes is desired as part of the troubleshooting.\n\nRevert \"Allow dispatcher queue size ratio to be configured\"\n\nThis reverts commit 09771367746d39773f13234948047f3ddea14337.\n\nRevert \"Allow configurable min/max limits for dispatcher threads\"\n\nThis reverts commit c2672df9308f3adfda8816069f170724f89cb868.\n\nRevert \"Close ssh sessions and clear ssh session cache after strand run\"\n\nThis reverts commit bf0c22cd1cd33d3d876006caa57b64e7bff7377c.\n\nRevert \"Use a maximum of 15 worker threads for respirate\"\n\nThis reverts commit 43246aaa082959798d763d92706ab05aed122586.\n\nRevert \"Select schedule in dispatcher scan query in addition to id\"\n\nThis reverts commit 1eca3c01b69fa6ecc0fbfafcceaeb2c580e41ad6.\n\nReapply \"Revert dispatcher rewrite\"\n\nThis reverts commit 46e403c0d872083744a89e65846c36ac4b30cf43.",
    "ellipsis_summary": "Reverts recent dispatcher changes, including thread management and configuration, to previous stable state for troubleshooting purposes.\n> \n>   - **Reverts**:\n>     - Reverts dispatcher queue size ratio configuration changes.\n>     - Reverts configurable min/max limits for dispatcher threads.\n>     - Reverts changes to close SSH sessions and clear cache after strand run.\n>     - Reverts the use of a maximum of 15 worker threads for respirate.\n>     - Reverts selection of schedule in dispatcher scan query.\n>     - Reapplies previous dispatcher rewrite revert.\n>   - **Files Affected**:\n>     - `scheduling/dispatcher.rb`: Reverts to previous thread management and scanning logic.\n>     - `config.rb`: Removes dispatcher thread and queue size configuration options.\n>     - `bin/respirate`: Reverts loop logic to previous implementation.\n>   - **Tests**:\n>     - Updates `dispatcher_spec.rb` to reflect reverted logic and ensure tests align with previous dispatcher behavior.\n> \n>"
  },
  {
    "pr": 3396,
    "title": "Bump the development-dependencies group across 1 directory with 8 updates",
    "description": "Bumps the development-dependencies group with 4 updates in the / directory: [rspec](https://github.com/rspec/rspec), [benchmark](https://github.com/ruby/benchmark), [rubocop](https://github.com/rubocop/rubocop) and [websocket-driver](https://github.com/faye/websocket-driver-ruby).\n\nUpdates `rspec` from 3.13.0 to 3.13.1\n<details>\n<summary>Commits</summary>\n<ul>\n<li><a href=\"https://github.com/rspec/rspec/commit/cd5cab2a4373b03dc730d84c8214b0cca1b7fde2\"><code>cd5cab2</code></a> rspec v3.13.1</li>\n<li><a href=\"https://github.com/rspec/rspec/commit/4c87b84ff60c314c7004c0ede086d1d2a3ae2e8b\"><code>4c87b84</code></a> Remove duplicate source uri</li>\n<li><a href=\"https://github.com/rspec/rspec/commit/02dcc2a5a1ed9c67966fbdb3f41688c2c2bdc8bb\"><code>02dcc2a</code></a> Set rubygems homepage to rspec.info</li>\n<li><a href=\"https://github.com/rspec/rspec/commit/d3054dacfac187d333785d38238fe3140938fd43\"><code>d3054da</code></a> Set tag prefixes</li>\n<li><a href=\"https://github.com/rspec/rspec/commit/df15aaa983b7ef2997947e8ef97b76d6930b421c\"><code>df15aaa</code></a> Unify Gemfile</li>\n<li><a href=\"https://github.com/rspec/rspec/commit/3b23a7152d6b53b935b65f1a395d88fe62f94d86\"><code>3b23a71</code></a> Unify <code>.gitignore</code></li>\n<li>See full diff in <a href=\"https://github.com/rspec/rspec/compare/rspec-metagem-v3.13.0...rspec-v3.13.1\">compare view</a></li>\n</ul>\n</details>\n<br />\n\nUpdates `benchmark` from 0.4.0 to 0.4.1\n<details>\n<summary>Release notes</summary>\n<p><em>Sourced from <a href=\"https://github.com/ruby/benchmark/releases\">benchmark's releases</a>.</em></p>\n<blockquote>\n<h2>v0.4.1</h2>\n<h2>What's Changed</h2>\n<ul>\n<li>Document that default FORMAT includes total time by <a href=\"https://github.com/paarthmadan\"><code>@​paarthmadan</code></a> in <a href=\"https://redirect.github.com/ruby/benchmark/pull/12\">ruby/benchmark#12</a></li>\n</ul>\n<h2>New Contributors</h2>\n<ul>\n<li><a href=\"https://github.com/paarthmadan\"><code>@​paarthmadan</code></a> made their first contribution in <a href=\"https://redirect.github.com/ruby/benchmark/pull/12\">ruby/benchmark#12</a></li>\n</ul>\n<p><strong>Full Changelog</strong>: <a href=\"https://github.com/ruby/benchmark/compare/v0.4.0...v0.4.1\">https://github.com/ruby/benchmark/compare/v0.4.0...v0.4.1</a></p>\n</blockquote>\n</details>\n<details>\n<summary>Commits</summary>\n<ul>\n<li><a href=\"https://github.com/ruby/benchmark/commit/6d878b4c0b96afaa6b234a13bf0ed36910c56913\"><code>6d878b4</code></a> v0.4.1</li>\n<li><a href=\"https://github.com/ruby/benchmark/commit/b9db5dd48b445f7e7ff57c1351347d318e783210\"><code>b9db5dd</code></a> Merge pull request <a href=\"https://redirect.github.com/ruby/benchmark/issues/12\">#12</a> from paarthmadan/correct-format-documentation</li>\n<li><a href=\"https://github.com/ruby/benchmark/commit/d387ff850c73e308358b7cca51acd7a8af596d4c\"><code>d387ff8</code></a> Merge pull request <a href=\"https://redirect.github.com/ruby/benchmark/issues/33\">#33</a> from ruby/dependabot/github_actions/step-security/hard...</li>\n<li><a href=\"https://github.com/ruby/benchmark/commit/17a729e6675f59ac536729e8d0382b55ffaf5652\"><code>17a729e</code></a> Bump step-security/harden-runner from 2.11.1 to 2.12.0</li>\n<li><a href=\"https://github.com/ruby/benchmark/commit/a30b6d4826c4bf3103510ccbcb41cbf89b286500\"><code>a30b6d4</code></a> Merge pull request <a href=\"https://redirect.github.com/ruby/benchmark/issues/32\">#32</a> from ruby/dependabot/github_actions/step-security/hard...</li>\n<li><a href=\"https://github.com/ruby/benchmark/commit/ab59593588bb17758a7eb7a4a07b91abf19a059d\"><code>ab59593</code></a> Bump step-security/harden-runner from 2.11.0 to 2.11.1</li>\n<li><a href=\"https://github.com/ruby/benchmark/commit/f200b9e37dc388ca3e83d89d9a4c2b784a4833a4\"><code>f200b9e</code></a> Merge pull request <a href=\"https://redirect.github.com/ruby/benchmark/issues/31\">#31</a> from ruby/dependabot/github_actions/step-security/hard...</li>\n<li><a href=\"https://github.com/ruby/benchmark/commit/08282b7560b97b9d77fd93d1aa52aade0f6ba050\"><code>08282b7</code></a> Bump step-security/harden-runner from 2.10.4 to 2.11.0</li>\n<li><a href=\"https://github.com/ruby/benchmark/commit/1511574c5a93625c2134669ab4d262f262bc16c4\"><code>1511574</code></a> Merge pull request <a href=\"https://redirect.github.com/ruby/benchmark/issues/30\">#30</a> from ruby/dependabot/github_actions/step-security/hard...</li>\n<li><a href=\"https://github.com/ruby/benchmark/commit/ec8b39d0c01a6f75fc9dae83159eef8b12ab55df\"><code>ec8b39d</code></a> Bump step-security/harden-runner from 2.10.3 to 2.10.4</li>\n<li>Additional commits viewable in <a href=\"https://github.com/ruby/benchmark/compare/v0.4.0...v0.4.1\">compare view</a></li>\n</ul>\n</details>\n<br />\n\nUpdates `rspec-core` from 3.13.3 to 3.13.4\n<details>\n<summary>Changelog</summary>\n<p><em>Sourced from <a href=\"https://github.com/rspec/rspec/blob/rspec-core-v3.13.4/rspec-core/Changelog.md\">rspec-core's changelog</a>.</em></p>\n<blockquote>\n<h3>3.13.4 / 2025-05-27</h3>\n<p><a href=\"http://github.com/rspec/rspec/compare/rspec-core-v3.13.3...rspec-core-v3.13.4\">Full Changelog</a></p>\n<p>Bug Fixes:</p>\n<ul>\n<li>Fix links in gemspec to point to the monorepo / homepage.</li>\n</ul>\n</blockquote>\n</details>\n<details>\n<summary>Commits</summary>\n<ul>\n<li><a href=\"https://github.com/rspec/rspec/commit/01ea1e7b50eb53838a1b5c78b7113fd081cd3174\"><code>01ea1e7</code></a> rspec-core v3.13.4</li>\n<li><a href=\"https://github.com/rspec/rspec/commit/7ba83f2ea0dcd2ac03bee59e627a3c9ca7005a3c\"><code>7ba83f2</code></a> Change log for updated links, which also fixes some changelog links...</li>\n<li><a href=\"https://github.com/rspec/rspec/commit/02dcc2a5a1ed9c67966fbdb3f41688c2c2bdc8bb\"><code>02dcc2a</code></a> Set rubygems homepage to rspec.info</li>\n<li><a href=\"https://github.com/rspec/rspec/commit/647dba05f95e00940ba8ef4417020f75b22dc277\"><code>647dba0</code></a> Update gemspecs</li>\n<li><a href=\"https://github.com/rspec/rspec/commit/d3054dacfac187d333785d38238fe3140938fd43\"><code>d3054da</code></a> Set tag prefixes</li>\n<li><a href=\"https://github.com/rspec/rspec/commit/e94e3ca109463330c95fae94edcfd5550f2f0dcd\"><code>e94e3ca</code></a> Merge pull request <a href=\"https://redirect.github.com/rspec/rspec/issues/200\">#200</a> from lekemula/lm-example-group-yard-docs</li>\n<li>See full diff in <a href=\"https://github.com/rspec/rspec/compare/rspec-core-v3.13.3...rspec-core-v3.13.4\">compare view</a></li>\n</ul>\n</details>\n<br />\n\nUpdates `rspec-expectations` from 3.13.4 to 3.13.5\n<details>\n<summary>Changelog</summary>\n<p><em>Sourced from <a href=\"https://github.com/rspec/rspec/blob/rspec-expectations-v3.13.5/rspec-expectations/Changelog.md\">rspec-expectations's changelog</a>.</em></p>\n<blockquote>\n<h3>3.13.5 / 2025-05-27</h3>\n<p><a href=\"https://github.com/rspec/rspec/compare/rspec-expectations-v3.13.4...rspec-expectations-v3.13.5\">Full Changelog</a></p>\n<p>Bug Fixes:</p>\n<ul>\n<li>Fix links in gemspec to point to the monorepo / homepage.</li>\n</ul>\n</blockquote>\n</details>\n<details>\n<summary>Commits</summary>\n<ul>\n<li><a href=\"https://github.com/rspec/rspec/commit/cafd53dd142b97503b27555ebdb90cd15e0a2e7e\"><code>cafd53d</code></a> rspec-expectations v3.13.5</li>\n<li><a href=\"https://github.com/rspec/rspec/commit/7ba83f2ea0dcd2ac03bee59e627a3c9ca7005a3c\"><code>7ba83f2</code></a> Change log for updated links, which also fixes some changelog links...</li>\n<li><a href=\"https://github.com/rspec/rspec/commit/02dcc2a5a1ed9c67966fbdb3f41688c2c2bdc8bb\"><code>02dcc2a</code></a> Set rubygems homepage to rspec.info</li>\n<li><a href=\"https://github.com/rspec/rspec/commit/647dba05f95e00940ba8ef4417020f75b22dc277\"><code>647dba0</code></a> Update gemspecs</li>\n<li><a href=\"https://github.com/rspec/rspec/commit/d3054dacfac187d333785d38238fe3140938fd43\"><code>d3054da</code></a> Set tag prefixes</li>\n<li>See full diff in <a href=\"https://github.com/rspec/rspec/compare/rspec-expectations-v3.13.4...rspec-expectations-v3.13.5\">compare view</a></li>\n</ul>\n</details>\n<br />\n\nUpdates `rspec-mocks` from 3.13.4 to 3.13.5\n<details>\n<summary>Changelog</summary>\n<p><em>Sourced from <a href=\"https://github.com/rspec/rspec/blob/rspec-mocks-v3.13.5/rspec-mocks/Changelog.md\">rspec-mocks's changelog</a>.</em></p>\n<blockquote>\n<h3>3.13.5 / 2025-05-27</h3>\n<p><a href=\"https://github.com/rspec/rspec/compare/rspec-mocks-v3.13.4...rspec-mocks-v3.13.5\">Full Changelog</a></p>\n<p>Bug Fixes:</p>\n<ul>\n<li><code>rspec/rspec#214</code>\nbetween tests. (Jon Rowe, <a href=\"https://redirect.github.com/rspec/rspec/issues/219\">rspec/rspec#219</a>)</li>\n<li>Fix links in gemspec to point to monorepo / homepage. (Jon Rowe)</li>\n</ul>\n</blockquote>\n</details>\n<details>\n<summary>Commits</summary>\n<ul>\n<li><a href=\"https://github.com/rspec/rspec/commit/7ba83f2ea0dcd2ac03bee59e627a3c9ca7005a3c\"><code>7ba83f2</code></a> Change log for updated links, which also fixes some changelog links...</li>\n<li><a href=\"https://github.com/rspec/rspec/commit/02dcc2a5a1ed9c67966fbdb3f41688c2c2bdc8bb\"><code>02dcc2a</code></a> Set rubygems homepage to rspec.info</li>\n<li><a href=\"https://github.com/rspec/rspec/commit/e3ab756a30593bbfe135d7419c78d5cc552d2c20\"><code>e3ab756</code></a> rspec-mocks v3.13.5</li>\n<li><a href=\"https://github.com/rspec/rspec/commit/add84c0ea55afbe53fc5a526c40bf3abb3a22507\"><code>add84c0</code></a> Unset key rather than setting to false</li>\n<li>See full diff in <a href=\"https://github.com/rspec/rspec/compare/rspec-mocks-v3.13.4...rspec-mocks-v3.13.5\">compare view</a></li>\n</ul>\n</details>\n<br />\n\nUpdates `rspec-support` from 3.13.3 to 3.13.4\n<details>\n<summary>Changelog</summary>\n<p><em>Sourced from <a href=\"https://github.com/rspec/rspec/blob/rspec-support-v3.13.4/rspec-support/Changelog.md\">rspec-support's changelog</a>.</em></p>\n<blockquote>\n<h3>3.13.4</h3>\n<p><a href=\"http://github.com/rspec/rspec/compare/rspec-support-v3.13.3...rspec-support-v3.13.4\">Full Changelog</a></p>\n<p>Bug Fixes:</p>\n<ul>\n<li>Fix homepage link in gemspec. (Jon Rowe)</li>\n</ul>\n</blockquote>\n</details>\n<details>\n<summary>Commits</summary>\n<ul>\n<li><a href=\"https://github.com/rspec/rspec/commit/a0f24d243b8d08e23690762dc13f3d559edbe2fa\"><code>a0f24d2</code></a> rspec-support v3.13.4</li>\n<li><a href=\"https://github.com/rspec/rspec/commit/7ba83f2ea0dcd2ac03bee59e627a3c9ca7005a3c\"><code>7ba83f2</code></a> Change log for updated links, which also fixes some changelog links...</li>\n<li><a href=\"https://github.com/rspec/rspec/commit/02dcc2a5a1ed9c67966fbdb3f41688c2c2bdc8bb\"><code>02dcc2a</code></a> Set rubygems homepage to rspec.info</li>\n<li>See full diff in <a href=\"https://github.com/rspec/rspec/compare/rspec-support-v3.13.3...rspec-support-v3.13.4\">compare view</a></li>\n</ul>\n</details>\n<br />\n\nUpdates `rubocop` from 1.75.7 to 1.75.8\n<details>\n<summary>Release notes</summary>\n<p><em>Sourced from <a href=\"https://github.com/rubocop/rubocop/releases\">rubocop's releases</a>.</em></p>\n<blockquote>\n<h2>RuboCop v1.75.8</h2>\n<h3>Bug fixes</h3>\n<ul>\n<li><a href=\"https://redirect.github.com/rubocop/rubocop/pull/14191\">#14191</a>: Fix <code>Lint/FloatComparison</code> cop to detect floating-point number comparisons in <code>case</code> statements. (<a href=\"https://github.com/daisuke\"><code>@​daisuke</code></a>)</li>\n<li><a href=\"https://redirect.github.com/rubocop/rubocop/pull/14209\">#14209</a>: Fix an error for <code>Style/RedundantFormat</code> with invalid format arguments. (<a href=\"https://github.com/earlopain\"><code>@​earlopain</code></a>)</li>\n<li><a href=\"https://redirect.github.com/rubocop/rubocop/pull/14200\">#14200</a>: Fix false positives for <code>Style/DefWithParentheses</code> when using endless method definition with empty parentheses and a space before <code>=</code>. (<a href=\"https://github.com/koic\"><code>@​koic</code></a>)</li>\n<li><a href=\"https://redirect.github.com/rubocop/rubocop/issues/14197\">#14197</a>: Fix infinite loop error for <code>EnforcedStyle: with_fixed_indentation</code> of <code>Layout/ArgumentAlignment</code> and <code>EnforcedStyle: consistent</code> of <code>Layout/FirstArgumentIndentation</code> and <code>Layout/HashAlignment</code>. (<a href=\"https://github.com/koic\"><code>@​koic</code></a>)</li>\n<li><a href=\"https://redirect.github.com/rubocop/rubocop/pull/14204\">#14204</a>: Fix <code>Layout/EmptyLinesAroundAccessModifier</code> cop error on trailing access modifier. (<a href=\"https://github.com/viralpraxis\"><code>@​viralpraxis</code></a>)</li>\n<li><a href=\"https://redirect.github.com/rubocop/rubocop/pull/14198\">#14198</a>: Fix <code>Lint/DuplicateMethods</code> cop error on <code>to</code> option is dynamically generated and <code>prefix</code> is enabled. (<a href=\"https://github.com/viralpraxis\"><code>@​viralpraxis</code></a>)</li>\n<li><a href=\"https://redirect.github.com/rubocop/rubocop/pull/14199\">#14199</a>: Fix wrong autocorrection for <code>Style/MapToHash</code> with destructuring argument. (<a href=\"https://github.com/lovro-bikic\"><code>@​lovro-bikic</code></a>)</li>\n<li><a href=\"https://redirect.github.com/rubocop/rubocop/issues/14050\">#14050</a>: Modify condition for <code>rubocop:todo</code> EOL comment. (<a href=\"https://github.com/jonas054\"><code>@​jonas054</code></a>)</li>\n</ul>\n</blockquote>\n</details>\n<details>\n<summary>Changelog</summary>\n<p><em>Sourced from <a href=\"https://github.com/rubocop/rubocop/blob/master/CHANGELOG.md\">rubocop's changelog</a>.</em></p>\n<blockquote>\n<h2>1.75.8 (2025-05-28)</h2>\n<h3>Bug fixes</h3>\n<ul>\n<li><a href=\"https://redirect.github.com/rubocop/rubocop/pull/14191\">#14191</a>: Fix <code>Lint/FloatComparison</code> cop to detect floating-point number comparisons in <code>case</code> statements. ([<a href=\"https://github.com/daisuke\"><code>@​daisuke</code></a>][])</li>\n<li><a href=\"https://redirect.github.com/rubocop/rubocop/pull/14209\">#14209</a>: Fix an error for <code>Style/RedundantFormat</code> with invalid format arguments. ([<a href=\"https://github.com/earlopain\"><code>@​earlopain</code></a>][])</li>\n<li><a href=\"https://redirect.github.com/rubocop/rubocop/pull/14200\">#14200</a>: Fix false positives for <code>Style/DefWithParentheses</code> when using endless method definition with empty parentheses and a space before <code>=</code>. ([<a href=\"https://github.com/koic\"><code>@​koic</code></a>][])</li>\n<li><a href=\"https://redirect.github.com/rubocop/rubocop/issues/14197\">#14197</a>: Fix infinite loop error for <code>EnforcedStyle: with_fixed_indentation</code> of <code>Layout/ArgumentAlignment</code> and <code>EnforcedStyle: consistent</code> of <code>Layout/FirstArgumentIndentation</code> and <code>Layout/HashAlignment</code>. ([<a href=\"https://github.com/koic\"><code>@​koic</code></a>][])</li>\n<li><a href=\"https://redirect.github.com/rubocop/rubocop/pull/14204\">#14204</a>: Fix <code>Layout/EmptyLinesAroundAccessModifier</code> cop error on trailing access modifier. ([<a href=\"https://github.com/viralpraxis\"><code>@​viralpraxis</code></a>][])</li>\n<li><a href=\"https://redirect.github.com/rubocop/rubocop/pull/14198\">#14198</a>: Fix <code>Lint/DuplicateMethods</code> cop error on <code>to</code> option is dynamically generated and <code>prefix</code> is enabled. ([<a href=\"https://github.com/viralpraxis\"><code>@​viralpraxis</code></a>][])</li>\n<li><a href=\"https://redirect.github.com/rubocop/rubocop/pull/14199\">#14199</a>: Fix wrong autocorrection for <code>Style/MapToHash</code> with destructuring argument. ([<a href=\"https://github.com/lovro-bikic\"><code>@​lovro-bikic</code></a>][])</li>\n<li><a href=\"https://redirect.github.com/rubocop/rubocop/issues/14050\">#14050</a>: Modify condition for <code>rubocop:todo</code> EOL comment. ([<a href=\"https://github.com/jonas054\"><code>@​jonas054</code></a>][])</li>\n</ul>\n</blockquote>\n</details>\n<details>\n<summary>Commits</summary>\n<ul>\n<li><a href=\"https://github.com/rubocop/rubocop/commit/38333dcec9987d31e4f0d18a1938237cc8aa8c4a\"><code>38333dc</code></a> Cut 1.75.8</li>\n<li><a href=\"https://github.com/rubocop/rubocop/commit/6649f393028c9aa9d4ced7cc5c2bbb4e57f6eaed\"><code>6649f39</code></a> Update Changelog</li>\n<li><a href=\"https://github.com/rubocop/rubocop/commit/cfb07167bf41bb1d3bc80a14cc51ba5dffcb5bc9\"><code>cfb0716</code></a> Fix wrong autocorrection for Style/MapToHash with destructuring argument</li>\n<li><a href=\"https://github.com/rubocop/rubocop/commit/81aab639f3ab34f96854b341541ac3fb8b9af304\"><code>81aab63</code></a> [Fix <a href=\"https://redirect.github.com/rubocop/rubocop/issues/14197\">#14197</a>] Fix infinite loop error for <code>Layout/FirstArgumentIndentation</code></li>\n<li><a href=\"https://github.com/rubocop/rubocop/commit/0258e0bddd0b45410ae088af85e99553542f82b2\"><code>0258e0b</code></a> [Fix <a href=\"https://redirect.github.com/rubocop/rubocop/issues/13194\">#13194</a>] Detect case statement in FloatComparison (<a href=\"https://redirect.github.com/rubocop/rubocop/issues/14191\">#14191</a>)</li>\n<li><a href=\"https://github.com/rubocop/rubocop/commit/fb36825de92c31004f215850aa583c581365f0f4\"><code>fb36825</code></a> Fix an error for <code>Style/RedundantFormat</code> with invalid format arguments</li>\n<li><a href=\"https://github.com/rubocop/rubocop/commit/c72ae6d9f864800e715d10fd57c21e1ff193c2f9\"><code>c72ae6d</code></a> Merge pull request <a href=\"https://redirect.github.com/rubocop/rubocop/issues/14208\">#14208</a> from Earlopain/better-debug-errors</li>\n<li><a href=\"https://github.com/rubocop/rubocop/commit/b3a47ca5f2f84aa862ff108cab56c5af88b8111c\"><code>b3a47ca</code></a> Show better message on error with --debug</li>\n<li><a href=\"https://github.com/rubocop/rubocop/commit/080c90965bb48c781d0d33032a8e74bcc12b227d\"><code>080c909</code></a> [Fix <a href=\"https://redirect.github.com/rubocop/rubocop/issues/14050\">#14050</a>] Modify condition for EOL comment</li>\n<li><a href=\"https://github.com/rubocop/rubocop/commit/cdda4b27d6473f7e519f8baa570102933b115e2c\"><code>cdda4b2</code></a> Merge pull request <a href=\"https://redirect.github.com/rubocop/rubocop/issues/14203\">#14203</a> from viralpraxis/fix-codespell-rake-task-when-not-f...</li>\n<li>Additional commits viewable in <a href=\"https://github.com/rubocop/rubocop/compare/v1.75.7...v1.75.8\">compare view</a></li>\n</ul>\n</details>\n<br />\n\nUpdates `websocket-driver` from 0.7.7 to 0.8.0\n<details>\n<summary>Changelog</summary>\n<p><em>Sourced from <a href=\"https://github.com/faye/websocket-driver-ruby/blob/main/CHANGELOG.md\">websocket-driver's changelog</a>.</em></p>\n<blockquote>\n<h3>0.8.0 / 2025-05-25</h3>\n<ul>\n<li>Emit binary message as a string with <code>Encoding::BINARY</code> instead of an array</li>\n<li>Add the option <code>:binary_data_format</code> to force the previous behaviour</li>\n</ul>\n</blockquote>\n</details>\n<details>\n<summary>Commits</summary>\n<ul>\n<li><a href=\"https://github.com/faye/websocket-driver-ruby/commit/2824edc61bd3b93458b34054e29c313d8493f7db\"><code>2824edc</code></a> Update release date for 0.8.0</li>\n<li><a href=\"https://github.com/faye/websocket-driver-ruby/commit/befd449e009bd106fc2ba1f5689af7e95485800e\"><code>befd449</code></a> Prefer text frames over binary; if the input is in some non-UTF-8 text encodi...</li>\n<li><a href=\"https://github.com/faye/websocket-driver-ruby/commit/e3155f726d2e30b9834bf5d5392d53a9fbfdb4ee\"><code>e3155f7</code></a> Bump version to 0.8.0</li>\n<li><a href=\"https://github.com/faye/websocket-driver-ruby/commit/22e070485cb765865ddbaa1862fc366f31ec2c0e\"><code>22e0704</code></a> Default to text frames if the input buffer is specifically UTF8-encoded</li>\n<li><a href=\"https://github.com/faye/websocket-driver-ruby/commit/64ceaa4f69498254b98df03dc2074dcd0bd331a2\"><code>64ceaa4</code></a> Remove Ruby versions unsupported by GitHub</li>\n<li><a href=\"https://github.com/faye/websocket-driver-ruby/commit/799c0229f227134d2e2f4d9a99bad5375105fa7c\"><code>799c022</code></a> Move the changelog_uri closer to other similar metadata</li>\n<li><a href=\"https://github.com/faye/websocket-driver-ruby/commit/188c1393036b3733c07f88802999e303d181d312\"><code>188c139</code></a> Merge pull request <a href=\"https://redirect.github.com/faye/websocket-driver-ruby/issues/93\">#93</a> from mark-young-atg/provide_changelog_link_on_rubygems</li>\n<li><a href=\"https://github.com/faye/websocket-driver-ruby/commit/61572944fb8acf4f54f520c4816b5505608de0dc\"><code>6157294</code></a> Update the documentation for representation of binary messages</li>\n<li><a href=\"https://github.com/faye/websocket-driver-ruby/commit/370ac9b944d319f7d52894e449ba698bf2dc809a\"><code>370ac9b</code></a> Emit binary frames as binary strings by default, and make Driver.frame() trea...</li>\n<li><a href=\"https://github.com/faye/websocket-driver-ruby/commit/f1c9331b113fc9567308797bf95857ef07026b16\"><code>f1c9331</code></a> Merge pull request <a href=\"https://redirect.github.com/faye/websocket-driver-ruby/issues/95\">#95</a> from mackuba/binary_format</li>\n<li>Additional commits viewable in <a href=\"https://github.com/faye/websocket-driver-ruby/compare/0.7.7...0.8.0\">compare view</a></li>\n</ul>\n</details>\n<br />\n\n\nDependabot will resolve any conflicts with this PR as long as you don't alter it yourself. You can also trigger a rebase manually by commenting `@dependabot rebase`.\n\n[//]: # (dependabot-automerge-start)\n[//]: # (dependabot-automerge-end)\n\n---\n\n<details>\n<summary>Dependabot commands and options</summary>\n<br />\n\nYou can trigger Dependabot actions by commenting on this PR:\n- `@dependabot rebase` will rebase this PR\n- `@dependabot recreate` will recreate this PR, overwriting any edits that have been made to it\n- `@dependabot merge` will merge this PR after your CI passes on it\n- `@dependabot squash and merge` will squash and merge this PR after your CI passes on it\n- `@dependabot cancel merge` will cancel a previously requested merge and block automerging\n- `@dependabot reopen` will reopen this PR if it is closed\n- `@dependabot close` will close this PR and stop Dependabot recreating it. You can achieve the same result by closing it manually\n- `@dependabot show <dependency name> ignore conditions` will show all of the ignore conditions of the specified dependency\n- `@dependabot ignore <dependency name> major version` will close this group update PR and stop Dependabot creating any more for the specific dependency's major version (unless you unignore this specific dependency's major version or upgrade to it yourself)\n- `@dependabot ignore <dependency name> minor version` will close this group update PR and stop Dependabot creating any more for the specific dependency's minor version (unless you unignore this specific dependency's minor version or upgrade to it yourself)\n- `@dependabot ignore <dependency name>` will close this group update PR and stop Dependabot creating any more for the specific dependency (unless you unignore this specific dependency or upgrade to it yourself)\n- `@dependabot unignore <dependency name>` will remove all of the ignore conditions of the specified dependency\n- `@dependabot unignore <dependency name> <ignore condition>` will remove the ignore condition of the specified dependency and ignore conditions\n\n\n</details>",
    "ellipsis_summary": ""
  },
  {
    "pr": 3401,
    "title": "Use released version of Sequel",
    "description": "Features Ubicloud was relying on have now been released.",
    "ellipsis_summary": "Update `Gemfile` to use released version `>= 5.93` of `sequel` gem instead of a specific GitHub commit.\n> \n>   - **Gemfile Update**:\n>     - Change `sequel` gem source from a specific GitHub commit to the released version `>= 5.93`.\n> \n>"
  },
  {
    "pr": 3402,
    "title": "Prep for Postgres UI Revamp",
    "description": "Soon, I'll open a pretty big PR for Postgres UI. I extracted bunch of self-contained commits from that work to make that PR smaller and easier to review.\n\n**Use value of existing ha_type if ha_type is not passed for updates**\nThis used to reset the ha_type to none if it was not passed in the request,\nwhich was not the desired behavior. For updates, we should use the existing\nha_type value if it is not provided in the request.\n\n**Use divs instead of spans in some components**\nThis is bit of a cosmetic change without any functional impact. span elements\nare usually used for simple, inline text styling, while div elements are\ntypically used for block-level elements that can contain other elements. For\nthese components, using divs instead of spans makes more sense as they contain\nmore complex structures and multiple levels of sub-elements.\n\n**Restructure the revealable_content divs for better control over content**\nIn upcoming PG UI changes, we will need to edit the specific parts of the\nrevealable_content divs without impacting the show/hide icons. This commit\nrestructures the divs to allow for more granular control over the content,\nmaking it easier to update connection information without affecting the\nentire content.\n\n**Implement a workaround for the incorrect overflow calculations**\nFor some reason, adding `overflow-wrap: anywhere` style directly to the element\ndoes not trigger layout reflow for handling overflow when the subject is made\nvisible. However, adding the overflow-wrap dynamically makes the browser\nrecalculate the layout and apply the style correctly.\n\n**Use pathname instead of entire URL while deciding on metrics url**\nTarget endpoint for metrics url is now determined by the pathname of the URL\ninstead of the entire URL. This is because the entire URL can contain query\nparameters that are not relevant for the metrics endpoint. Using the entire URL\ngenerates malformed URLs in some cases, such as when the URL contains query\nparameters as well.\n\n**Use grid-template-columns for radio small card**\nPreviously, we used media queries to set the number of columns. However, media\ncolumns are based on entire viewport width. When we start to use more of the\nviewport area, for example with a second sidebar for submenus, the grid\ncolumns will not be correct anymore. We can change the numbers we set in the\ngrid columns to accomodate new remaining space, but that would break the places\nwhere there is no second sidebar.\n\nThe solution is to use grid-template-columns instead of media queries, because\nthey are based on the width of the container.\n\n**Add port and database name to connection string**\nThis is to be more explicit about the information in the connection string.\nWith the addition of pgBouncer, we need to specify the port anyway, which\nleaves only the database name to be optional. For the sake of consistency,\nI decided to include it in the connection string as well.",
    "ellipsis_summary": "Refactor Postgres UI and backend with improved `ha_type` handling, connection strings, and UI component structures.\n> \n>   - **Behavior**:\n>     - Use existing `ha_type` if not provided in update requests in `postgres.rb`.\n>     - Add port and database name to connection strings in `postgres_resource.rb`.\n>     - Determine metrics URL using pathname in `app.js`.\n>   - **UI Components**:\n>     - Replace `span` with `div` in `copyable_content.erb` and `revealable_content.erb` for better structure.\n>     - Use `grid-template-columns` in `radio_small_cards.erb` for responsive design.\n>     - Restructure `revealable_content` for better control over content visibility.\n>   - **CSS and Layout**:\n>     - Implement dynamic `overflow-wrap` to fix layout reflow issues in `app.js`.\n>   - **Tests**:\n>     - Update tests in `postgres_resource_spec.rb` and `pg_dumpall_spec.rb` to reflect connection string changes.\n>     - Modify golden files to include updated connection strings.\n> \n>"
  },
  {
    "pr": 3403,
    "title": "Add alias for long premium runner labels",
    "description": "",
    "ellipsis_summary": "> [!IMPORTANT]\n> Add alias entries for premium runner labels in `config/github_runner_labels.yml` for simplified naming.\n> \n>   - **Aliases**:\n>     - Add alias entries for premium runner labels in `config/github_runner_labels.yml`.\n>     - Aliases `ubicloud-premium-2`, `ubicloud-premium-4`, `ubicloud-premium-8`, `ubicloud-premium-16`, `ubicloud-premium-30` map to `ubicloud-premium-2-ubuntu-2204`, `ubicloud-premium-4-ubuntu-2204`, `ubicloud-premium-8-ubuntu-2204`, `ubicloud-premium-16-ubuntu-2204`, `ubicloud-premium-30-ubuntu-2204` respectively.\n> \n>"
  },
  {
    "pr": 3404,
    "title": "Use cert_store in VictoriaMetrics client",
    "description": "Previously we were relying on the ssl_ca_file api of Excon which seems that it couldn't parse a chain of certs. In order to fix that we will parse the certs and add them all to a cert_store and then pass that to the client which fixes the issue.",
    "ellipsis_summary": "Switch VictoriaMetrics client to use cert_store for SSL certificates, fixing chain parsing issues.\n> \n>   - **Behavior**:\n>     - `VictoriaMetrics::Client` now uses `ssl_ca_data` to create a `cert_store` for SSL certificates instead of `ssl_ca_file`.\n>     - Parses multiple certificates from `ssl_ca_data` and adds them to `cert_store`.\n>     - Updates `Excon` client initialization to use `ssl_cert_store`.\n>   - **Refactoring**:\n>     - Renames `ssl_ca_file_data` to `ssl_ca_data` in `client.rb` and `victoria_metrics_server.rb`.\n>   - **Tests**:\n>     - Updates tests in `client_spec.rb` to check for `ssl_cert_store` instead of `ssl_ca_file`.\n>     - Modifies `victoria_metrics_server_spec.rb` to reflect changes in client initialization.\n> \n>"
  },
  {
    "pr": 3405,
    "title": "Configure hugepages for Postgres",
    "description": "This commit introduces a new label to postgres_server_nexus.rb to configure huge pages, via a rhizome lib+bin.\n\nAt the moment, it uses the default huge page size (2M), and calculates the number of huge pages using `postgres ... -C\nshared_memory_size_in_huge_pages`. Since configuring hugepages needs to restart postgres, its placed in a separate label from `configure`, to allow other configuration changes to go through without restarting postgres.\n\nIn a subsequent change, we can consider adding the boot parameters to setup 1G hugepages for larger instances (possibly standard-30+), where they are most useful.\n\n[1]: https://www.postgresql.org/docs/current/kernel-resources.html#LINUX-HUGE-PAGES",
    "ellipsis_summary": "Adds hugepages configuration for Postgres with a new setup script and class, including tests for the setup logic.\n> \n>   - **Behavior**:\n>     - Adds hugepages configuration to `configure` script in `rhizome/postgres/bin/configure`.\n>     - New script `configure-hugepages` to handle hugepages setup.\n>     - Calculates hugepages based on system memory and Postgres parameters.\n>     - Logs success or failure of hugepages allocation.\n>   - **Classes**:\n>     - New `HugepagesSetup` class in `hugepages_setup.rb` to manage hugepages configuration.\n>     - Methods include `get_postgres_param`, `hugepage_info`, `setup_postgres_hugepages`, and `update_postgres_hugepages_conf`.\n>   - **Tests**:\n>     - Adds `hugepages_setup_spec.rb` to test `HugepagesSetup` class.\n>     - Tests hugepages calculation and setup logic, including edge cases with no hugepages configured.\n> \n>"
  },
  {
    "pr": 3407,
    "title": "Collect VmHost node_exporter metrics and store in VictoriaMetrics",
    "description": "New logic is added to VmHost model to serve metrics config to start collecting node_exporter metrics on the VmHosts.\n\nAlso a new label is added to the VmHost prog to install the right scripts to collect the metrics from the node_exporter in the right directory for bin/monitor to collect",
    "ellipsis_summary": "Add functionality to collect and store VmHost node_exporter metrics in VictoriaMetrics, including configuration and setup for Grafana.\n> \n>   - **Behavior**:\n>     - Add `VmHost` to `metrics_target_resource_types` in `bin/monitor` to collect node_exporter metrics.\n>     - New method `metrics_config` in `VmHost` to define metrics collection configuration.\n>     - New `configure_metrics` label in `host_nexus.rb` to set up metrics collection service and timer.\n>   - **Configuration**:\n>     - Add `monitoring_service_project_id` to `config.rb` for metrics configuration.\n>   - **Setup**:\n>     - New `Prog::SetupGrafana` class and `setup-grafana` script to install and configure Grafana.\n>   - **Testing**:\n>     - Add tests for `metrics_config` in `vm_host_spec.rb`.\n>     - Add tests for `SetupGrafana` in `setup_grafana_spec.rb`.\n>     - Add tests for `configure_metrics` in `host_nexus_spec.rb`.\n> \n>"
  },
  {
    "pr": 3408,
    "title": "Bump the js-dependencies group with 5 updates",
    "description": "Bumps the js-dependencies group with 5 updates:\n\n| Package | From | To |\n| --- | --- | --- |\n| [@babel/runtime](https://github.com/babel/babel/tree/HEAD/packages/babel-runtime) | `7.27.1` | `7.27.4` |\n| [@types/node](https://github.com/DefinitelyTyped/DefinitelyTyped/tree/HEAD/types/node) | `22.15.21` | `22.15.29` |\n| [es-abstract](https://github.com/ljharb/es-abstract) | `1.23.10` | `1.24.0` |\n| [es-aggregate-error](https://github.com/es-shims/AggregateError) | `1.0.13` | `1.0.14` |\n| [protobufjs](https://github.com/protobufjs/protobuf.js) | `7.5.1` | `7.5.3` |\n\nUpdates `@babel/runtime` from 7.27.1 to 7.27.4\n<details>\n<summary>Release notes</summary>\n<p><em>Sourced from <a href=\"https://github.com/babel/babel/releases\"><code>@​babel/runtime</code>'s releases</a>.</em></p>\n<blockquote>\n<h2>v7.27.4 (2025-05-30)</h2>\n<h4>:eyeglasses: Spec Compliance</h4>\n<ul>\n<li><code>babel-parser</code>, <code>babel-plugin-proposal-explicit-resource-management</code>\n<ul>\n<li><a href=\"https://redirect.github.com/babel/babel/pull/17323\">#17323</a> Disallow using in bare case statement (<a href=\"https://github.com/JLHwung\"><code>@​JLHwung</code></a>)</li>\n</ul>\n</li>\n</ul>\n<h4>:nail_care: Polish</h4>\n<ul>\n<li><code>babel-parser</code>\n<ul>\n<li><a href=\"https://redirect.github.com/babel/babel/pull/17311\">#17311</a> Improve parseExpression error messages (<a href=\"https://github.com/JLHwung\"><code>@​JLHwung</code></a>)</li>\n</ul>\n</li>\n</ul>\n<h4>:microscope: Output optimization</h4>\n<ul>\n<li><code>babel-helpers</code>, <code>babel-plugin-transform-async-generator-functions</code>, <code>babel-plugin-transform-async-to-generator</code>, <code>babel-plugin-transform-block-scoping</code>, <code>babel-plugin-transform-classes</code>, <code>babel-plugin-transform-destructuring</code>, <code>babel-plugin-transform-regenerator</code>, <code>babel-plugin-transform-runtime</code>, <code>babel-preset-env</code>, <code>babel-runtime-corejs2</code>, <code>babel-runtime-corejs3</code>, <code>babel-runtime</code>\n<ul>\n<li><a href=\"https://redirect.github.com/babel/babel/pull/17287\">#17287</a> Reduce <code>regenerator</code> size more (<a href=\"https://github.com/liuxingbaoyu\"><code>@​liuxingbaoyu</code></a>)</li>\n</ul>\n</li>\n<li><code>babel-helpers</code>, <code>babel-plugin-transform-async-generator-functions</code>, <code>babel-plugin-transform-async-to-generator</code>, <code>babel-plugin-transform-block-scoping</code>, <code>babel-plugin-transform-classes</code>, <code>babel-plugin-transform-destructuring</code>, <code>babel-plugin-transform-regenerator</code>, <code>babel-plugin-transform-runtime</code>, <code>babel-preset-env</code>, <code>babel-runtime-corejs3</code>\n<ul>\n<li><a href=\"https://redirect.github.com/babel/babel/pull/17334\">#17334</a> Use shorter method names for regenerator context (<a href=\"https://github.com/nicolo-ribaudo\"><code>@​nicolo-ribaudo</code></a>)</li>\n<li><a href=\"https://redirect.github.com/babel/babel/pull/17268\">#17268</a> Reduce <code>regenerator</code> helper size (<a href=\"https://github.com/liuxingbaoyu\"><code>@​liuxingbaoyu</code></a>)</li>\n</ul>\n</li>\n<li><code>babel-core</code>, <code>babel-helpers</code>, <code>babel-plugin-transform-async-generator-functions</code>, <code>babel-plugin-transform-async-to-generator</code>, <code>babel-plugin-transform-block-scoping</code>, <code>babel-plugin-transform-classes</code>, <code>babel-plugin-transform-destructuring</code>, <code>babel-plugin-transform-regenerator</code>, <code>babel-plugin-transform-runtime</code>, <code>babel-preset-env</code>, <code>babel-runtime-corejs2</code>, <code>babel-runtime-corejs3</code>, <code>babel-runtime</code>, <code>babel-standalone</code>\n<ul>\n<li><a href=\"https://redirect.github.com/babel/babel/pull/17238\">#17238</a> Split <code>regeneratorRuntime</code> into multiple helpers (<a href=\"https://github.com/nicolo-ribaudo\"><code>@​nicolo-ribaudo</code></a>)</li>\n</ul>\n</li>\n</ul>\n<h4>Committers: 4</h4>\n<ul>\n<li>Babel Bot (<a href=\"https://github.com/babel-bot\"><code>@​babel-bot</code></a>)</li>\n<li>Huáng Jùnliàng (<a href=\"https://github.com/JLHwung\"><code>@​JLHwung</code></a>)</li>\n<li>Nicolò Ribaudo (<a href=\"https://github.com/nicolo-ribaudo\"><code>@​nicolo-ribaudo</code></a>)</li>\n<li><a href=\"https://github.com/liuxingbaoyu\"><code>@​liuxingbaoyu</code></a></li>\n</ul>\n<h2>v7.27.3 (2025-05-27)</h2>\n<h4>:bug: Bug Fix</h4>\n<ul>\n<li><code>babel-generator</code>\n<ul>\n<li><a href=\"https://redirect.github.com/babel/babel/pull/17324\">#17324</a> Improve multiline comments handling in yield/await expression (<a href=\"https://github.com/JLHwung\"><code>@​JLHwung</code></a>)</li>\n</ul>\n</li>\n<li><code>babel-helpers</code>, <code>babel-plugin-transform-async-generator-functions</code>, <code>babel-plugin-transform-regenerator</code>, <code>babel-preset-env</code>, <code>babel-runtime-corejs3</code>\n<ul>\n<li><a href=\"https://redirect.github.com/babel/babel/pull/17328\">#17328</a> Correctly set <code>.displayName</code> on <code>GeneratorFunction</code> (<a href=\"https://github.com/nicolo-ribaudo\"><code>@​nicolo-ribaudo</code></a>)</li>\n</ul>\n</li>\n<li><code>babel-plugin-proposal-explicit-resource-management</code>\n<ul>\n<li><a href=\"https://redirect.github.com/babel/babel/pull/17319\">#17319</a> fix: handle shadowed binding in <code>for using of</code> body (<a href=\"https://github.com/JLHwung\"><code>@​JLHwung</code></a>)</li>\n<li><a href=\"https://redirect.github.com/babel/babel/pull/17317\">#17317</a> fix: support named evaluation for using declaration (<a href=\"https://github.com/JLHwung\"><code>@​JLHwung</code></a>)</li>\n</ul>\n</li>\n<li><code>babel-plugin-proposal-decorators</code>, <code>babel-types</code>\n<ul>\n<li><a href=\"https://redirect.github.com/babel/babel/pull/17321\">#17321</a> fix(converter): Remove <code>abstract</code> modifiers in class declaration to expression conversion (<a href=\"https://github.com/magic-akari\"><code>@​magic-akari</code></a>)</li>\n</ul>\n</li>\n<li><code>babel-helper-module-transforms</code>, <code>babel-plugin-proposal-explicit-resource-management</code>, <code>babel-plugin-transform-modules-amd</code>, <code>babel-plugin-transform-modules-commonjs</code>, <code>babel-plugin-transform-modules-umd</code>\n<ul>\n<li><a href=\"https://redirect.github.com/babel/babel/pull/17257\">#17257</a> Preserve class id when transforming using declarations with exported class (<a href=\"https://github.com/JLHwung\"><code>@​JLHwung</code></a>)</li>\n</ul>\n</li>\n<li><code>babel-parser</code>\n<ul>\n<li><a href=\"https://redirect.github.com/babel/babel/pull/17312\">#17312</a> fix(parser): properly handle optional markers in generator class methods (<a href=\"https://github.com/magic-akari\"><code>@​magic-akari</code></a>)</li>\n<li><a href=\"https://redirect.github.com/babel/babel/pull/17307\">#17307</a> fix(parser): Terminate modifier parsing at newline (<a href=\"https://github.com/magic-akari\"><code>@​magic-akari</code></a>)</li>\n</ul>\n</li>\n<li><code>babel-generator</code>, <code>babel-parser</code>\n<ul>\n<li><a href=\"https://redirect.github.com/babel/babel/pull/17308\">#17308</a> Improve import phase parsing (<a href=\"https://github.com/JLHwung\"><code>@​JLHwung</code></a>)</li>\n</ul>\n</li>\n</ul>\n<h4>Committers: 7</h4>\n<ul>\n<li>Babel Bot (<a href=\"https://github.com/babel-bot\"><code>@​babel-bot</code></a>)</li>\n<li>Huáng Jùnliàng (<a href=\"https://github.com/JLHwung\"><code>@​JLHwung</code></a>)</li>\n<li>Nicolò Ribaudo (<a href=\"https://github.com/nicolo-ribaudo\"><code>@​nicolo-ribaudo</code></a>)</li>\n<li>Vik R (<a href=\"https://github.com/vikr01\"><code>@​vikr01</code></a>)</li>\n</ul>\n<!-- raw HTML omitted -->\n</blockquote>\n<p>... (truncated)</p>\n</details>\n<details>\n<summary>Changelog</summary>\n<p><em>Sourced from <a href=\"https://github.com/babel/babel/blob/main/CHANGELOG.md\"><code>@​babel/runtime</code>'s changelog</a>.</em></p>\n<blockquote>\n<h2>v7.27.4 (2025-05-30)</h2>\n<h4>:eyeglasses: Spec Compliance</h4>\n<ul>\n<li><code>babel-parser</code>, <code>babel-plugin-proposal-explicit-resource-management</code>\n<ul>\n<li><a href=\"https://redirect.github.com/babel/babel/pull/17323\">#17323</a> Disallow using in bare case statement (<a href=\"https://github.com/JLHwung\"><code>@​JLHwung</code></a>)</li>\n</ul>\n</li>\n</ul>\n<h4>:nail_care: Polish</h4>\n<ul>\n<li><code>babel-parser</code>\n<ul>\n<li><a href=\"https://redirect.github.com/babel/babel/pull/17311\">#17311</a> Improve parseExpression error messages (<a href=\"https://github.com/JLHwung\"><code>@​JLHwung</code></a>)</li>\n</ul>\n</li>\n</ul>\n<h4>:microscope: Output optimization</h4>\n<ul>\n<li><code>babel-helpers</code>, <code>babel-plugin-transform-async-generator-functions</code>, <code>babel-plugin-transform-async-to-generator</code>, <code>babel-plugin-transform-block-scoping</code>, <code>babel-plugin-transform-classes</code>, <code>babel-plugin-transform-destructuring</code>, <code>babel-plugin-transform-regenerator</code>, <code>babel-plugin-transform-runtime</code>, <code>babel-preset-env</code>, <code>babel-runtime-corejs2</code>, <code>babel-runtime-corejs3</code>, <code>babel-runtime</code>\n<ul>\n<li><a href=\"https://redirect.github.com/babel/babel/pull/17287\">#17287</a> Reduce <code>regenerator</code> size more (<a href=\"https://github.com/liuxingbaoyu\"><code>@​liuxingbaoyu</code></a>)</li>\n</ul>\n</li>\n<li><code>babel-helpers</code>, <code>babel-plugin-transform-async-generator-functions</code>, <code>babel-plugin-transform-async-to-generator</code>, <code>babel-plugin-transform-block-scoping</code>, <code>babel-plugin-transform-classes</code>, <code>babel-plugin-transform-destructuring</code>, <code>babel-plugin-transform-regenerator</code>, <code>babel-plugin-transform-runtime</code>, <code>babel-preset-env</code>, <code>babel-runtime-corejs3</code>\n<ul>\n<li><a href=\"https://redirect.github.com/babel/babel/pull/17334\">#17334</a> Use shorter method names for regenerator context (<a href=\"https://github.com/nicolo-ribaudo\"><code>@​nicolo-ribaudo</code></a>)</li>\n<li><a href=\"https://redirect.github.com/babel/babel/pull/17268\">#17268</a> Reduce <code>regenerator</code> helper size (<a href=\"https://github.com/liuxingbaoyu\"><code>@​liuxingbaoyu</code></a>)</li>\n</ul>\n</li>\n<li><code>babel-core</code>, <code>babel-helpers</code>, <code>babel-plugin-transform-async-generator-functions</code>, <code>babel-plugin-transform-async-to-generator</code>, <code>babel-plugin-transform-block-scoping</code>, <code>babel-plugin-transform-classes</code>, <code>babel-plugin-transform-destructuring</code>, <code>babel-plugin-transform-regenerator</code>, <code>babel-plugin-transform-runtime</code>, <code>babel-preset-env</code>, <code>babel-runtime-corejs2</code>, <code>babel-runtime-corejs3</code>, <code>babel-runtime</code>, <code>babel-standalone</code>\n<ul>\n<li><a href=\"https://redirect.github.com/babel/babel/pull/17238\">#17238</a> Split <code>regeneratorRuntime</code> into multiple helpers (<a href=\"https://github.com/nicolo-ribaudo\"><code>@​nicolo-ribaudo</code></a>)</li>\n</ul>\n</li>\n</ul>\n<h2>v7.27.3 (2025-05-27)</h2>\n<h4>:bug: Bug Fix</h4>\n<ul>\n<li><code>babel-generator</code>\n<ul>\n<li><a href=\"https://redirect.github.com/babel/babel/pull/17324\">#17324</a> Improve multiline comments handling in yield/await expression (<a href=\"https://github.com/JLHwung\"><code>@​JLHwung</code></a>)</li>\n</ul>\n</li>\n<li><code>babel-helpers</code>, <code>babel-plugin-transform-async-generator-functions</code>, <code>babel-plugin-transform-regenerator</code>, <code>babel-preset-env</code>, <code>babel-runtime-corejs3</code>\n<ul>\n<li><a href=\"https://redirect.github.com/babel/babel/pull/17328\">#17328</a> Correctly set <code>.displayName</code> on <code>GeneratorFunction</code> (<a href=\"https://github.com/nicolo-ribaudo\"><code>@​nicolo-ribaudo</code></a>)</li>\n</ul>\n</li>\n<li><code>babel-plugin-proposal-explicit-resource-management</code>\n<ul>\n<li><a href=\"https://redirect.github.com/babel/babel/pull/17319\">#17319</a> fix: handle shadowed binding in <code>for using of</code> body (<a href=\"https://github.com/JLHwung\"><code>@​JLHwung</code></a>)</li>\n<li><a href=\"https://redirect.github.com/babel/babel/pull/17317\">#17317</a> fix: support named evaluation for using declaration (<a href=\"https://github.com/JLHwung\"><code>@​JLHwung</code></a>)</li>\n</ul>\n</li>\n<li><code>babel-plugin-proposal-decorators</code>, <code>babel-types</code>\n<ul>\n<li><a href=\"https://redirect.github.com/babel/babel/pull/17321\">#17321</a> fix(converter): Remove <code>abstract</code> modifiers in class declaration to expression conversion (<a href=\"https://github.com/magic-akari\"><code>@​magic-akari</code></a>)</li>\n</ul>\n</li>\n<li><code>babel-helper-module-transforms</code>, <code>babel-plugin-proposal-explicit-resource-management</code>, <code>babel-plugin-transform-modules-amd</code>, <code>babel-plugin-transform-modules-commonjs</code>, <code>babel-plugin-transform-modules-umd</code>\n<ul>\n<li><a href=\"https://redirect.github.com/babel/babel/pull/17257\">#17257</a> Preserve class id when transforming using declarations with exported class (<a href=\"https://github.com/JLHwung\"><code>@​JLHwung</code></a>)</li>\n</ul>\n</li>\n<li><code>babel-parser</code>\n<ul>\n<li><a href=\"https://redirect.github.com/babel/babel/pull/17312\">#17312</a> fix(parser): properly handle optional markers in generator class methods (<a href=\"https://github.com/magic-akari\"><code>@​magic-akari</code></a>)</li>\n<li><a href=\"https://redirect.github.com/babel/babel/pull/17307\">#17307</a> fix(parser): Terminate modifier parsing at newline (<a href=\"https://github.com/magic-akari\"><code>@​magic-akari</code></a>)</li>\n</ul>\n</li>\n<li><code>babel-generator</code>, <code>babel-parser</code>\n<ul>\n<li><a href=\"https://redirect.github.com/babel/babel/pull/17308\">#17308</a> Improve import phase parsing (<a href=\"https://github.com/JLHwung\"><code>@​JLHwung</code></a>)</li>\n</ul>\n</li>\n</ul>\n<h2>v7.27.2 (2025-05-06)</h2>\n<h4>:bug: Bug Fix</h4>\n<ul>\n<li><code>babel-parser</code>\n<ul>\n<li><a href=\"https://redirect.github.com/babel/babel/pull/17289\">#17289</a> fix: <code>@babel/parser/bin/index.js</code> contains <code>node:</code> protocol require (<a href=\"https://github.com/liuxingbaoyu\"><code>@​liuxingbaoyu</code></a>)</li>\n<li><a href=\"https://redirect.github.com/babel/babel/pull/17291\">#17291</a> fix: Private class method not found when TS and estree (<a href=\"https://github.com/liuxingbaoyu\"><code>@​liuxingbaoyu</code></a>)</li>\n</ul>\n</li>\n<li><code>babel-plugin-transform-object-rest-spread</code>\n<ul>\n<li><a href=\"https://redirect.github.com/babel/babel/pull/17281\">#17281</a> Fix: improve object rest handling in array pattern (<a href=\"https://github.com/JLHwung\"><code>@​JLHwung</code></a>)</li>\n</ul>\n</li>\n<li><code>babel-plugin-transform-modules-commonjs</code>, <code>babel-template</code>\n<ul>\n<li><a href=\"https://redirect.github.com/babel/babel/pull/17284\">#17284</a> fix(babel-template): Properly handle empty string replacements (<a href=\"https://github.com/magic-akari\"><code>@​magic-akari</code></a>)</li>\n</ul>\n</li>\n</ul>\n<h4>:running_woman: Performance</h4>\n<ul>\n<li><code>babel-cli</code></li>\n</ul>\n<!-- raw HTML omitted -->\n</blockquote>\n<p>... (truncated)</p>\n</details>\n<details>\n<summary>Commits</summary>\n<ul>\n<li><a href=\"https://github.com/babel/babel/commit/7d069309fdfcedda2928a043f6f7c98135c1242a\"><code>7d06930</code></a> v7.27.4</li>\n<li><a href=\"https://github.com/babel/babel/commit/5b9468d9bf1ab4f427241673e9f03593da115a69\"><code>5b9468d</code></a> Reduce <code>regenerator</code> size more (<a href=\"https://github.com/babel/babel/tree/HEAD/packages/babel-runtime/issues/17287\">#17287</a>)</li>\n<li><a href=\"https://github.com/babel/babel/commit/cb78b5b50e327e27467086cf8bbe196bda7cea9b\"><code>cb78b5b</code></a> [babel 8] Do not replace global <code>regeneratorRuntime</code> references in regenerato...</li>\n<li><a href=\"https://github.com/babel/babel/commit/a0690e39ea63cdcc3d9282ece739e6677c83ad6e\"><code>a0690e3</code></a> Split <code>regeneratorRuntime</code> into multiple helpers (<a href=\"https://github.com/babel/babel/tree/HEAD/packages/babel-runtime/issues/17238\">#17238</a>)</li>\n<li><a href=\"https://github.com/babel/babel/commit/da5e371efabf6c0baab1ec2c888da189e1b610ad\"><code>da5e371</code></a> v7.27.3</li>\n<li>See full diff in <a href=\"https://github.com/babel/babel/commits/v7.27.4/packages/babel-runtime\">compare view</a></li>\n</ul>\n</details>\n<br />\n\nUpdates `@types/node` from 22.15.21 to 22.15.29\n<details>\n<summary>Commits</summary>\n<ul>\n<li>See full diff in <a href=\"https://github.com/DefinitelyTyped/DefinitelyTyped/commits/HEAD/types/node\">compare view</a></li>\n</ul>\n</details>\n<br />\n\nUpdates `es-abstract` from 1.23.10 to 1.24.0\n<details>\n<summary>Changelog</summary>\n<p><em>Sourced from <a href=\"https://github.com/ljharb/es-abstract/blob/main/CHANGELOG.md\">es-abstract's changelog</a>.</em></p>\n<blockquote>\n<h1>1.24.0 / 2025-05-28</h1>\n<ul>\n<li>[New] add <code>ES2025</code> (<a href=\"https://redirect.github.com/ljharb/es-abstract/issues/159\">#159</a>)</li>\n<li>[New] <code>ES2023</code>+: add <code>GetNamedTimeZoneEpochNanoseconds</code>, <code>GetUTCEpochNanoseconds</code>, <code>IsTimeZoneOffsetString</code></li>\n<li>[New] <code>ES2015</code>+: <code>CharacterRange</code>: also accept CharSets</li>\n<li>[New] <code>ES2024</code>+: add <code>AllCharacters</code>, <code>CharacterComplement</code></li>\n<li>[Refactor] StringIndexOf: anticipate ES2025 not found sentinel change</li>\n<li>[Deps] update <code>stop-iteration-iterator</code></li>\n<li>[Tests] increase coverage</li>\n</ul>\n</blockquote>\n</details>\n<details>\n<summary>Commits</summary>\n<ul>\n<li><a href=\"https://github.com/ljharb/es-abstract/commit/ba4a616318c6a9854d17f771dcae718d90b8939e\"><code>ba4a616</code></a> v1.24.0</li>\n<li><a href=\"https://github.com/ljharb/es-abstract/commit/345e80ebe967c7879285e4a965814041fd86beca\"><code>345e80e</code></a> [Deps] update <code>stop-iteration-iterator</code></li>\n<li><a href=\"https://github.com/ljharb/es-abstract/commit/846d5136c5e9cda138e1ffea6b1d872fd04fab92\"><code>846d513</code></a> [New] add <code>ES2025</code></li>\n<li><a href=\"https://github.com/ljharb/es-abstract/commit/bfb7f5fe4e3468551f46e5f917959b925e113d50\"><code>bfb7f5f</code></a> [New] <code>ES2023</code>+: add <code>GetNamedTimeZoneEpochNanoseconds</code>, `GetUTCEpochNanoseco...</li>\n<li><a href=\"https://github.com/ljharb/es-abstract/commit/0dd6831a03920616f0b8b8514adea3ef946bd0df\"><code>0dd6831</code></a> [New] <code>ES2015</code>+: <code>CharacterRange</code>: also accept CharSets</li>\n<li><a href=\"https://github.com/ljharb/es-abstract/commit/a43970426a7833f3124e3e5ebfd9af9a32af38f9\"><code>a439704</code></a> [New] <code>ES2024</code>+: add <code>AllCharacters</code>, <code>CharacterComplement</code></li>\n<li><a href=\"https://github.com/ljharb/es-abstract/commit/6fdcc2e6002f70e060b9441588671283e41983f9\"><code>6fdcc2e</code></a> [Refactor] StringIndexOf: anticipate ES2025 not found sentinel change</li>\n<li><a href=\"https://github.com/ljharb/es-abstract/commit/80af1746b2654a9e001bc1daf270f5274b595dcf\"><code>80af174</code></a> [Tests] increase coverage</li>\n<li>See full diff in <a href=\"https://github.com/ljharb/es-abstract/compare/v1.23.10...v1.24.0\">compare view</a></li>\n</ul>\n</details>\n<br />\n\nUpdates `es-aggregate-error` from 1.0.13 to 1.0.14\n<details>\n<summary>Changelog</summary>\n<p><em>Sourced from <a href=\"https://github.com/es-shims/AggregateError/blob/main/CHANGELOG.md\">es-aggregate-error's changelog</a>.</em></p>\n<blockquote>\n<h2><a href=\"https://github.com/es-shims/AggregateError/compare/v1.0.13...v1.0.14\">v1.0.14</a> - 2025-06-01</h2>\n<h3>Commits</h3>\n<ul>\n<li>[Deps] update <code>es-abstract</code>, <code>globalthis</code> <a href=\"https://github.com/es-shims/AggregateError/commit/ddcdc9dbf94196870db314cb2acbe80098035ecf\"><code>ddcdc9d</code></a></li>\n<li>[Dev Deps] update <code>@es-shims/api</code>, <code>@ljharb/eslint-config</code>, <code>auto-changelog</code>, <code>for-each</code>, <code>object-inspect</code>, <code>tape</code> <a href=\"https://github.com/es-shims/AggregateError/commit/f760355314b4a80b8135a04ac51d557683faa441\"><code>f760355</code></a></li>\n<li>[Tests] replace <code>aud</code> with <code>npm audit</code> <a href=\"https://github.com/es-shims/AggregateError/commit/8497f425c13a343c84b7be39f1ae1b7bce99c497\"><code>8497f42</code></a></li>\n<li>[Dev Deps] add missing peer dep <a href=\"https://github.com/es-shims/AggregateError/commit/657a7ade36e5e47af7c2ccdb685505cb54e0e45f\"><code>657a7ad</code></a></li>\n</ul>\n</blockquote>\n</details>\n<details>\n<summary>Commits</summary>\n<ul>\n<li><a href=\"https://github.com/es-shims/AggregateError/commit/00bde5ba4e32f3be7d29730b80f44086f97c6044\"><code>00bde5b</code></a> v1.0.14</li>\n<li><a href=\"https://github.com/es-shims/AggregateError/commit/ddcdc9dbf94196870db314cb2acbe80098035ecf\"><code>ddcdc9d</code></a> [Deps] update <code>es-abstract</code>, <code>globalthis</code></li>\n<li><a href=\"https://github.com/es-shims/AggregateError/commit/657a7ade36e5e47af7c2ccdb685505cb54e0e45f\"><code>657a7ad</code></a> [Dev Deps] add missing peer dep</li>\n<li><a href=\"https://github.com/es-shims/AggregateError/commit/f760355314b4a80b8135a04ac51d557683faa441\"><code>f760355</code></a> [Dev Deps] update <code>@es-shims/api</code>, <code>@ljharb/eslint-config</code>, <code>auto-changelog</code>,...</li>\n<li><a href=\"https://github.com/es-shims/AggregateError/commit/8497f425c13a343c84b7be39f1ae1b7bce99c497\"><code>8497f42</code></a> [Tests] replace <code>aud</code> with <code>npm audit</code></li>\n<li>See full diff in <a href=\"https://github.com/es-shims/AggregateError/compare/v1.0.13...v1.0.14\">compare view</a></li>\n</ul>\n</details>\n<br />\n\nUpdates `protobufjs` from 7.5.1 to 7.5.3\n<details>\n<summary>Release notes</summary>\n<p><em>Sourced from <a href=\"https://github.com/protobufjs/protobuf.js/releases\">protobufjs's releases</a>.</em></p>\n<blockquote>\n<h2>protobufjs: v7.5.3</h2>\n<h2><a href=\"https://github.com/protobufjs/protobuf.js/compare/protobufjs-v7.5.2...protobufjs-v7.5.3\">7.5.3</a> (2025-05-28)</h2>\n<h3>Bug Fixes</h3>\n<ul>\n<li>descriptor extensions handling post-editions (<a href=\"https://redirect.github.com/protobufjs/protobuf.js/issues/2075\">#2075</a>) (<a href=\"https://github.com/protobufjs/protobuf.js/commit/6e255d4ad6982cc857f26e1731c2cedcf5796f68\">6e255d4</a>)</li>\n</ul>\n<h2>protobufjs: v7.5.2</h2>\n<h2><a href=\"https://github.com/protobufjs/protobuf.js/compare/protobufjs-v7.5.1...protobufjs-v7.5.2\">7.5.2</a> (2025-05-14)</h2>\n<h3>Bug Fixes</h3>\n<ul>\n<li>ensure that types are always resolved (<a href=\"https://redirect.github.com/protobufjs/protobuf.js/issues/2068\">#2068</a>) (<a href=\"https://github.com/protobufjs/protobuf.js/commit/4b51cb2b8450b77f9f5de1c562e7fae93b19d040\">4b51cb2</a>)</li>\n</ul>\n</blockquote>\n</details>\n<details>\n<summary>Changelog</summary>\n<p><em>Sourced from <a href=\"https://github.com/protobufjs/protobuf.js/blob/master/CHANGELOG.md\">protobufjs's changelog</a>.</em></p>\n<blockquote>\n<h2><a href=\"https://github.com/protobufjs/protobuf.js/compare/protobufjs-v7.5.2...protobufjs-v7.5.3\">7.5.3</a> (2025-05-28)</h2>\n<h3>Bug Fixes</h3>\n<ul>\n<li>descriptor extensions handling post-editions (<a href=\"https://redirect.github.com/protobufjs/protobuf.js/issues/2075\">#2075</a>) (<a href=\"https://github.com/protobufjs/protobuf.js/commit/6e255d4ad6982cc857f26e1731c2cedcf5796f68\">6e255d4</a>)</li>\n</ul>\n<h2><a href=\"https://github.com/protobufjs/protobuf.js/compare/protobufjs-v7.5.1...protobufjs-v7.5.2\">7.5.2</a> (2025-05-14)</h2>\n<h3>Bug Fixes</h3>\n<ul>\n<li>ensure that types are always resolved (<a href=\"https://redirect.github.com/protobufjs/protobuf.js/issues/2068\">#2068</a>) (<a href=\"https://github.com/protobufjs/protobuf.js/commit/4b51cb2b8450b77f9f5de1c562e7fae93b19d040\">4b51cb2</a>)</li>\n</ul>\n</blockquote>\n</details>\n<details>\n<summary>Commits</summary>\n<ul>\n<li><a href=\"https://github.com/protobufjs/protobuf.js/commit/f42297b29d15c8e0382744a83f5147a1aa978f42\"><code>f42297b</code></a> chore: release master (<a href=\"https://redirect.github.com/protobufjs/protobuf.js/issues/2076\">#2076</a>)</li>\n<li><a href=\"https://github.com/protobufjs/protobuf.js/commit/6e255d4ad6982cc857f26e1731c2cedcf5796f68\"><code>6e255d4</code></a> fix: descriptor extensions handling post-editions (<a href=\"https://redirect.github.com/protobufjs/protobuf.js/issues/2075\">#2075</a>)</li>\n<li><a href=\"https://github.com/protobufjs/protobuf.js/commit/9467abe5af0aa5de3e4cf26b9e1a85c97f5eebd0\"><code>9467abe</code></a> chore: release master (<a href=\"https://redirect.github.com/protobufjs/protobuf.js/issues/2070\">#2070</a>)</li>\n<li><a href=\"https://github.com/protobufjs/protobuf.js/commit/4b51cb2b8450b77f9f5de1c562e7fae93b19d040\"><code>4b51cb2</code></a> fix: ensure that types are always resolved (<a href=\"https://redirect.github.com/protobufjs/protobuf.js/issues/2068\">#2068</a>)</li>\n<li>See full diff in <a href=\"https://github.com/protobufjs/protobuf.js/compare/protobufjs-v7.5.1...protobufjs-v7.5.3\">compare view</a></li>\n</ul>\n</details>\n<br />\n\n\nDependabot will resolve any conflicts with this PR as long as you don't alter it yourself. You can also trigger a rebase manually by commenting `@dependabot rebase`.\n\n[//]: # (dependabot-automerge-start)\n[//]: # (dependabot-automerge-end)\n\n---\n\n<details>\n<summary>Dependabot commands and options</summary>\n<br />\n\nYou can trigger Dependabot actions by commenting on this PR:\n- `@dependabot rebase` will rebase this PR\n- `@dependabot recreate` will recreate this PR, overwriting any edits that have been made to it\n- `@dependabot merge` will merge this PR after your CI passes on it\n- `@dependabot squash and merge` will squash and merge this PR after your CI passes on it\n- `@dependabot cancel merge` will cancel a previously requested merge and block automerging\n- `@dependabot reopen` will reopen this PR if it is closed\n- `@dependabot close` will close this PR and stop Dependabot recreating it. You can achieve the same result by closing it manually\n- `@dependabot show <dependency name> ignore conditions` will show all of the ignore conditions of the specified dependency\n- `@dependabot ignore <dependency name> major version` will close this group update PR and stop Dependabot creating any more for the specific dependency's major version (unless you unignore this specific dependency's major version or upgrade to it yourself)\n- `@dependabot ignore <dependency name> minor version` will close this group update PR and stop Dependabot creating any more for the specific dependency's minor version (unless you unignore this specific dependency's minor version or upgrade to it yourself)\n- `@dependabot ignore <dependency name>` will close this group update PR and stop Dependabot creating any more for the specific dependency (unless you unignore this specific dependency or upgrade to it yourself)\n- `@dependabot unignore <dependency name>` will remove all of the ignore conditions of the specified dependency\n- `@dependabot unignore <dependency name> <ignore condition>` will remove the ignore condition of the specified dependency and ignore conditions\n\n\n</details>",
    "ellipsis_summary": ""
  },
  {
    "pr": 3409,
    "title": "Replace revealable content logic with CSS",
    "description": "It's better to maintain less JS.\n\nAdding break-all to content results same with adding overflow-wrap via JS. @byucesoy, can you confirm that it's working for you?",
    "ellipsis_summary": "Replaces JavaScript logic with CSS for toggling revealable content visibility and text wrapping.\n> \n>   - **Behavior**:\n>     - Replaces JavaScript logic for toggling visibility of `.revealable-content` with CSS classes in `app.js`.\n>     - Uses CSS `break-all` for text wrapping in `revealable_content.erb`.\n>   - **JavaScript**:\n>     - Removes `.reveal-button` and `.hide-button` click handlers in `app.js`.\n>     - Adds `.revealable-button` click handler to toggle `active` class on `.revealable-content`.\n>   - **CSS**:\n>     - Adds `group-[.active]:hidden` and `group-[.active]:block` to toggle visibility in `revealable_content.erb`.\n>     - Uses `break-all` for text wrapping in `.revealed-content`.\n> \n>"
  },
  {
    "pr": 3410,
    "title": "Fix postgres metrics reconfiguration on metric destination update",
    "description": "Remove unused semaphore and fix updates to metric-destination.",
    "ellipsis_summary": "Remove unused semaphore and update metric destination configuration in `postgres_server.rb` and `postgres.rb`.\n> \n>   - **Semaphore Removal**:\n>     - Remove `configure_prometheus` semaphore from `PostgresServer` in `postgres_server.rb`.\n>   - **Metric Destination Update**:\n>     - Change `incr_configure_prometheus` to `incr_configure_metrics` in `routes/project/location/postgres.rb` for metric destination creation and deletion.\n> \n>"
  },
  {
    "pr": 3411,
    "title": "Use cert_store in MinioClient",
    "description": "Previously we were relying on the ssl_ca_file api of Excon which seems that it couldn't parse a chain of certs. In order to fix that we will parse the certs and add them all to a cert_store and then pass that to the client which fixes the issue.",
    "ellipsis_summary": "Switch `Minio::Client` to use a certificate store for handling multiple certificates, updating initialization and tests accordingly.\n> \n>   - **Behavior**:\n>     - `Minio::Client` now uses `ssl_cert_store` instead of `ssl_ca_file` in `client.rb`.\n>     - Parses `ssl_ca_data` to add multiple certificates to `OpenSSL::X509::Store`.\n>   - **Parameters**:\n>     - Renames `ssl_ca_file_data` to `ssl_ca_data` in `client.rb`, `minio_server.rb`, `postgres_timeline.rb`, `download_boot_image.rb`, and `postgres_timeline_nexus.rb`.\n>   - **Tests**:\n>     - Updates `client_spec.rb` to test `ssl_cert_store` usage.\n>     - Updates `minio_server_spec.rb`, `postgres_timeline_spec.rb`, and `postgres_timeline_nexus_spec.rb` to reflect parameter rename and new behavior.\n> \n>"
  },
  {
    "pr": 3412,
    "title": "Don't try to update dns when order doesn't exist at CertNexus",
    "description": "",
    "ellipsis_summary": "> [!IMPORTANT]\n> Add safe navigation to handle `nil` `acme_order` in `dns_challenge` and update tests accordingly.\n> \n>   - **Behavior**:\n>     - Use safe navigation (`&.`) in `dns_challenge` method in `cert_nexus.rb` to handle `nil` `acme_order`.\n>     - In `cert_nexus_spec.rb`, add test to ensure DNS record deletion is skipped if `acme_order` is `nil`.\n>   - **Tests**:\n>     - Add test case in `cert_nexus_spec.rb` to verify behavior when `acme_order` is `nil` during `destroy` method execution.\n> \n>"
  },
  {
    "pr": 3414,
    "title": "Deprecate 2004 runner images",
    "description": "",
    "ellipsis_summary": "> [!IMPORTANT]\n> Deprecate 2004 runner images by removing references from configuration and workflow files.\n> \n>   - **Deprecation**:\n>     - Remove `github_runner_ubuntu_2004` from `.github/workflows/e2e.yml` default test cases.\n>     - Remove `github_ubuntu_2004_version` override from `config.rb`.\n>     - Delete `github_runner_ubuntu_2004` entry from `config/e2e_test_cases.yml`.\n>     - Remove `ubicloud-standard-*` and `ubicloud-standard-*arm` entries for `ubuntu-2004` from `config/github_runner_labels.yml`.\n>     - Delete SHA256 entries for `github-ubuntu-2004` in `prog/download_boot_image.rb`.\n> \n>"
  },
  {
    "pr": 3415,
    "title": "Fix the `stripe_data` helper for the payment method",
    "description": "It returns a `Stripe::StripeObject`, which doesn’t have all the methods\nfrom a hash.\n\nIt fails in production with the following exception:\n\n    NoMethodError: undefined method 'slice' for #<Stripe::StripeObject:0x00007f9c27e9b4a0> (NoMethodError)\n\n`to_h` returns a hash, but the keys are symbols, not strings. Since we\nuse string keys in the codebase, it's better to convert them before\nslicing.",
    "ellipsis_summary": "Fix `stripe_data` in `PaymentMethod` to convert `Stripe::StripeObject` to hash with string keys before slicing.\n> \n>   - **Bug Fix**:\n>     - Fix `stripe_data` method in `PaymentMethod` class to handle `Stripe::StripeObject` correctly.\n>     - Convert `Stripe::StripeObject` to hash with string keys using `to_h.transform_keys!(&:to_s)` before slicing.\n>     - Prevents `NoMethodError` when calling `slice` on `Stripe::StripeObject`.\n> \n>"
  },
  {
    "pr": 3416,
    "title": "Add grafana installation strand",
    "description": "This strand will try to install grafana on the provided subject id. The strand won't create the vm or add the DNS records but takes care of all the remaining logics which must be run inside the vm like installing the nginx, certbot, getting the certificate and installing the grafana.\n\nThe API looks like this:\n\nvm = Prog::Vm::Nexus.assemble_with_sshable(project_id,\n  sshable_unix_user: \"ubi\", name: \"grafana-0\", enable_ip4: true).subject\n\nAt this step create an A record, resolving your domain to the vm ip.\n\nStrand.create(prog: \"SetupGrafana\", label: \"start\", stack:\n  [{subject_id: vm.id, domain: \"grafana.domain.com\",\n  cert_email: \"youremail@gmail.com\"}])\n\nYou can then read the password of the grafana using this command: vm.sshable.cmd(\"sudo cat /etc/grafana/grafana.ini | grep admin_password\")",
    "ellipsis_summary": "Add strands for Grafana and Node Exporter setup, integrate metrics configuration in VM host lifecycle, and update tests.\n> \n>   - **Behavior**:\n>     - Adds `SetupGrafana` strand in `prog/setup_grafana.rb` to install Grafana on a VM, handling domain and certificate email.\n>     - Adds `SetupNodeExporter` strand in `prog/setup_node_exporter.rb` to install Node Exporter version 1.9.1.\n>     - Integrates metrics configuration in `prog/vm/host_nexus.rb` with a new `configure_metrics` label.\n>   - **Scripts**:\n>     - Adds `setup-grafana` script in `rhizome/host/bin/setup-grafana` for installing Grafana, configuring Nginx, and setting up SSL.\n>     - Adds `setup-node-exporter` script in `rhizome/host/bin/setup-node-exporter` for installing Node Exporter and configuring it as a service.\n>   - **Models**:\n>     - Updates `VmHost` in `model/vm_host.rb` to include metrics configuration and session initialization for metrics export.\n>   - **Tests**:\n>     - Adds tests for `SetupGrafana` in `spec/prog/setup_grafana_spec.rb`.\n>     - Adds tests for `SetupNodeExporter` in `spec/prog/setup_node_exporter_spec.rb`.\n>     - Updates `VmHost` tests in `spec/model/vm_host_spec.rb` to cover metrics configuration.\n>     - Updates `HostNexus` tests in `spec/prog/vm/host_nexus_spec.rb` to cover new metrics configuration behavior.\n> \n>"
  },
  {
    "pr": 3417,
    "title": "Inference model card fixes and UI improvements",
    "description": "1. Display the \"Try in Playground\" button only for generative models, hide it for embedding models.\n2. Visually align all \"Try in Playground\" buttons, ensuring consistent layout (using css line clamping).\n3. Use the display_name tag for a more readable model name on the model card, when available.\n\nDev preview:\n![Screenshot 2025-06-04 at 3 08 50 PM](https://github.com/user-attachments/assets/7c3830d0-f344-4889-80cb-17e7fa69fff4)",
    "ellipsis_summary": "UI improvements for generative models and model card display logic updates.\n> \n>   - **UI Improvements**:\n>     - Display \"Try in Playground\" button only for generative models in `index.erb`.\n>     - Align \"Try in Playground\" buttons using CSS line clamping in `index.erb`.\n>   - **Model Card Display**:\n>     - Use `display_name` tag for model name in `serialize_internal()` in `inference_router_model.rb`.\n> \n>"
  },
  {
    "pr": 3418,
    "title": "Fix incorrect mocking of Stripe::PaymentMethod.retrieve",
    "description": "The method returns Stripe::StripeObject objects, not hashes.",
    "ellipsis_summary": "Fixes `Stripe::PaymentMethod.retrieve` mock to return `Stripe::StripeObject` instead of hashes in test files.\n> \n>   - **Behavior**:\n>     - Fixes `Stripe::PaymentMethod.retrieve` mock to return `Stripe::StripeObject` instead of hashes in `payment_method_spec.rb` and `billing_spec.rb`.\n>     - Introduces `stripe_object` helper function in `billing_spec.rb` to construct `Stripe::StripeObject` from hashes.\n>   - **Tests**:\n>     - Updates multiple test cases in `billing_spec.rb` to use `stripe_object` for mocking `Stripe::PaymentMethod.retrieve`.\n>     - Ensures consistent return type for Stripe API mocks across tests.\n> \n>"
  },
  {
    "pr": 3419,
    "title": "Bump rack from 3.1.14 to 3.1.16",
    "description": "Bumps [rack](https://github.com/rack/rack) from 3.1.14 to 3.1.16.\n<details>\n<summary>Changelog</summary>\n<p><em>Sourced from <a href=\"https://github.com/rack/rack/blob/main/CHANGELOG.md\">rack's changelog</a>.</em></p>\n<blockquote>\n<h1>Changelog</h1>\n<p>All notable changes to this project will be documented in this file. For info on how to format all future additions to this file please reference <a href=\"https://keepachangelog.com/en/1.0.0/\">Keep A Changelog</a>.</p>\n<h2>Unreleased</h2>\n<h3>SPEC Changes</h3>\n<ul>\n<li>Request environment keys must now be strings. <a href=\"https://redirect.github.com/rack/rack/issues/2310\">#2310</a>, [<a href=\"https://github.com/jeremyevans\"><code>@​jeremyevans</code></a>])</li>\n<li>Add <code>nil</code> as a valid return from a Response <code>body.to_path</code> (<a href=\"https://redirect.github.com/rack/rack/pull/2318\">#2318</a>, [<a href=\"https://github.com/MSP-Greg\"><code>@​MSP-Greg</code></a>])</li>\n</ul>\n<h3>Added</h3>\n<ul>\n<li>Introduce <code>Rack::VERSION</code> constant. (<a href=\"https://redirect.github.com/rack/rack/pull/2199\">#2199</a>, [<a href=\"https://github.com/ioquatix\"><code>@​ioquatix</code></a>])</li>\n<li>ISO-2022-JP encoded parts within MIME Multipart sections of an HTTP request body will now be converted to UTF-8. (<a href=\"https://redirect.github.com/rack/rack/pull/2245\">#2245</a>, <a href=\"https://github.com/nappa\"><code>@​nappa</code></a>)</li>\n</ul>\n<h3>Changed</h3>\n<ul>\n<li>Invalid cookie keys will now raise an error. (<a href=\"https://redirect.github.com/rack/rack/pull/2193\">#2193</a>, [<a href=\"https://github.com/ioquatix\"><code>@​ioquatix</code></a>])</li>\n<li><code>Rack::MediaType#params</code> now handles empty strings. (<a href=\"https://redirect.github.com/rack/rack/pull/2229\">#2229</a>, [<a href=\"https://github.com/jeremyevans\"><code>@​jeremyevans</code></a>])</li>\n<li>Avoid unnecessary calls to the <code>ip_filter</code> lambda to evaluate <code>Request#ip</code> (<a href=\"https://redirect.github.com/rack/rack/pull/2287\">#2287</a>, [<a href=\"https://github.com/willbryant\"><code>@​willbryant</code></a>])</li>\n<li>Only calculate <code>Request#ip</code> once per request (<a href=\"https://redirect.github.com/rack/rack/pull/2292\">#2292</a>, [<a href=\"https://github.com/willbryant\"><code>@​willbryant</code></a>])</li>\n</ul>\n<h3>Deprecated</h3>\n<ul>\n<li><code>Rack::Auth::AbstractRequest#request</code> is deprecated without replacement. (<a href=\"https://redirect.github.com/rack/rack/pull/2229\">#2229</a>, [<a href=\"https://github.com/jeremyevans\"><code>@​jeremyevans</code></a>])</li>\n<li><code>Rack::Request#parse_multipart</code> (private method designed to be overridden in subclasses) is deprecated without replacement. (<a href=\"https://redirect.github.com/rack/rack/pull/2229\">#2229</a>, [<a href=\"https://github.com/jeremyevans\"><code>@​jeremyevans</code></a>])</li>\n</ul>\n<h3>Removed</h3>\n<ul>\n<li><code>Rack::Request#values_at</code> is removed. (<a href=\"https://redirect.github.com/rack/rack/pull/2200\">#2200</a>, [<a href=\"https://github.com/ioquatix\"><code>@​ioquatix</code></a>])</li>\n<li><code>Rack::Logger</code> is removed with no replacement. (<a href=\"https://redirect.github.com/rack/rack/pull/2196\">#2196</a>, [<a href=\"https://github.com/ioquatix\"><code>@​ioquatix</code></a>])</li>\n<li>Automatic cache invalidation in <code>Rack::Request#{GET,POST}</code> has been removed. (<a href=\"https://redirect.github.com/rack/rack/pull/2230\">#2230</a>, [<a href=\"https://github.com/jeremyevans\"><code>@​jeremyevans</code></a>])</li>\n<li>Support for <code>CGI::Cookie</code> has been removed. (<a href=\"https://redirect.github.com/rack/rack/pull/2332\">#2332</a>, [<a href=\"https://github.com/ioquatix\"><code>@​ioquatix</code></a>])</li>\n</ul>\n<h3>Fixed</h3>\n<ul>\n<li><code>Rack::RewindableInput::Middleware</code> no longer wraps a nil input. (<a href=\"https://redirect.github.com/rack/rack/pull/2259\">#2259</a>, <a href=\"https://github.com/tt\"><code>@​tt</code></a>)</li>\n<li>Fix <code>NoMethodError</code> in <code>Rack::Request#wrap_ipv6</code> when <code>x-forwarded-host</code> is empty. (<a href=\"https://redirect.github.com/rack/rack/pull/2270\">#2270</a>, <a href=\"https://github.com/oieioi\"><code>@​oieioi</code></a>)</li>\n<li>Fix the specification for <code>SERVER_PORT</code> which was incorrectly documented as required to be an <code>Integer</code> if present - it must be a <code>String</code> containing digits only. (<a href=\"https://redirect.github.com/rack/rack/pull/2296\">#2296</a>, [<a href=\"https://github.com/ioquatix\"><code>@​ioquatix</code></a>])</li>\n<li><code>SERVER_NAME</code> and <code>HTTP_HOST</code> are now more strictly validated according to the relevant specifications. (<a href=\"https://redirect.github.com/rack/rack/pull/2298\">#2298</a>, [<a href=\"https://github.com/ioquatix\"><code>@​ioquatix</code></a>])</li>\n</ul>\n<h2>[3.1.15] - 2025-05-18</h2>\n<ul>\n<li>Optional support for <code>CGI::Cookie</code> if not available. (<a href=\"https://redirect.github.com/rack/rack/pull/2327\">#2327</a>, <a href=\"https://redirect.github.com/rack/rack/pull/2333\">#2333</a>, [<a href=\"https://github.com/earlopain\"><code>@​earlopain</code></a>])</li>\n</ul>\n</blockquote>\n</details>\n<details>\n<summary>Commits</summary>\n<ul>\n<li><a href=\"https://github.com/rack/rack/commit/df2f3f2804373acafc429ed9f0770847a9c6b226\"><code>df2f3f2</code></a> Bump patch version.</li>\n<li><a href=\"https://github.com/rack/rack/commit/aed514df37e33907df3c971ed3ca9a0a20ac2901\"><code>aed514d</code></a> Fix ReDoS and consistency in multipart regexes</li>\n<li><a href=\"https://github.com/rack/rack/commit/352650a65cc2027191aaaa1b93a302542ceeb638\"><code>352650a</code></a> Synchronize changelog.</li>\n<li><a href=\"https://github.com/rack/rack/commit/835e15bf9e51846471e3da63ce474f6836ebd203\"><code>835e15b</code></a> Bump patch version.</li>\n<li><a href=\"https://github.com/rack/rack/commit/bd60f6e13486fafceb0078fa17f535ac24877b3f\"><code>bd60f6e</code></a> Feature detect <code>CGI::Cookie</code>. (<a href=\"https://redirect.github.com/rack/rack/issues/2333\">#2333</a>)</li>\n<li><a href=\"https://github.com/rack/rack/commit/3c1a46de3f637f08993d83eb341ddae409cc60c5\"><code>3c1a46d</code></a> Replace usage of <code>CGI::Cookie</code> (<a href=\"https://redirect.github.com/rack/rack/issues/2328\">#2328</a>)</li>\n<li><a href=\"https://github.com/rack/rack/commit/0ac5c574fd6f0db40d930ac7c32e064435f43d37\"><code>0ac5c57</code></a> Test on Ruby v3.4.</li>\n<li>See full diff in <a href=\"https://github.com/rack/rack/compare/v3.1.14...v3.1.16\">compare view</a></li>\n</ul>\n</details>\n<br />\n\n\n[![Dependabot compatibility score](https://dependabot-badges.githubapp.com/badges/compatibility_score?dependency-name=rack&package-manager=bundler&previous-version=3.1.14&new-version=3.1.16)](https://docs.github.com/en/github/managing-security-vulnerabilities/about-dependabot-security-updates#about-compatibility-scores)\n\nDependabot will resolve any conflicts with this PR as long as you don't alter it yourself. You can also trigger a rebase manually by commenting `@dependabot rebase`.\n\n[//]: # (dependabot-automerge-start)\n[//]: # (dependabot-automerge-end)\n\n---\n\n<details>\n<summary>Dependabot commands and options</summary>\n<br />\n\nYou can trigger Dependabot actions by commenting on this PR:\n- `@dependabot rebase` will rebase this PR\n- `@dependabot recreate` will recreate this PR, overwriting any edits that have been made to it\n- `@dependabot merge` will merge this PR after your CI passes on it\n- `@dependabot squash and merge` will squash and merge this PR after your CI passes on it\n- `@dependabot cancel merge` will cancel a previously requested merge and block automerging\n- `@dependabot reopen` will reopen this PR if it is closed\n- `@dependabot close` will close this PR and stop Dependabot recreating it. You can achieve the same result by closing it manually\n- `@dependabot show <dependency name> ignore conditions` will show all of the ignore conditions of the specified dependency\n- `@dependabot ignore this major version` will close this PR and stop Dependabot creating any more for this major version (unless you reopen the PR or upgrade to it yourself)\n- `@dependabot ignore this minor version` will close this PR and stop Dependabot creating any more for this minor version (unless you reopen the PR or upgrade to it yourself)\n- `@dependabot ignore this dependency` will close this PR and stop Dependabot creating any more for this dependency (unless you reopen the PR or upgrade to it yourself)\nYou can disable automated security fix PRs for this repo from the [Security Alerts page](https://github.com/ubicloud/ubicloud/network/alerts).\n\n</details>",
    "ellipsis_summary": ""
  },
  {
    "pr": 3421,
    "title": "Increase utilization limit to 75%",
    "description": "We allow our customers to exceed the concurrency limit by up to 70%. We set this limit a year ago and have almost doubled our capacity since then. We can increase this threshold to 75 to make better use of this idle capacity",
    "ellipsis_summary": "----\r\n\r\n> [!IMPORTANT]\r\n> Increase utilization threshold from 70% to 75% in `github_runner.rb` to allow more concurrency before waiting.\r\n> \r\n>   - **Behavior**:\r\n>     - Increase utilization threshold from 70% to 75% in `quota_available?` method in `github_runner.rb`.\r\n>     - Affects when the system waits due to high utilization, allowing more concurrency before waiting.\r\n> \r\n>"
  },
  {
    "pr": 3422,
    "title": "Remove SELECT FOR UPDATE from quota_available?",
    "description": "This aims at reducing contention but comes at the cost of potentially making some quota decisions inaccurate.",
    "ellipsis_summary": "Remove `SELECT FOR UPDATE` from `quota_available?` in `github_runner.rb`, reducing contention but potentially making quota decisions less accurate.\n> \n>   - **Behavior**:\n>     - Remove `SELECT FOR UPDATE` from `quota_available?` in `github_runner.rb`, reducing contention but potentially making quota decisions less accurate.\n>   - **Tests**:\n>     - Update `github_runner_spec.rb` to remove expectations related to `for_update` in tests for `#start` and `#wait_concurrency_limit`.\n> \n>"
  },
  {
    "pr": 3423,
    "title": "Ubi-on-aws s3 integration for backups/restore",
    "description": "## Add Location to PostgresTimeline - Migration\nThis information is required since there can be timelines without a\nleader. For AWS S3 integrated timelines, we also don't have a\nMinioCluster record in the database, therefor, we should still be able\nto somehow refer to the address of the S3 store. For that, we are adding\nthe reference of location to the timeline. This way, we can always refer\nto the S3 account that holds the backups of this timeline.\n\n## Add S3 integration to postgres timeline for backup/restore\n\n## Update base AWS images",
    "ellipsis_summary": "Add AWS S3 integration for PostgreSQL timelines, update models and configurations, and enhance tests for backup/restore functionality.\n> \n>   - **Behavior**:\n>     - Adds AWS S3 integration for PostgreSQL timelines in `postgres_timeline.rb`, allowing backup/restore without a MinioCluster.\n>     - Updates `assemble()` in `postgres_server_nexus.rb` to select AWS base images based on PostgreSQL version.\n>     - Modifies `refresh_walg_credentials()` in `postgres_server_nexus.rb` to skip blob storage CA for AWS timelines.\n>   - **Models**:\n>     - Adds `location_id` to `PostgresTimeline` in `20250605_add_postgres_timeline_aws.rb`.\n>     - Updates `Location` model with `aws?()` method in `location.rb`.\n>     - Updates `PostgresTimeline` model to include `location` association and AWS-specific logic in `postgres_timeline.rb`.\n>   - **Configuration**:\n>     - Updates AWS AMI versions in `config.rb`.\n>     - Adds `aws-sdk-iam` to `Gemfile`.\n>   - **Tests**:\n>     - Adds tests for AWS S3 integration in `postgres_timeline_spec.rb` and `postgres_server_nexus_spec.rb`.\n>     - Updates `client_spec.rb` to test Minio client initialization without `ssl_ca_data`.\n> \n>"
  },
  {
    "pr": 3424,
    "title": "Inference playground V2",
    "description": "1. Add multi-turn conversation support\n2. Add system message, temperature, top P support\n3. Add copy support\n4. Show real-time rendering\n5. Show token usages\n\nDev preview:\n\n![Screenshot 2025-06-05 at 7 26 45 PM](https://github.com/user-attachments/assets/fb66eb6d-e2dc-45af-9fba-9bfd3c3e7bf1)\n\n![Screenshot 2025-06-05 at 7 28 57 PM](https://github.com/user-attachments/assets/a6ff4efe-b550-45bc-95a2-0e9534ca3e45)\n\n\n\nhttps://github.com/user-attachments/assets/f6331533-d306-42c1-a895-26a22926471e",
    "ellipsis_summary": "Enhance inference playground with multi-turn conversation, system message handling, real-time rendering, and UI improvements.\n> \n>   - **Features**:\n>     - Multi-turn conversation support in `setupPlayground()` in `app.js`.\n>     - System message, temperature, and top P parameters added to `playground.erb`.\n>     - Real-time rendering of responses with token usage display in `setupPlayground()`.\n>     - Copy support for messages in `appendMessage()` in `app.js`.\n>   - **UI Enhancements**:\n>     - New styles for real-time rendering added in `tailwind.css`.\n>     - Updated form components in `playground.erb` to include new input fields.\n>   - **Misc**:\n>     - Removed unused icons from `icon.erb`.\n> \n>"
  },
  {
    "pr": 3425,
    "title": "Set timeout for retrieving DockerHub quota limits",
    "description": "Add the `-m 10` option to curl commands used to fetch the remaining\nDockerHub rate limit quotas, setting a maximum timeout of 10 seconds\nfor these requests.\n\nFrom the curl man page:\n-m, --max-time <seconds>\nSet the maximum time in seconds that you allow each transfer to take.\nPrevents your batch jobs from hanging for hours due to slow networks\nor links going down. This option accepts decimal values.",
    "ellipsis_summary": "Set a 10-second timeout for `curl` commands fetching DockerHub quotas in `github_runner.rb` and update tests in `github_runner_spec.rb`.\n> \n>   - **Behavior**:\n>     - Add `-m 10` option to `curl` commands in `collect_final_telemetry` in `github_runner.rb` to set a 10-second timeout for DockerHub quota requests.\n>     - Update `github_runner_spec.rb` to reflect the timeout change in tests for `collect_final_telemetry`.\n>   - **Testing**:\n>     - Ensure `curl` commands in tests use the 10-second timeout to match production code behavior.\n> \n>"
  },
  {
    "pr": 3426,
    "title": "Only accept single argument in Prog::Base#pop",
    "description": "Also, do not use unnecessary pattern matching.",
    "ellipsis_summary": "`pop` method in `prog/base.rb` now accepts a single argument and uses a case statement instead of pattern matching.\n> \n>   - **Behavior**:\n>     - `pop` method in `prog/base.rb` now accepts a single argument instead of multiple arguments.\n>     - Replaces pattern matching with a case statement to handle `String` and `Hash` inputs.\n>     - Raises an error if the argument is neither `String` nor `Hash`.\n> \n>"
  },
  {
    "pr": 3428,
    "title": "Decrease E2E test timeout",
    "description": "We previously increased the timeout due to slow image downloads. Now\nthat our internal MinIO cluster has stabilized and boot images are\ndownloading reliably again, we can safely reduce the timeout.",
    "ellipsis_summary": "Reduce E2E test timeout in `e2e.yml` due to improved MinIO cluster stability.\n> \n>   - **Timeout Reduction**:\n>     - Decrease `timeout-minutes` from 105 to 60 in `e2e.yml` for the `run-ci` job.\n>     - Reduce `timeout` in the `Run tests` step from 100m to 55m in `e2e.yml`.\n> \n>"
  },
  {
    "pr": 3430,
    "title": "Bump the js-dependencies group with 3 updates",
    "description": "Bumps the js-dependencies group with 3 updates: [@babel/runtime](https://github.com/babel/babel/tree/HEAD/packages/babel-runtime), [@types/node](https://github.com/DefinitelyTyped/DefinitelyTyped/tree/HEAD/types/node) and [core-js](https://github.com/zloirock/core-js/tree/HEAD/packages/core-js).\n\nUpdates `@babel/runtime` from 7.27.4 to 7.27.6\n<details>\n<summary>Release notes</summary>\n<p><em>Sourced from <a href=\"https://github.com/babel/babel/releases\"><code>@​babel/runtime</code>'s releases</a>.</em></p>\n<blockquote>\n<h2>v7.27.6 (2025-06-05)</h2>\n<h4>:bug: Bug Fix</h4>\n<ul>\n<li><code>babel-helpers</code>, <code>babel-plugin-transform-async-generator-functions</code>, <code>babel-plugin-transform-regenerator</code>, <code>babel-preset-env</code>, <code>babel-runtime-corejs3</code>\n<ul>\n<li><a href=\"https://redirect.github.com/babel/babel/pull/17366\">#17366</a> fix: <code>finally</code> causes unexpected return value (<a href=\"https://github.com/liuxingbaoyu\"><code>@​liuxingbaoyu</code></a>)</li>\n</ul>\n</li>\n<li><code>babel-generator</code>, <code>babel-parser</code>, <code>babel-types</code>\n<ul>\n<li><a href=\"https://redirect.github.com/babel/babel/pull/17357\">#17357</a> Ensure syntactic ordering when visiting array-type AST nodes (<a href=\"https://github.com/JLHwung\"><code>@​JLHwung</code></a>)</li>\n</ul>\n</li>\n</ul>\n<h4>Committers: 3</h4>\n<ul>\n<li>Huáng Jùnliàng (<a href=\"https://github.com/JLHwung\"><code>@​JLHwung</code></a>)</li>\n<li>Ingvar Stepanyan (<a href=\"https://github.com/RReverser\"><code>@​RReverser</code></a>)</li>\n<li><a href=\"https://github.com/liuxingbaoyu\"><code>@​liuxingbaoyu</code></a></li>\n</ul>\n<h2>v7.27.5 (2025-06-03)</h2>\n<p>Thanks <a href=\"https://github.com/NullVoxPopuli\"><code>@​NullVoxPopuli</code></a> for your first PR!</p>\n<h4>:bug: Bug Fix</h4>\n<ul>\n<li><code>babel-plugin-transform-regenerator</code>\n<ul>\n<li><a href=\"https://redirect.github.com/babel/babel/pull/17359\">#17359</a> fix: Unexpected infinite loop with <code>regenerator</code> for <code>try</code> (<a href=\"https://github.com/liuxingbaoyu\"><code>@​liuxingbaoyu</code></a>)</li>\n</ul>\n</li>\n<li>Other\n<ul>\n<li><a href=\"https://redirect.github.com/babel/babel/pull/17349\">#17349</a> Map ESLint's <code>sourceType: commonjs</code> to script (<a href=\"https://github.com/JLHwung\"><code>@​JLHwung</code></a>)</li>\n</ul>\n</li>\n</ul>\n<h4>:nail_care: Polish</h4>\n<ul>\n<li><code>babel-parser</code>\n<ul>\n<li><a href=\"https://redirect.github.com/babel/babel/pull/17333\">#17333</a> Improve using declaration errors (<a href=\"https://github.com/JLHwung\"><code>@​JLHwung</code></a>)</li>\n</ul>\n</li>\n</ul>\n<h4>Committers: 4</h4>\n<ul>\n<li>Babel Bot (<a href=\"https://github.com/babel-bot\"><code>@​babel-bot</code></a>)</li>\n<li>Huáng Jùnliàng (<a href=\"https://github.com/JLHwung\"><code>@​JLHwung</code></a>)</li>\n<li><a href=\"https://github.com/NullVoxPopuli\"><code>@​NullVoxPopuli</code></a></li>\n<li><a href=\"https://github.com/liuxingbaoyu\"><code>@​liuxingbaoyu</code></a></li>\n</ul>\n</blockquote>\n</details>\n<details>\n<summary>Changelog</summary>\n<p><em>Sourced from <a href=\"https://github.com/babel/babel/blob/main/CHANGELOG.md\"><code>@​babel/runtime</code>'s changelog</a>.</em></p>\n<blockquote>\n<h2>v7.27.6 (2025-06-05)</h2>\n<h4>:bug: Bug Fix</h4>\n<ul>\n<li><code>babel-helpers</code>, <code>babel-plugin-transform-async-generator-functions</code>, <code>babel-plugin-transform-regenerator</code>, <code>babel-preset-env</code>, <code>babel-runtime-corejs3</code>\n<ul>\n<li><a href=\"https://redirect.github.com/babel/babel/pull/17366\">#17366</a> fix: <code>finally</code> causes unexpected return value (<a href=\"https://github.com/liuxingbaoyu\"><code>@​liuxingbaoyu</code></a>)</li>\n</ul>\n</li>\n<li><code>babel-generator</code>, <code>babel-parser</code>, <code>babel-types</code>\n<ul>\n<li><a href=\"https://redirect.github.com/babel/babel/pull/17357\">#17357</a> Ensure syntactic ordering when visiting array-type AST nodes (<a href=\"https://github.com/JLHwung\"><code>@​JLHwung</code></a>)</li>\n</ul>\n</li>\n</ul>\n<h2>v7.27.5 (2025-06-03)</h2>\n<h4>:bug: Bug Fix</h4>\n<ul>\n<li><code>babel-plugin-transform-regenerator</code>\n<ul>\n<li><a href=\"https://redirect.github.com/babel/babel/pull/17359\">#17359</a> fix: Unexpected infinite loop with <code>regenerator</code> for <code>try</code> (<a href=\"https://github.com/liuxingbaoyu\"><code>@​liuxingbaoyu</code></a>)</li>\n</ul>\n</li>\n<li>Other\n<ul>\n<li><a href=\"https://redirect.github.com/babel/babel/pull/17349\">#17349</a> Map ESLint's <code>sourceType: commonjs</code> to script (<a href=\"https://github.com/JLHwung\"><code>@​JLHwung</code></a>)</li>\n</ul>\n</li>\n</ul>\n<h4>:nail_care: Polish</h4>\n<ul>\n<li><code>babel-parser</code>\n<ul>\n<li><a href=\"https://redirect.github.com/babel/babel/pull/17333\">#17333</a> Improve using declaration errors (<a href=\"https://github.com/JLHwung\"><code>@​JLHwung</code></a>)</li>\n</ul>\n</li>\n</ul>\n</blockquote>\n</details>\n<details>\n<summary>Commits</summary>\n<ul>\n<li><a href=\"https://github.com/babel/babel/commit/baa4cb8b9f8a551d7dae9042b19ea2f74df6b110\"><code>baa4cb8</code></a> v7.27.6</li>\n<li>See full diff in <a href=\"https://github.com/babel/babel/commits/v7.27.6/packages/babel-runtime\">compare view</a></li>\n</ul>\n</details>\n<br />\n\nUpdates `@types/node` from 22.15.29 to 22.15.30\n<details>\n<summary>Commits</summary>\n<ul>\n<li>See full diff in <a href=\"https://github.com/DefinitelyTyped/DefinitelyTyped/commits/HEAD/types/node\">compare view</a></li>\n</ul>\n</details>\n<br />\n\nUpdates `core-js` from 3.42.0 to 3.43.0\n<details>\n<summary>Changelog</summary>\n<p><em>Sourced from <a href=\"https://github.com/zloirock/core-js/blob/master/CHANGELOG.md\">core-js's changelog</a>.</em></p>\n<blockquote>\n<h5><a href=\"https://github.com/zloirock/core-js/releases/tag/v3.43.0\">3.43.0 - 2025.06.09</a></h5>\n<ul>\n<li>Changes <a href=\"https://github.com/zloirock/core-js/compare/v3.42.0...v3.43.0\">v3.42.0...v3.43.0</a> (139 commits)</li>\n<li><a href=\"https://github.com/tc39/proposal-explicit-resource-management\">Explicit Resource Management proposals</a>:\n<ul>\n<li>Built-ins:\n<ul>\n<li><code>Symbol.dispose</code></li>\n<li><code>Symbol.asyncDispose</code></li>\n<li><code>SuppressedError</code></li>\n<li><code>DisposableStack</code>\n<ul>\n<li><code>DisposableStack.prototype.dispose</code></li>\n<li><code>DisposableStack.prototype.use</code></li>\n<li><code>DisposableStack.prototype.adopt</code></li>\n<li><code>DisposableStack.prototype.defer</code></li>\n<li><code>DisposableStack.prototype.move</code></li>\n<li><code>DisposableStack.prototype[@@dispose]</code></li>\n</ul>\n</li>\n<li><code>AsyncDisposableStack</code>\n<ul>\n<li><code>AsyncDisposableStack.prototype.disposeAsync</code></li>\n<li><code>AsyncDisposableStack.prototype.use</code></li>\n<li><code>AsyncDisposableStack.prototype.adopt</code></li>\n<li><code>AsyncDisposableStack.prototype.defer</code></li>\n<li><code>AsyncDisposableStack.prototype.move</code></li>\n<li><code>AsyncDisposableStack.prototype[@@asyncDispose]</code></li>\n</ul>\n</li>\n<li><code>Iterator.prototype[@@dispose]</code></li>\n<li><code>AsyncIterator.prototype[@@asyncDispose]</code></li>\n</ul>\n</li>\n<li>Moved to stable ES, <a href=\"https://x.com/robpalmer2/status/1927744934343213085\">May 2025 TC39 meeting</a></li>\n<li>Added <code>es.</code> namespace module, <code>/es/</code> and <code>/stable/</code> namespaces entries</li>\n</ul>\n</li>\n<li><a href=\"https://github.com/tc39/proposal-array-from-async\"><code>Array.fromAsync</code> proposal</a>:\n<ul>\n<li>Built-ins:\n<ul>\n<li><code>Array.fromAsync</code></li>\n</ul>\n</li>\n<li>Moved to stable ES, <a href=\"https://redirect.github.com/tc39/proposal-array-from-async/issues/14#issuecomment-2916645435\">May 2025 TC39 meeting</a></li>\n<li>Added <code>es.</code> namespace module, <code>/es/</code> and <code>/stable/</code> namespaces entries</li>\n</ul>\n</li>\n<li><a href=\"https://github.com/tc39/proposal-is-error\"><code>Error.isError</code> proposal</a>:\n<ul>\n<li>Built-ins:\n<ul>\n<li><code>Error.isError</code></li>\n</ul>\n</li>\n<li>Moved to stable ES, <a href=\"https://github.com/tc39/proposals/commit/a5d4bb99d79f328533d0c36b0cd20597fa12c7a8\">May 2025 TC39 meeting</a></li>\n<li>Added <code>es.</code> namespace module, <code>/es/</code> and <code>/stable/</code> namespaces entries</li>\n</ul>\n</li>\n<li>Added <a href=\"https://github.com/tc39/proposal-joint-iteration\">Joint iteration stage 2.7 proposal</a>:\n<ul>\n<li>Added built-ins:\n<ul>\n<li><code>Iterator.zip</code></li>\n<li><code>Iterator.zipKeyed</code></li>\n</ul>\n</li>\n</ul>\n</li>\n<li>Added <a href=\"https://github.com/tc39/proposal-iterator-chunking\"><code>Iterator</code> chunking stage 2 proposal</a>:\n<ul>\n<li>Added built-ins:\n<ul>\n<li><code>Iterator.prototype.chunks</code></li>\n<li><code>Iterator.prototype.windows</code></li>\n</ul>\n</li>\n</ul>\n</li>\n<li><a href=\"https://github.com/tc39/proposal-math-clamp\"><code>Number.prototype.clamp</code> proposal</a>:\n<ul>\n<li>Built-ins:\n<ul>\n<li><code>Number.prototype.clamp</code></li>\n</ul>\n</li>\n<li>Moved to stage 2, <a href=\"https://github.com/tc39/proposal-math-clamp/commit/a005f28a6a03e175b9671de1c8c70dd5b7b08c2d\">May 2025 TC39 meeting</a></li>\n<li><code>Math.clamp</code> was replaced with <code>Number.prototype.clamp</code></li>\n<li>Removed a <code>RangeError</code> if <code>min &lt;= max</code> or <code>+0</code> min and <code>-0</code> max, [tc39/proposal-math-clamp/<a href=\"https://github.com/zloirock/core-js/tree/HEAD/packages/core-js/issues/22\">#22</a>](<a href=\"https://redirect.github.com/tc39/proposal-math-clamp/issues/22\">tc39/proposal-math-clamp#22</a>)</li>\n</ul>\n</li>\n<li>Always check regular expression flags by <code>flags</code> getter <a href=\"https://redirect.github.com/tc39/ecma262/pull/2791\">PR</a>. Native methods are not fixed, only own implementation updated for:</li>\n</ul>\n<!-- raw HTML omitted -->\n</blockquote>\n<p>... (truncated)</p>\n</details>\n<details>\n<summary>Commits</summary>\n<ul>\n<li><a href=\"https://github.com/zloirock/core-js/commit/f4f46336b3f2b9ac7a688f9a6d2fa6f12f94ebab\"><code>f4f4633</code></a> v3.43.0</li>\n<li><a href=\"https://github.com/zloirock/core-js/commit/c4a8143d53ba8e2d4415a7537930c5fcf84b70bd\"><code>c4a8143</code></a> enable some new <code>eslint-plugin-es-x</code> rules</li>\n<li><a href=\"https://github.com/zloirock/core-js/commit/a5b9552817c99e456867fd32baf9fa15529552ae\"><code>a5b9552</code></a> Fix argument validation condition</li>\n<li><a href=\"https://github.com/zloirock/core-js/commit/24ad7ea55ff82ff108f7f6da4a1d2b6e1917c2c8\"><code>24ad7ea</code></a> Iterator close on argument validation error</li>\n<li><a href=\"https://github.com/zloirock/core-js/commit/cf6aa2c6116d1cc5461cd6adc5b2776f5bb9808b\"><code>cf6aa2c</code></a> Iterator#windows implementation</li>\n<li><a href=\"https://github.com/zloirock/core-js/commit/de731319cfaf5fcd28bba3be36473a2c7e7192df\"><code>de73131</code></a> Iterator#chunks implementation</li>\n<li><a href=\"https://github.com/zloirock/core-js/commit/8e0a2397fac55c2d49d8c9fbba0ed1ac10a37cea\"><code>8e0a239</code></a> Number#clamp implementation</li>\n<li><a href=\"https://github.com/zloirock/core-js/commit/9cf80c7d5f1cc398489c7e3c0b111d050cc6fd1e\"><code>9cf80c7</code></a> refactoring</li>\n<li><a href=\"https://github.com/zloirock/core-js/commit/5cc3f7a840ef3dadf76e8adb4284bc3b9c0911e8\"><code>5cc3f7a</code></a> Refactoring</li>\n<li><a href=\"https://github.com/zloirock/core-js/commit/884e1037ef2f3b8b41af1d6cfd1b9a1cac2100fd\"><code>884e103</code></a> Iterator.zipKeyed implementation</li>\n<li>Additional commits viewable in <a href=\"https://github.com/zloirock/core-js/commits/v3.43.0/packages/core-js\">compare view</a></li>\n</ul>\n</details>\n<br />\n\n\nDependabot will resolve any conflicts with this PR as long as you don't alter it yourself. You can also trigger a rebase manually by commenting `@dependabot rebase`.\n\n[//]: # (dependabot-automerge-start)\n[//]: # (dependabot-automerge-end)\n\n---\n\n<details>\n<summary>Dependabot commands and options</summary>\n<br />\n\nYou can trigger Dependabot actions by commenting on this PR:\n- `@dependabot rebase` will rebase this PR\n- `@dependabot recreate` will recreate this PR, overwriting any edits that have been made to it\n- `@dependabot merge` will merge this PR after your CI passes on it\n- `@dependabot squash and merge` will squash and merge this PR after your CI passes on it\n- `@dependabot cancel merge` will cancel a previously requested merge and block automerging\n- `@dependabot reopen` will reopen this PR if it is closed\n- `@dependabot close` will close this PR and stop Dependabot recreating it. You can achieve the same result by closing it manually\n- `@dependabot show <dependency name> ignore conditions` will show all of the ignore conditions of the specified dependency\n- `@dependabot ignore <dependency name> major version` will close this group update PR and stop Dependabot creating any more for the specific dependency's major version (unless you unignore this specific dependency's major version or upgrade to it yourself)\n- `@dependabot ignore <dependency name> minor version` will close this group update PR and stop Dependabot creating any more for the specific dependency's minor version (unless you unignore this specific dependency's minor version or upgrade to it yourself)\n- `@dependabot ignore <dependency name>` will close this group update PR and stop Dependabot creating any more for the specific dependency (unless you unignore this specific dependency or upgrade to it yourself)\n- `@dependabot unignore <dependency name>` will remove all of the ignore conditions of the specified dependency\n- `@dependabot unignore <dependency name> <ignore condition>` will remove the ignore condition of the specified dependency and ignore conditions\n\n\n</details>",
    "ellipsis_summary": ""
  },
  {
    "pr": 3431,
    "title": "PG cache earliest backup time",
    "description": "",
    "ellipsis_summary": "> [!IMPORTANT]\n> Add caching for earliest backup time in `PostgresTimeline` to improve performance by reducing repeated calculations.\n> \n>   - **Database Schema**:\n>     - Add `cached_earliest_backup_at` column to `postgres_timeline` table in `20250610_add_cached_earliest_backup_time.rb`.\n>   - **Model Changes**:\n>     - Add `BACKUP_BUCKET_EXPIRATION_DAYS` constant in `postgres_timeline.rb`.\n>     - Update `earliest_restore_time` in `postgres_timeline.rb` to cache earliest backup time if older than expiration days.\n>   - **Code Refactor**:\n>     - Use `BACKUP_BUCKET_EXPIRATION_DAYS` constant in `postgres_timeline_nexus.rb` for lifecycle policy.\n>   - **Testing**:\n>     - Add test for `earliest_restore_time` caching behavior in `postgres_timeline_spec.rb`.\n> \n>"
  },
  {
    "pr": 3432,
    "title": "Ubiblk Setup",
    "description": "## Rhizome: Ubiblk Setup \n\nAdds `setup-vhost-block-backend` and accompanying library. These\ndownload and install Ubiblk to `/opt/vhost-block-backend/$version`.\n\nUsage:\n\n```\n/path/to/setup-vhost-block-backend verb version\n```\n\n- `verb`: currently only supported verb is `install`.\n- `version`: Ubiblk version\n\n---------------------------\n\n## Migrations for VhostBlockBackend. \n\nAdds the table & foreign keys for Ubiblk installation.\n\n---------------------------\n\n## Clover: Ubiblk Setup \n\nAdds a program to Setup a Ubiblk installation.\n\nTo use, do:\n\n```\nProg::Storage::SetupVhostBlockBackend.assemble(\n  vmh.id,\n  \"v0.1-5\",\n  allocation_weight: 100\n)\n```",
    "ellipsis_summary": "Adds Ubiblk setup script, database migrations, models, and tests for managing Ubiblk installations on VM hosts.\n> \n>   - **Setup and Installation**:\n>     - Adds `setup-vhost-block-backend` script in `rhizome/host/bin` to install Ubiblk to `/opt/vhost-block-backend/$version`.\n>     - Supports `install` verb and specific Ubiblk versions.\n>   - **Database Migrations**:\n>     - Creates `vhost_block_backend` table in `20250611_vhost_block_backend.rb` with columns for `id`, `version`, `allocation_weight`, and `vm_host_id`.\n>     - Adds foreign key `vhost_block_backend_id` to `vm_storage_volume` table.\n>   - **Models**:\n>     - Adds `VhostBlockBackend` model in `vhost_block_backend.rb` with associations to `vm_host` and `vm_storage_volumes`.\n>     - Updates `VmHost` and `VmStorageVolume` models to include associations with `VhostBlockBackend`.\n>   - **Program Logic**:\n>     - Implements `Prog::Storage::SetupVhostBlockBackend` in `setup_vhost_block_backend.rb` to manage Ubiblk setup process.\n>     - Handles version and architecture validation, and daemonizer process management.\n>   - **Testing**:\n>     - Adds tests for `VmStorageVolume` in `vm_storage_volume_spec.rb` to verify version retrieval.\n>     - Adds tests for `SetupVhostBlockBackend` in `setup_vhost_block_backend_spec.rb` to verify setup process and error handling.\n> \n>"
  },
  {
    "pr": 3433,
    "title": "Rhizome: Refactor StorageKeyEncryption.",
    "description": "We stored encrypted key and auth tag as two base64 encoded strings separately for SPDK storage. In Ubiblk we store concatenation of them as a single base64 encoded string (which was more convenient to use in Rust libraries).\n\nThis change refactors StorageKeyEncryption and move base64 encode/decode out of `wrap_key` & `unwrap_key`,  so they can also be reused for Ubiblk.",
    "ellipsis_summary": "Refactor `StorageKeyEncryption` to separate base64 encoding/decoding from key wrapping/unwrapping, supporting different storage formats.\n> \n>   - **Refactoring**:\n>     - Move base64 encode/decode from `wrap_key` and `unwrap_key` to `write_encrypted_dek` and `read_encrypted_dek` in `storage_key_encryption.rb`.\n>     - `wrap_key` and `unwrap_key` now return raw binary data instead of base64 strings.\n>   - **Tests**:\n>     - Update `storage_key_encryption_spec.rb` to check lengths of wrapped keys without base64 decoding.\n>     - Ensure tests validate the new behavior of `wrap_key` and `unwrap_key` methods.\n> \n>"
  },
  {
    "pr": 3434,
    "title": "Fix the leaseweb first/last ip address assignment issue",
    "description": "Another bug that passed specs due to mocking with the incorrect type.",
    "ellipsis_summary": "Fixes Leaseweb IP assignment issue by changing `provider` to `provider_name` in `vm_host.rb` to avoid assigning first/last IPs.\n> \n>   - **Behavior**:\n>     - Fixes IP address assignment issue for Leaseweb providers in `ip4_random_vm_network` in `vm_host.rb` by changing `provider` to `provider_name`.\n>     - Ensures first and last IPs are not assigned to VMs for Leaseweb.\n>   - **Tests**:\n>     - Updates test context in `vm_host_spec.rb` from \"when provider is leaseweb\" to \"when provider name is leaseweb\".\n>     - Modifies mock to use `provider_name` instead of `provider`.\n> \n>"
  },
  {
    "pr": 3435,
    "title": "Update billing rate for AWS",
    "description": "Current billing rate still doesn't reflect the full price as we include storage and backup costs into the CPU price. However, this is required for properly charging our AWS customers until we finalize the pricing for Ubi on AWS.",
    "ellipsis_summary": "Update AWS billing rates for `PostgresVCpu` and `PostgresStandbyVCpu` in `us-west-2` in `config/billing_rates.yml`.\n> \n>   - **Billing Rates Update**:\n>     - Updated `unit_price` for `PostgresVCpu` and `PostgresStandbyVCpu` in `us-west-2` to `0.0010075640`.\n>     - Changed `active_from` date for these resources to `2025-05-10T00:00:00Z`.\n>   - **Deprecation**:\n>     - Moved previous `PostgresVCpu` and `PostgresStandbyVCpu` entries for `us-west-2` to the end of the file with `unit_price` `0.0009525360` and `active_from` `2025-02-17T00:00:00Z`.\n> \n>"
  },
  {
    "pr": 3436,
    "title": "More playground UI improvements",
    "description": "- Add a small bottom margin to the reasoning block\n- Move processing status into the info block\n- Don't clear partial content on abort\n- Scroll to the bottom if the user is near bottom\n\nhttps://github.com/user-attachments/assets/77644209-c332-480a-b47b-df70a62f6952",
    "ellipsis_summary": "UI improvements in `setupPlayground()` include margin adjustments, processing status relocation, content retention on abort, and auto-scroll implementation.\n> \n>   - **UI Improvements**:\n>     - Add bottom margin to reasoning block in `setupPlayground()`.\n>     - Move processing status into info block in `appendMessage()`.\n>     - Prevent clearing of partial content on abort in `generate()`.\n>     - Implement auto-scroll to bottom if user is near bottom in `generate()`.\n>   - **Misc**:\n>     - Update `appendMessage()` to accept `show_processing` parameter.\n> \n>"
  },
  {
    "pr": 3437,
    "title": "Better NetAddr/Sequel integration",
    "description": "Previously, the only integration was conversion procs for inet and cidr. This adds:\n\n* conversion procs for inet[] and cidr[] (previously these used IPAddr instead of NetAddr)\n\n* typecasting support\n\n* schema type validation\n\n* NetAddr object literalization and bound variable support\n\nUpdate the update_firewall_rules prog to handle NetAddr instead of IPAddr instances.\n\nThis gives inet/cidr/inet[]/cidr[] columns a schema type when they did not have a schema type previously, which breaks the usage of literal string values for array columns in model objects. Literal strings are expressions and not values, and therefore shouldn't be used as model object values, they only work due to implementation details if a schema type is not present.  Fix cases where literal strings were used as model object values, making all affected code simpler.",
    "ellipsis_summary": "Enhance NetAddr and Sequel integration by adding conversion procs, typecasting, and schema validation for inet/cidr types, and update firewall rules to use NetAddr.\n> \n>   - **Integration Enhancements**:\n>     - Add conversion procs for `inet[]` and `cidr[]` in `db.rb`.\n>     - Implement typecasting and schema type validation for `inet` and `cidr` in `lib/net_addr_sequel.rb`.\n>     - Register array types for `inet` and `cidr` in `db.rb`.\n>   - **Program Updates**:\n>     - Update `resolve_globally_blocked_dnsnames.rb` to handle `NetAddr` objects.\n>     - Modify `update_firewall_rules.rb` to use `NetAddr` instead of `IPAddr`.\n>   - **Testing**:\n>     - Add tests for `NetAddr` conversion and typecasting in `db_spec.rb`.\n>     - Update `update_firewall_rules_spec.rb` to reflect changes in firewall rule handling.\n> \n>"
  },
  {
    "pr": 3438,
    "title": "Optimize VmHost#ip4_random_vm_network",
    "description": "This allows VmHost#ip4_random_vm_network to use a single query instead of potentially recursive method calls with N+1 queries.\n\nThe first step is populating a table with all valid IPv4 addresses for VMs running on the host. This adds a `ipv4_address` table, and has newly created `Address` instances populate the table if the address is IPv4 and not for a single IP.\n\nWith the table populated, VmHost#ip4_random_vm_network only needs to take the universe of available addresses, remove the assigned addresses, and pick a random remaining address.\n\nThis currently emits and falls back to the previous implementation if the `ipv4_address` has not been populated for the host.  We can remove the fallback after some time if we do not see any production issues, this is just me being cautious.\n\nThis depends on #3437, which adds better NetAddr/Sequel integration.",
    "ellipsis_summary": "Optimize `VmHost#ip4_random_vm_network` using a new `ipv4_address` table to reduce queries and improve performance.\n> \n>   - **Behavior**:\n>     - Optimize `VmHost#ip4_random_vm_network` to use a single query with `ipv4_address` table instead of recursive calls.\n>     - Falls back to old implementation if `ipv4_address` table is not populated.\n>   - **Database**:\n>     - Add migration `20250610_ipv4_address.rb` to create `ipv4_address` table with constraints for IPv4 addresses.\n>   - **Models**:\n>     - `Address` model: Add `populate_ipv4_addresses` to populate `ipv4_address` table on creation.\n>     - `VmHost` model: Modify `ip4_random_vm_network` to use `ipv4_address` table.\n>   - **Tests**:\n>     - Add tests in `address_spec.rb` for `populate_ipv4_addresses`.\n>     - Add tests in `vm_host_spec.rb` for `ip4_random_vm_network` using `ipv4_address` table.\n> \n>"
  },
  {
    "pr": 3439,
    "title": "Allow ResourceMethods plugin to accept redacted_columns keyword argument",
    "description": "This avoids the need to define a singleton redacted_columns method on a number of models.",
    "ellipsis_summary": "Add `redacted_columns` keyword argument to `ResourceMethods` plugin, updating several models to use it and removing singleton methods.\n> \n>   - **Behavior**:\n>     - `ResourceMethods.configure` now accepts `redacted_columns` keyword argument to specify columns to redact.\n>     - `redacted_columns` method in `ResourceMethods` combines `column_encryption_metadata.keys` with `@redacted_columns`.\n>   - **Models**:\n>     - Updated `Cert`, `GithubRunner`, `MinioCluster`, `MinioServer`, `PostgresResource`, `VictoriaMetricsResource`, `VictoriaMetricsServer`, and `Vm` to use `redacted_columns` argument in `ResourceMethods` plugin.\n>   - **Misc**:\n>     - Removed singleton `redacted_columns` methods from affected models.\n> \n>"
  },
  {
    "pr": 3440,
    "title": "Rhizome: support Ubiblk backed storage.",
    "description": "If a storage volume's vhost_block_backend_version param is set, then a Ubiblk installation is used instead of SPDK.\n\nLet `storage-root=/var/storage/${vm_name}/$disk-index/`. Then:\n- Ubiblk config is stored at `${storage-root}/vhost-backend.conf`.\n- Ubiblk metadata is stored at `$storage-root/metadata`.\n- A systemd-unit `${vm_name}-${disk-idx}-storage` is created to act as VM's storage device. It starts the Ubiblk's vhost-backend binary, stored at `/opt/vhost-block-backend/${version}/`.\n- Key Encryption Key (KEK) is communicated to the storage service using a pipe created at `${storage-root$}/kek.pipe`.\n- Storage service creates a vhost-user-blk socket at `${storage-root}/vhost.socket` which Cloud-Hypervisor connects to.",
    "ellipsis_summary": "Adds support for Ubiblk-backed storage in Rhizome, with configuration, metadata, and service management via systemd, and updates tests accordingly.\n> \n>   - **Behavior**:\n>     - Adds support for Ubiblk-backed storage in `StorageVolume` when `vhost_block_backend_version` is set.\n>     - Creates Ubiblk config at `vhost-backend.conf` and metadata at `metadata` in `storage_dir`.\n>     - Uses systemd service to manage Ubiblk backend, starting `vhost-backend` binary.\n>     - Communicates Key Encryption Key (KEK) via `kek.pipe`.\n>     - Creates vhost-user-blk socket for Cloud-Hypervisor connection.\n>   - **Classes and Functions**:\n>     - `StorageVolume`: Adds methods `prep_vhost_backend`, `vhost_backend_create_config`, `vhost_backend_create_metadata`, `vhost_backend_create_service_file`, and `vhost_backend_start`.\n>     - `VmSetup`: Updates `install_systemd_unit` to handle Ubiblk services.\n>   - **Tests**:\n>     - Expands `storage_volume_spec.rb` to test Ubiblk functionality, including config, metadata, and service file creation.\n> \n>"
  },
  {
    "pr": 3443,
    "title": "Switch to released version of Roda",
    "description": "Changes we were depending on have been released.",
    "ellipsis_summary": "Switch `roda` gem in `Gemfile` from specific commit to released version `>= 3.93`.\n> \n>   - **Gemfile Update**:\n>     - Change `roda` gem from specific commit `0e8c8067c4b84b402d72b10168c925c79fdc8016` to released version `>= 3.93`.\n> \n>"
  },
  {
    "pr": 3446,
    "title": "Postgres UI Revamp",
    "description": "As we add more and more features for PostgreSQL, it become difficult to navigate. So we decided to split the features into multiple pages. This PR does those splitting along with some clean up work. All tests are fixed as a separate commit, which is something I don't want to do usually. I prefer every commit to pass tests, however it was difficult to do that for such big refactoring.\n\nHere are some notable pages:\n|Overview    | Connections | Backups\n| -------- | ------- |------- |\n| ![Overview](https://github.com/user-attachments/assets/ba9e4d10-509d-40a0-8e2d-eebc08e93fa9) | ![Connection](https://github.com/user-attachments/assets/8e791008-7881-4195-92ec-a4344b67fbf3) | ![Backups](https://github.com/user-attachments/assets/90d77bfc-5aa1-4543-bee0-aa1e2c956deb) |",
    "ellipsis_summary": "Revamps PostgreSQL UI by splitting features into multiple pages, updating routes, and enhancing components for improved navigation and user experience.\n> \n>   - **UI Revamp**:\n>     - Splits PostgreSQL features into multiple pages: `overview`, `connection`, `charts`, `networking`, `resize`, `high-availability`, `read-replica`, `backup-restore`, `settings`.\n>     - Updates `show.erb` to render pages dynamically based on the selected submenu.\n>     - Adds new components like `icon_with_text.erb` for better UI representation.\n>   - **Routing and Redirection**:\n>     - Updates routes in `postgres.rb` to redirect to specific pages like `/overview`, `/settings`, etc.\n>     - Adjusts redirection logic for actions like `delete`, `promote`, `reset-superuser-password`.\n>   - **JavaScript and CSS**:\n>     - Adds animations in `tailwind.config.js` for UI elements.\n>     - Implements JavaScript for dynamic content updates in `app.js`.\n>   - **Testing**:\n>     - Updates tests in `postgres_spec.rb` to align with new page structure and functionalities.\n>     - Ensures tests cover new navigation and feature access scenarios.\n>   - **Miscellaneous**:\n>     - Changes `channel_binding=require` to `sslmode=require` in connection strings across multiple files.\n>     - Refactors components like `copyable_content.erb` and `revealable_content.erb` for enhanced functionality.\n> \n>"
  },
  {
    "pr": 3447,
    "title": "Emit metrics every 200 strands instead of 1000 strands",
    "description": "With 1000 strands, and Mezmo using 30 second batches in live view,\nthere are often 30 second periods where no records come in, which\ncomplicates the graphing.  Switching to 200 strands should flatten\nthe graphs and make them less spiky, at the cost of increased\nmetrics traffic and slightly less useful p99 numbers (since p99 of\n200 is only the 2nd from the top instead of the 10th from the top).\n\nInstead of hardcoding the offsets based on the batch size, calculate\nthem and store them in constants, so you can change the batch size\nby only changing one number.\n\nAlso add strands_per_second to respirate metrics. You can guesstimate\nbased on existing metrics, but this allows for looking at minimums and\nmaximums, which can be helpful to determine if some respirate processes\nare significantly slower than others.\n\nThis also fixes a nondeterministic dispatcher spec failure.",
    "ellipsis_summary": "Change metrics emission frequency to 200 strands and add `strands_per_second` metric in `dispatcher.rb`, with corresponding test updates.\n> \n>   - **Behavior**:\n>     - Change metrics emission frequency from 1000 to 200 strands in `dispatcher.rb` to reduce graph spikiness.\n>     - Add `strands_per_second` metric to `metrics_hash()` in `dispatcher.rb` for better performance analysis.\n>   - **Constants**:\n>     - Introduce `METRICS_EVERY`, `METRICS_MEDIAN`, `METRICS_P75`, `METRICS_P85`, `METRICS_P95`, `METRICS_P99`, and `METRICS_LAP_MULTIPLIER` in `dispatcher.rb` to calculate metrics offsets dynamically.\n>   - **Tests**:\n>     - Update `dispatcher_spec.rb` to reflect new metrics frequency and add tests for `strands_per_second` metric.\n>     - Fix nondeterministic test failure in `dispatcher_spec.rb` by adjusting expectations for partition notifications.\n> \n>"
  },
  {
    "pr": 3449,
    "title": "Use Ubiblk for volumes if installed on the host.",
    "description": "If any Ubiblk installations are enabled on a VmHost, the allocator will choose one at random, weighted by `allocation_weight`. Otherwise, SPDK will be used.\n\nCurrently, Ubiblk is not installed by default and must be set up manually by an operator. Therefore, the default behavior in production is to continue using SPDK.\n\nNote: The values for `num_queues` and `queue_size` are provisional and may change based on future performance and resource usage experiments.",
    "ellipsis_summary": "Introduce Ubiblk for volume allocation if available, defaulting to SPDK otherwise, with updates to models and allocation logic.\n> \n>   - **Behavior**:\n>     - If Ubiblk is installed on a `VmHost`, it is chosen randomly for volume allocation, weighted by `allocation_weight`. Otherwise, SPDK is used.\n>     - Default behavior remains SPDK unless Ubiblk is manually installed.\n>     - `num_queues` and `queue_size` are set provisionally in `vm.rb` and `vm_storage_volume.rb`.\n>   - **Models**:\n>     - `Vm` and `VmStorageVolume` updated to include `vhost_block_backend_version`, `num_queues`, and `queue_size`.\n>     - `VmStorageVolume` methods `num_queues` and `queue_size` return different values based on backend type.\n>   - **Allocator**:\n>     - `allocate_vhost_block_backend` method added to `allocator.rb` for selecting Ubiblk backends.\n>     - `create_storage_volumes` in `allocator.rb` updated to choose between Ubiblk and SPDK.\n>   - **Tests**:\n>     - Tests in `vm_spec.rb`, `vm_storage_volume_spec.rb`, and `allocator_spec.rb` updated to cover new allocation logic and backend selection.\n> \n>"
  },
  {
    "pr": 3450,
    "title": "Remove MockStringWithExitstatus class",
    "description": "We already use the \"Net::SSH::Connection::Session::StringWithExitstatus\"\nclass returned by `session.exec!` in some tests, so there's no need for\nan additional \"MockStringWithExitstatus\" class. It also raises the\nfollowing warning in CI.\n\n```\n/home/runner/work/ubicloud/ubicloud/spec/prog/kubernetes/upgrade_kubernetes_node_spec.rb:6: warning: method redefined; discarding old exitstatus\n/home/runner/work/ubicloud/ubicloud/spec/prog/kubernetes/upgrade_kubernetes_node_spec.rb:6: warning: method redefined; discarding old exitstatus=\n/home/runner/work/ubicloud/ubicloud/spec/prog/kubernetes/upgrade_kubernetes_node_spec.rb:8: warning: method redefined; discarding old initialize\n/home/runner/work/ubicloud/ubicloud/spec/model/vm_host_spec.rb:9: warning: previous definition of initialize was here\n```\n\nWe might add the \"StringWithExitstatus\" alias for it, but I couldn't get\nit to run with freeze.",
    "ellipsis_summary": "Remove `MockStringWithExitstatus` class and replace its usage with `Net::SSH::Connection::Session::StringWithExitstatus` in tests to resolve CI warnings.\n> \n>   - **Removal**:\n>     - Remove `MockStringWithExitstatus` class from `vm_host_spec.rb` and `upgrade_kubernetes_node_spec.rb`.\n>   - **Replacement**:\n>     - Replace `MockStringWithExitstatus` with `Net::SSH::Connection::Session::StringWithExitstatus` in `vm_host_spec.rb` for SSH command mocks.\n>     - Replace `MockStringWithExitstatus` with `Net::SSH::Connection::Session::StringWithExitstatus` in `upgrade_kubernetes_node_spec.rb` for Kubernetes client mocks.\n>   - **Warnings**:\n>     - Resolves CI warnings about method redefinitions in `upgrade_kubernetes_node_spec.rb`.\n> \n>"
  },
  {
    "pr": 3452,
    "title": "Add 15m timeout to CI",
    "description": "We have a few examples where CI tests get stuck and are canceled after 6\nhours, which is the default timeout for GitHub Actions. Since our CI\nruns in less than 10 minutes, it would be better to fail the job earlier\nif it gets stuck instead of waiting for 6 hours. This also encourages us\nto keep the CI fast and efficient.",
    "ellipsis_summary": "Add 15-minute timeout to `ruby-ci` job in `.github/workflows/ci.yml`.\n> \n>   - **CI Timeout**:\n>     - Adds `timeout-minutes: 15` to `ruby-ci` job in `.github/workflows/ci.yml` to prevent tests from running longer than 15 minutes.\n> \n>"
  },
  {
    "pr": 3455,
    "title": "Hide advanced playground settings by default",
    "description": "Dev preview\r\n\r\n\r\nhttps://github.com/user-attachments/assets/8909f26c-9a9b-4913-a653-04b7011154d9",
    "ellipsis_summary": ""
  },
  {
    "pr": 3456,
    "title": "Fix location nilref for postgres timelines",
    "description": "Since we started resolving to blob storage through location to accommodate s3 enabled regions, we started to have nil ref for timelines without location_id. Therefore, we are fixing it in this commit.",
    "ellipsis_summary": "Fix nil reference in `aws?` method of `PostgresTimeline` and add corresponding test.\n> \n>   - **Bug Fix**:\n>     - Fix nil reference in `aws?` method in `postgres_timeline.rb` by using safe navigation (`location&.aws?`).\n>   - **Tests**:\n>     - Add test in `postgres_timeline_spec.rb` to verify `blob_storage_client` returns correctly when `location` is nil.\n> \n>"
  },
  {
    "pr": 3458,
    "title": "Fix nondeterministic behavior and freezing in dispatcher specs in race conditions",
    "description": "Use queues to synchronize behavior to prevent the race conditions. Use timeouts on both queue pops and thread joins to that unexpected conditions result in test failures and not in freezing/deadlock.",
    "ellipsis_summary": "Improve `dispatcher_spec.rb` tests by using queues and timeouts to handle race conditions and prevent deadlocks.\n> \n>   - **Behavior**:\n>     - Use queues to synchronize thread operations in `#repartition_thread` tests in `dispatcher_spec.rb`.\n>     - Apply timeouts to thread joins and queue pops to prevent deadlocks and ensure tests fail on unexpected conditions.\n>   - **Tests**:\n>     - Modify `it \"emits for invalid notify\"` and `it \"repartitions for new processes and stale processes\"` to use queues and timeouts for synchronization.\n>     - Ensure `DB.notify` calls are properly sequenced using queues.\n> \n>"
  },
  {
    "pr": 3459,
    "title": "Dispatcher improvements and additional metrics",
    "description": "Additional metrics:\n\n* total_delay : Combines the scan delay, queue delay, and lease delay into a single number.  This should be the main metric we look at to determine overall respirate performance.\n\n* old_strand_percentage: Percentage of strands processed that were outside of the process's current partition. Along with lease acquire_percentage, this is useful for determining how the partitioning is working.  The ideal percentage is 0%.\n\nImprovements:\n\n* Consider strand delay for current process when determining which strands outside the partition to scan for.  This calculates the p95 of the total delay for the processing of the current partition's strands, adds 20% and and additional 5 seconds.  This should fix issues we have in production when the respirate processes get overloaded, as the lease acquired percentage can drop from 100% to around 80% in that case.\n\n* Don't convert the strands/second metric to integer, as the float number provides more accurate information.",
    "ellipsis_summary": "Add new metrics and improve dispatcher logic to handle strand delays and partitioning more effectively.\n> \n>   - **Metrics**:\n>     - Add `total_delay` metric in `strand.rb` to combine scan, queue, and lease delays.\n>     - Add `old_strand_percentage` metric in `dispatcher.rb` to track strands processed outside the current partition.\n>   - **Improvements**:\n>     - Modify `scan_old` in `dispatcher.rb` to consider `old_strand_delay` before processing strands outside the partition.\n>     - Update `metrics_hash` in `dispatcher.rb` to calculate `@current_strand_delay` using p95 of `total_delay`.\n>     - Change `strands_per_second` to float in `dispatcher.rb` for accuracy.\n>   - **Tests**:\n>     - Update `dispatcher_spec.rb` to test new metrics and behavior changes, including `scan_old` and `metrics_hash`.\n> \n>"
  },
  {
    "pr": 3460,
    "title": "Update timeout-minutes from 15 to 25",
    "description": "The arm CI can take close to 7 minutes for one run, and it runs twice, once in coverage mode and once in frozen mode.  Killing it at 15 minutes is probably a false positive. Increase to 25 minutes.",
    "ellipsis_summary": "Increase `timeout-minutes` from 15 to 25 in `.github/workflows/ci.yml` to prevent premature timeouts for ARM CI jobs.\n> \n>   - **CI Configuration**:\n>     - Update `timeout-minutes` from 15 to 25 in `.github/workflows/ci.yml` to accommodate longer ARM CI job durations.\n> \n>"
  },
  {
    "pr": 3462,
    "title": "Simplify Options Usage for PostgreSQL (SOUP)",
    "description": "The option.rb file for PostgreSQL (and other products) has become increasingly difficult to maintain over time. We've followed various approaches throughout its evolution, and as more features were added, those approaches began to overlap and resulted in a tangled mess of spaghetti code.\n\nThis PR aims to clean things up by:\n- Keeping only globally valid options in option.rb and removing all embedded business logic.\n- Moving the business logic into generate_postgres_options, where it was originally intended to reside.\n- Leveraging the option tree for validations, eliminating the need for separate validation functions for each parameter.",
    "ellipsis_summary": "Centralizes PostgreSQL option handling and validation in `generate_postgres_options`, improving maintainability and reducing redundancy.\n> \n>   - **Behavior**:\n>     - Centralizes PostgreSQL option business logic in `generate_postgres_options`.\n>     - Uses option tree for validations, removing redundant validation functions.\n>   - **Code Changes**:\n>     - Updates `postgres_post` in `postgres.rb` to use centralized option handling.\n>     - Refactors `generate_postgres_options` to include all business logic and validations.\n>     - Removes specific validation functions from `validation.rb`.\n>   - **Misc**:\n>     - Updates CLI commands and tests to reflect new option handling.\n>     - Renames and restructures option constants in `option.rb` for clarity.\n> \n>"
  },
  {
    "pr": 3463,
    "title": "Make cache entry clean up more explicit while destroying a repository",
    "description": "We should only call `repository.destroy` from nexus prog, since it has a\nstrand. So no need to keep destroy logic in the model, we can move it to\nthe prog similar to PG timeline.\n\nAlso we remove cache entries explicitly. Previously, we are expecting\nthe association_dependencies in the model to handle this. But we just\nneed to be sure that the all caches are cleared before destroy the blob\nstorage bucket. Making this explicit in the prog makes it clearer.",
    "ellipsis_summary": "Refactor repository destruction to explicitly handle cache cleanup and blob storage deletion in `GithubRepositoryNexus` program.\n> \n>   - **Behavior**:\n>     - Moves cache entry cleanup and blob storage destruction from `GithubRepository` model to `GithubRepositoryNexus` program.\n>     - Ensures cache entries are destroyed before blob storage in `destroy` method of `GithubRepositoryNexus`.\n>   - **Model Changes**:\n>     - Removes `after_destroy` callback from `GithubRepository`.\n>     - `destroy_blob_storage` now explicitly aborts multipart uploads before deleting the bucket.\n>   - **Program Changes**:\n>     - Adds cache entry cleanup and blob storage destruction to `destroy` method in `GithubRepositoryNexus`.\n>   - **Tests**:\n>     - Updates `github_repository_spec.rb` to remove tests for `after_destroy`.\n>     - Adds tests in `github_repository_nexus_spec.rb` for new destruction logic.\n> \n>"
  },
  {
    "pr": 3464,
    "title": "Add multiple regions for Ubi-on-AWS and refactor to use S3 sdk for AWS",
    "description": "## Add PgAwsAmi entity for multi region and version support\r\n\r\n## Cleanup unnecessary AWS regions and introduce us-west-2 with AMIs\r\nThis commit basically refactors the ami resolution code to make use of\r\nthe new PgAwsAmi entity. Since we will have multiple regions and\r\nmultiple versions of pg, we need to be able to programmatically modify\r\nthat logic. If we continued the old way, we would need to add new config\r\nvariables for new regions and versions.\r\nWe are also removing billing rates regarding us-east-1, us-west-1 since\r\nthese are not enabled, yet. This means we need to refactor the tests\r\nreferencing us-east-1 as well.\r\n\r\n## Use AWS S3 SDK client for bucket operations\r\nWe used to use our MinIO client to interract with AWS S3, too. However,\r\nthat has a bunch of problems because we manually created that to talk to\r\nour own minio clusters. Now, introducing multiple regions, we have to\r\neither dive deeper to refactor the client or we could simply introduce\r\nthe aws sdk. I chose latter considering it's much cheaper for\r\nengineering.\r\n\r\n## Refactor AWS Firewall Update to check multiple permissions for the same range\r\nThis code had a bug. When there were multiple cidr definitions for the\r\nsame port ranges, it would only check the first cidr range. Now, we\r\nperform the check for all of the cidr ranges and identify them\r\nindividually. We also refactor the mapping so that it is handled in a\r\nsingle iteration.",
    "ellipsis_summary": "----\r\n\r\n> [!IMPORTANT]\r\n> Add support for multiple AWS regions and refactor S3 operations to use AWS SDK, updating models, migrations, and tests accordingly.\r\n> \r\n>   - **Behavior**:\r\n>     - Adds support for multiple AWS regions in `option.rb` by changing `AWS_LOCATIONS` to `us-west-2`.\r\n>     - Refactors S3 operations in `postgres_timeline.rb` to use AWS SDK instead of MinIO client.\r\n>     - Updates `billing_rates.yml` to include new AWS region `us-west-2`.\r\n>   - **Models**:\r\n>     - Introduces `PgAwsAmi` model in `pg_aws_ami.rb` for managing AWS AMI IDs per region and version.\r\n>     - Adds migration `20250617_add_aws_ami.rb` to create `pg_aws_ami` table.\r\n>     - Updates `location.rb` to fetch AMI ID using `PgAwsAmi`.\r\n>   - **Tests**:\r\n>     - Updates various test files to reflect changes in AWS region handling, such as `instance_spec.rb`, `nic_spec.rb`, and `vpc_spec.rb`.\r\n>     - Modifies tests in `postgres_timeline_spec.rb` to validate AWS SDK integration.\r\n>     - Adjusts tests in `private_location_spec.rb` and `postgres_spec.rb` to handle new region configurations.\r\n> \r\n>"
  },
  {
    "pr": 3465,
    "title": "Use NUL delimiter for xargs in github actions",
    "description": "Some `encoded_jit_config` values can interact badly with `xargs`'s quoting rules, which are not of that of the shell, but of xargs's own, similar design (see the first few paragraphs of the manual page)\n\nIn 29cbec28c, I packed the token in `xargs` to avoid it being emitted in our log telemetry, as we don't save stdin, because we customarily use it for secrets.\n\nBecause we're only packing a single value for a single invocation of the subcommand, we can use the NUL byte delimitation mode of `xargs` to evade its own interpretation of spaces and quotes, so long as `encoded_jit_config` is not binary. That no NUL byte appears in stdin is fine: the end-of-file condition when emitting the token is enough.",
    "ellipsis_summary": "Change `xargs` command in `github_runner.rb` to use NUL byte delimiter for robust handling of `encoded_jit_config`.\n> \n>   - **Behavior**:\n>     - Change `xargs` command in `github_runner.rb` to use `-0` option for NUL byte delimiter, ensuring robust handling of `encoded_jit_config`.\n>   - **Tests**:\n>     - Update test in `github_runner_spec.rb` to expect `xargs -0I{}` command format.\n> \n>"
  },
  {
    "pr": 3467,
    "title": "Split VM creation page into GPU/non-GPU if get_ff_gpu_vm feature flag is set",
    "description": "This can potentially make it easier to select a GPU instance.\n\nWith the feature flag set, instead of one button link to the create page, there are two:\n![localhost_3000_project_pjkvsq7s5e5a7mjtsdjvetweyk_vm](https://github.com/user-attachments/assets/cf5066a7-21be-44d5-abad-3412d0fb880d)\n![localhost_3000_project_pjkvsq7s5e5a7mjtsdjvetweyk_vm (1)](https://github.com/user-attachments/assets/74524ab4-92ed-4661-bb35-74fd8ee5224f)\n\nThe \"Create Virtual Machine\" link does not show any GPU options:\n\n![localhost_3000_project_pjkvsq7s5e5a7mjtsdjvetweyk_vm_create_gpu=f](https://github.com/user-attachments/assets/51cc699f-89ab-4d04-b471-e31084aa0061)\n\nThe \"Create GPU Virtual Machine\" only shows valid options for a GPU configuration:\n\n![localhost_3000_project_pjkvsq7s5e5a7mjtsdjvetweyk_vm_create_gpu=true](https://github.com/user-attachments/assets/0916c29a-89db-4959-b1ad-457e577eda3c)\n\nIf users have a direct link to the old page, it works the same as before, showing both GPU and non GPU options:\n\n![localhost_3000_project_pjkvsq7s5e5a7mjtsdjvetweyk_vm_create](https://github.com/user-attachments/assets/e9c40536-96cc-4804-9588-912477086070)\n\nIgnore the fact that the screenshots show the GPU VM in Finland.  My test host is in Finland, and I had to add billing rates to get things to work in development.\n\nRequested by @umurc",
    "ellipsis_summary": "Split VM creation page into GPU and non-GPU options based on feature flag, with UI updates and tests.\n> \n>   - **Behavior**:\n>     - Split VM creation page into GPU and non-GPU options if `get_ff_gpu_vm` feature flag is set.\n>     - `generate_vm_options` in `helpers/vm.rb` now considers `@show_gpu` to filter GPU options.\n>     - Redirects to error if no GPU VMs are available when `show_gpu` is true.\n>   - **UI Changes**:\n>     - `views/vm/index.erb` and `views/vm/create.erb` updated to show separate buttons for \"Create Virtual Machine\" and \"Create GPU Virtual Machine\" based on feature flag.\n>     - `views/components/empty_state.erb` supports multiple buttons.\n>   - **Tests**:\n>     - Added tests in `spec/routes/web/vm_spec.rb` to verify GPU and non-GPU VM creation paths and error handling.\n> \n>"
  },
  {
    "pr": 3468,
    "title": "Remove sampling strands for metrics",
    "description": "The new respirate provides much more accurate metrics, so it's not worth keeping these sampled metrics.",
    "ellipsis_summary": "Remove verbose logging for sampling strands in `strand.rb` and related tests in `strand_spec.rb`.\n> \n>   - **Behavior**:\n>     - Removes verbose logging logic in `strand.rb` for sampling strands, which was based on a random condition.\n>     - Deletes related tests in `strand_spec.rb` that checked for verbose logging behavior.\n>   - **Misc**:\n>     - Removes `verbose_logging` method and its conditional logic in `strand.rb`.\n>     - Deletes tests for verbose logging in `strand_spec.rb`.\n> \n>"
  },
  {
    "pr": 3469,
    "title": "Handle Octokit::NotFound for runner recycle",
    "description": "- **Remove the unused GCR mirror setup**\n  We have already moved the GCR mirror setup to image generation at\n  https://github.com/ubicloud/runner-images/pull/16\n  \n  There's no need to do it here again.\n  \n\n- **Handle Octokit::NotFound for deleted runners during recycle condition check**\n  When deciding to recycle a runner, we query the GitHub API to ensure\n  it’s not currently running a job, protects against delayed webhook\n  events. If the runner has already been deleted, the API raises\n  `Octokit::NotFound`. This case should be handled similarly to the\n  destroy label logic, where we also verify if the runner is busy.\n  \n  This commit moves the busy-check logic into a separate method to handle\n  both scenarios consistently.\n  \n\n- **Add deadline for recycling runners**\n  In rare cases, a runner marked for recycling may get stuck due to GitHub\n  API errors, and we lose visibility into its state. We've seen a few\n  instances of long-running, stuck runners in production.\n  \n  This change adds a 2-hour deadline to the recycling process so we can\n  detect and alert on such cases. While recycling typically completes\n  within a minute, the runner might be busy and delay recycling, so the\n  deadline is intentionally generous to avoid false positives, aligning\n  with the existing 2-hour deadline used for the destroy label.\n  \n\n- **Register deadline for runner in wait state**\n  GitHub allows self-hosted runners to stay active for up to 5 days. So we\n  shouldn't have any runner in the \"wait\" state beyond that limit.\n  \n  https://docs.github.com/en/actions/hosting-your-own-runners/managing-self-hosted-runners/usage-limits-for-self-hosted-runners\n  \n  This change adds a safety check by registering a 5-day deadline for\n  runners in the wait state. With this, all labels in the runner prog\n  now have associated deadlines to help detect and recover from stuck\n  states.",
    "ellipsis_summary": "Handle `Octokit::NotFound` for runner recycling, add deadlines for recycling and wait states, and remove unused GCR mirror setup.\n> \n>   - **Behavior**:\n>     - Handle `Octokit::NotFound` in `busy?` method in `github_runner.rb` to manage deleted runners during recycle checks.\n>     - Add 2-hour deadline for recycling runners in `wait` method to detect stuck runners.\n>     - Register 5-day deadline for runners in \"wait\" state in `wait` method.\n>   - **Code Structure**:\n>     - Move busy-check logic to `busy?` method in `github_runner.rb` for consistent handling.\n>   - **Cleanup**:\n>     - Remove unused GCR mirror setup code from `setup_environment` in `github_runner.rb`.\n>   - **Tests**:\n>     - Add test for handling `Octokit::NotFound` in `wait` method in `github_runner_spec.rb`.\n> \n>"
  },
  {
    "pr": 3470,
    "title": "Check active session before the root route",
    "description": "Fixes issue if the session has an account id, but the account has been closed, as closing the account deletes all active sessions.\n\nTo be extra sure to avoid the error, also check current_account instead of rodauth.logged_in? in the root route.",
    "ellipsis_summary": "Move `rodauth.check_active_session` before root route logic in `clover.rb` to ensure session is active and replace `rodauth.logged_in?` with `current_account` check.\n> \n>   - **Behavior**:\n>     - Move `rodauth.check_active_session` before root route logic in `clover.rb` to ensure session is active before checking `current_account`.\n>     - Fixes issue where closed accounts (which delete sessions) could cause errors if session has an account id.\n>   - **Logic**:\n>     - Replace `rodauth.logged_in?` with `current_account` check in root route to ensure account is valid and active.\n> \n>"
  },
  {
    "pr": 3471,
    "title": "More respirate improvements",
    "description": "Improvements:\n\n* For strands with expired leases, calculate delay based on lease time instead of schedule time, to prevent the delay numbers showing 120 second spikes when processing a strand with an expired lease.\n\n* Make respirate sleep time dependent on dispatcher state.  This shouldn't do much in production currently, but it is necessary step to prevent starvation when decreasing the queue size ratio, which is something I'd like to try to see if it results in lower overall delay.",
    "ellipsis_summary": "Improve `respirate` by handling expired leases and dynamically adjusting sleep duration based on dispatcher state.\n> \n>   - **Behavior**:\n>     - Calculate delay based on lease time for expired leases in `Strand#respirate_metrics`.\n>     - Adjust `respirate` sleep duration based on dispatcher state in `Dispatcher#sleep_duration`.\n>   - **Config**:\n>     - Change `dispatcher_queue_size_ratio` type from `int` to `float` in `config.rb`.\n>   - **Metrics**:\n>     - Add `lease_expired_percentage` to metrics in `Dispatcher#metrics_hash`.\n>   - **Tests**:\n>     - Add tests for expired lease handling in `dispatcher_spec.rb`.\n>     - Add tests for dynamic sleep duration in `dispatcher_spec.rb`.\n> \n>"
  },
  {
    "pr": 3473,
    "title": "Allow 100GB of free cache storage if premium runners are enabled",
    "description": "",
    "ellipsis_summary": "> [!IMPORTANT]\n> Add `cache_storage_gib` method to `GithubInstallation` for cache storage limits, update cache handling and display logic, and add tests.\n> \n>   - **Behavior**:\n>     - Adds `cache_storage_gib` method in `GithubInstallation` to return 100GB if premium runners are enabled, otherwise returns effective quota.\n>     - Updates cache cleanup logic in `cleanup_cache` in `github_repository_nexus.rb` to use `cache_storage_gib` for storage limit.\n>     - Modifies cache quota display in `github.rb` to use `cache_storage_gib`.\n>   - **Tests**:\n>     - Adds tests for `cache_storage_gib` in `github_installation_spec.rb` to verify behavior with and without premium runners.\n> \n>"
  },
  {
    "pr": 3476,
    "title": "Add dump_sequel_caches rake task",
    "description": "This converts the marshalled cache file to a text based file. The reason to have this is it allows you to debug changes in cache files.  If you are rebasing a commit and there is a conflict in a cache file, you can run this before the commit, run this after the commit, and then `diff -ru` the two directories, to see what actually changed in the cache.",
    "ellipsis_summary": "Adds `dump_sequel_caches` task to `Rakefile` to convert marshalled cache files to text format for easier debugging and diffing.\n> \n>   - **New Task**:\n>     - Adds `dump_sequel_caches` task to `Rakefile` to convert marshalled cache files to text format.\n>     - Handles `schema`, `index`, `static_cache`, and `pg_auto_constraint_validations` cache types.\n>     - Outputs text files to a timestamped directory for easy diffing.\n>   - **Misc**:\n>     - Updates description of `refresh_sequel_caches` task in `Rakefile`.\n> \n>"
  },
  {
    "pr": 3477,
    "title": "Don't use cached children in `donate`.",
    "description": "E2E tests failed because a `Test::Prog::Vm`'s strand went back from `ping_google` to `verify_extra_disks`. `Test::Prog::Vm` is run in two ways: Either by the scheduler or by a call to `donate` in `Prog::Test::VmGroup.wait_verify_vms`.\r\n\r\nWe suspect that the issue we saw might be because of caching in `donate`, so this is a try to fix that issue.",
    "ellipsis_summary": "----\r\n\r\n> [!IMPORTANT]\r\n> Modify `donate` method to use `children_dataset` for up-to-date child labels and update tests accordingly.\r\n> \r\n>   - **Behavior**:\r\n>     - Modify `donate` method in `prog/base.rb` to use `strand.children_dataset` instead of `strand.children` to ensure up-to-date child labels.\r\n>   - **Tests**:\r\n>     - Update `install_dnsmasq_spec.rb` to mock `strand.children_dataset` in `donate` test.\r\n>     - Update `provision_kubernetes_node_spec.rb` to mock `strand.children_dataset` in `donate` test.\r\n>     - Update `upgrade_kubernetes_node_spec.rb` to mock `strand.children_dataset` in `donate` test.\r\n> \r\n>"
  },
  {
    "pr": 3478,
    "title": "Move GPU option above server size option on Create GPU Virtual Machine page",
    "description": "You cannot put it above server family option, because the content generation code does not allow an option to be rendered before options it depends on.\n\n![localhost_3000_project_pjkvsq7s5e5a7mjtsdjvetweyk_vm_create_show_gpu=t](https://github.com/user-attachments/assets/275d1266-5ab2-42e9-bc7d-7ec2e58fc8b1)\n\nRequested by @umurc",
    "ellipsis_summary": "Reorder GPU option above server size option on Create GPU Virtual Machine page in `views/vm/create.erb`.\n> \n>   - **Behavior**:\n>     - Move GPU option above server size option in `views/vm/create.erb`.\n>     - GPU option cannot be moved above server family option due to dependency constraints.\n>   - **Implementation**:\n>     - Modify `elements` array to conditionally prepend GPU option if `@show_gpu` is true.\n>     - Concatenate `elements` with `form_elements` to reflect new order.\n> \n>"
  },
  {
    "pr": 3479,
    "title": "Clear cached instance state in Strand#take_lease_and_reload",
    "description": "This avoids the use of instance_variable_delete, as that doesn't play well with object shapes.  Internal code should always call the subject method, and not access `@subject` directly.",
    "ellipsis_summary": "In `Strand#take_lease_and_reload`, set `@subject` to `:reload` to clear cached instance state, ensuring `subject` reloads after lease, with tests verifying this behavior.\n> \n>   - **Behavior**:\n>     - In `Strand#take_lease_and_reload`, set `@subject` to `:reload` to clear cached instance state, ensuring `subject` reloads after lease.\n>     - Avoids `instance_variable_delete` for better object shape handling.\n>   - **Tests**:\n>     - Add test in `strand_spec.rb` to verify cached instance state is cleared and reloaded in `take_lease_and_reload`.\n> \n>"
  },
  {
    "pr": 3480,
    "title": "Make Service URL of k8s clusters copy-able",
    "description": "I find myself doing a lof of copy-paste for the service URL, so why not make it easier to copy.",
    "ellipsis_summary": "Add `{ copyable: true }` to Service URL in `show.erb` for easier copying when Kubernetes cluster is running.\n> \n>   - **Behavior**:\n>     - Adds `{ copyable: true }` to the Service URL in `show.erb` for Kubernetes clusters, making it easier to copy when the cluster is running.\n> \n>"
  },
  {
    "pr": 3481,
    "title": "Revert the use of the ipv4_address table to speed up VmHost#ip4_random_vm_network",
    "description": "Revert \"Use NOT EXISTS instead of NOT IN in VmHost#ip4_random_vm_network\"\n\nThis reverts commit 5f47eedc33309b771de81844ac14ab7a8c3f6342.\n\nRevert \"Update/remove no longer accurate comments\"\n\nThis reverts commit 6c17867cec48b051e5792b005e52d26db9dc3f7d.\n\nRevert \"Use early return in Address#populate_ipv4_addresses\"\n\nThis reverts commit f1f720ecfb0f2d395f79fb6cb8775fb7df00ec95.\n\nRevert \"Use described_class.new_with_id in VmHost specs\"\n\nThis reverts commit fa9e0b5a3c860e328185c2931672d8a78a2c3a41.\n\nRevert \"Use ipv4_address table to speed up VmHost#ip4_random_vm_network\"\n\nThis reverts commit e8c2945c9d90292a8cab477f1763fb3e2407dcdb.",
    "ellipsis_summary": "Reverts changes to `VmHost#ip4_random_vm_network` and `Address#populate_ipv4_addresses`, removing `ipv4_address` table usage.\n> \n>   - **Behavior**:\n>     - Reverts `VmHost#ip4_random_vm_network` to previous logic, removing use of `ipv4_address` table.\n>     - Reverts `Address#populate_ipv4_addresses` to previous logic, removing early return.\n>   - **Associations**:\n>     - Removes `assigned_vm_addresses` association from `VmHost`.\n>   - **Tests**:\n>     - Reverts tests in `vm_host_spec.rb` related to `ipv4_address` table population and usage.\n>     - Removes tests for `ip4_random_vm_network` using `ipv4_address` table.\n>   - **Misc**:\n>     - Reverts comments in `address.rb` and `vm_host.rb` to previous state.\n> \n>"
  },
  {
    "pr": 3483,
    "title": "Fix ipv4_address table population in Address#populate_ipv4_addresses",
    "description": "Change\n\nid != routed_to_host_id\n\nto\n\nvm_host.sshable.host != cidr.network.to_s\n\nWe do not consistently use the VmHost id as the primary Address id (it is not done at all for Hetzner hosts), so the next simplest way to check is check the sshable address.\n\nExisting installations that previously ran\nAddress#populate_ipv4_addresses can be fixed using:\n\nDB[:ipv4_address].where(ip: Sshable.where(id: VmHost.select(:id)).select(Sequel.cast(:host, :inet))).delete",
    "ellipsis_summary": "Fix `populate_ipv4_addresses` in `address.rb` to exclude host's sshable IP address and add corresponding test.\n> \n>   - **Behavior**:\n>     - In `address.rb`, `populate_ipv4_addresses` now excludes the host's sshable IP address by comparing `vm_host.sshable.host` with `cidr.network.to_s`.\n>     - Existing installations can be fixed with a provided SQL command to delete incorrect entries.\n>   - **Tests**:\n>     - Added test in `address_spec.rb` to ensure the host's sshable IP address is not populated in `ipv4_address` table.\n> \n>"
  },
  {
    "pr": 3484,
    "title": "Revert \"Revert the use of the ipv4_address table to speed up VmHost#ip4_random_vm_network\"",
    "description": "This reverts commit e95a6bcc9982261b69ee20cfe0145f63f294fa05.\n\nThis includes a conflict fix for the previous commit.",
    "ellipsis_summary": "Reverts previous commit to restore `ipv4_address` table usage in `VmHost#ip4_random_vm_network`, optimizing IP allocation logic and updating tests.\n> \n>   - **Behavior**:\n>     - Reverts previous commit to restore use of `ipv4_address` table in `VmHost#ip4_random_vm_network`.\n>     - Adjusts logic in `populate_ipv4_addresses` in `address.rb` to handle IPv4 addresses correctly.\n>     - Updates `ip4_random_vm_network` in `vm_host.rb` to use `ipv4_address` table for faster IP allocation.\n>   - **Tests**:\n>     - Updates tests in `vm_host_spec.rb` to reflect changes in IP allocation logic.\n>     - Adds test cases for scenarios when `ipv4_address` table is populated and when it is not.\n> \n>"
  },
  {
    "pr": 3486,
    "title": "Fix AssignedVmAddress#vm association",
    "description": "The foreign key is in the current table, so this should be a many_to_one association.  While here, remove the unnecessary :key option for address association.",
    "ellipsis_summary": "Fix `AssignedVmAddress` associations by changing `vm` to `many_to_one` and simplifying `address` association.\n> \n>   - **Associations**:\n>     - Change `vm` association from `one_to_one` to `many_to_one` in `AssignedVmAddress` to correctly reflect foreign key relationship.\n>     - Remove unnecessary `:key` option from `address` association in `AssignedVmAddress`.\n> \n>"
  },
  {
    "pr": 3487,
    "title": "Emit log for Sequel::SerializationFailure errors",
    "description": "Additionally, don't leak internal details about the error, use a generic error message.  Previously, the exception wasn't displayeds to web users, but I think it was displayed in API responses.",
    "ellipsis_summary": "Emit log for `Sequel::SerializationFailure` errors and replace detailed error messages with a generic message in `clover.rb`.\n> \n>   - **Error Handling**:\n>     - In `clover.rb`, for `Sequel::SerializationFailure` errors, emit a log using `Clog.emit` with `Util.exception_to_hash(e)`.\n>     - Replace detailed error message with a generic message: \"There was a temporary error attempting to make this change, please try again.\"\n>   - **API Responses**:\n>     - Prevents leaking internal error details in API responses by using a generic error message.\n> \n>"
  },
  {
    "pr": 3490,
    "title": "Make `SpdkSetup.prep` idempotent in Ubuntu 24.04.",
    "description": "This function was intended to be idempotent. In Ubuntu 22.04, when the `spdk` user already existed, we got the following error:\n\n```\nWarning: The home dir /home/spdk you specified already exists.\nadduser: The user `spdk' already exists.\n```\n\nIn Ubuntu 24.04, this has changed to:\n\n```\ninfo: The home dir /home/spdk you specified already exists.\n\nfatal: The user `spdk' already exists.\n```\n\nThis PR changes the regex to catch both cases.",
    "ellipsis_summary": "Update `SpdkSetup.prep` to handle user existence errors in Ubuntu 22.04 and 24.04 by modifying regex and adding tests.\n> \n>   - **Behavior**:\n>     - Update `SpdkSetup.prep` in `spdk_setup.rb` to handle user existence error messages for both Ubuntu 22.04 and 24.04.\n>     - Modify regex to match both \"adduser: The user `spdk' already exists.\" and \"fatal: The user `spdk' already exists.\".\n>   - **Tests**:\n>     - Add test for Ubuntu 24.04 user existence case in `spdk_setup_spec.rb`.\n>     - Ensure existing test for Ubuntu 22.04 user existence case remains valid.\n> \n>"
  },
  {
    "pr": 3491,
    "title": "Simplify Prog#reap and #leaf",
    "description": "With the change to donate to use children_dataset, there isn't a need for reap and leaf to use the cached children association.\n\nWhile here, remove the lease IS NULL condition, since lease can no longer be NULL. Also, use semaphores_dataset for further simplification.",
    "ellipsis_summary": "Simplifies `reap` and `leaf` methods by removing unnecessary conditions and updating usage across multiple files, enhancing efficiency and consistency.\n> \n>   - **Behavior**:\n>     - Simplifies `reap` and `leaf` methods by removing `lease IS NULL` condition and using `semaphores_dataset`.\n>     - Updates `reap` to handle child strands more efficiently, with options for `hop`, `reaper`, `nap`, and `fallthrough`.\n>   - **Code Changes**:\n>     - Modifies `reap` calls in `inference_endpoint_replica_nexus.rb`, `inference_router_replica_nexus.rb`, and `base.rb` to use new `reap` logic.\n>     - Updates `destroy` methods in `kubernetes_cluster_nexus.rb` and `kubernetes_nodepool_nexus.rb` to use `reap` with block.\n>     - Adjusts test cases in `inference_endpoint_replica_nexus_spec.rb`, `inference_router_replica_nexus_spec.rb`, and `base_spec.rb` to align with new `reap` behavior.\n>   - **Testing**:\n>     - Updates test cases to reflect changes in `reap` logic, ensuring correct behavior in various scenarios.\n>     - Ensures all tests pass with the new `reap` implementation.\n> \n>"
  },
  {
    "pr": 3494,
    "title": "Fix a nondeterministic InferenceRouterReplicaNexus spec failure",
    "description": "Sort the endpoints so the test passes with either order.",
    "ellipsis_summary": "Fixes nondeterministic test failure in `inference_router_replica_nexus_spec.rb` by sorting `endpoints` by `id`.\n> \n>   - **Behavior**:\n>     - Fixes nondeterministic test failure in `inference_router_replica_nexus_spec.rb` by sorting `endpoints` by `id`.\n>     - Ensures test passes regardless of endpoint order.\n> \n>"
  },
  {
    "pr": 3495,
    "title": "Absorb leaf into reap",
    "description": "Reviewing leaf usage in progs, it always occurs right after reap. Combining leaf and reap methods avoids a redundant query for the strand's children.\n\nIt's typical for nap or donate to be called after the leaf check after reap.  Also build this into reap, by calling donate by default, or nap if a nap keyword argument is given.\n\nThere are a few cases where reap was called without leaf/donate. Add a fallthrough keyword argument to support this, so if there are no children, it does not call either nap or donate\n\nVm::HostNexus#wait_prep and Kubernetes::UpgradeKubernetesNode#wait_new_node both need the return value of the reapable child(ren). Add a reaper keyword argument for this, which is called once for each child.\n\nThe most common pattern for using reap/leaf/donate was:\n\n```ruby\nreap\nhop_download_lb_cert if leaf?\ndonate\n```\n\nThis turns into:\n\n```ruby\nreap(:download_lb_cert)\n```\n\nThe second most common pattern was:\n\n```ruby\nreap\ndonate unless leaf?\npop \"upgrade cancelled\" # or other code\n```\n\nThis turns into:\n\n```ruby\nreap { pop \"upgrade cancelled\" }\n```\n\nIn a few places, I changed operations on strand.children to strand.children_dataset.  Now that we are no longer using cached children by default, it's better to do these checks in the database intead of in Ruby.  These places deserve careful review:\n\n* Prog::Minio::MinioServerNexus#unavailable\n* Prog::Postgres::PostgresResourceNexus#wait\n* Prog::Postgres::PostgresServerNexus#unavailable\n\nFor Prog::Vnet::LoadBalancerNexus#wait_update_vm_load_balancers, I removed a check on the children completely. It was checking for an exitval using children_dataset directly after reap, which should only be true if there was still an active lease for the child.  This also deserves careful review.\n\nThis broke many mocked tests.  This fixes the mocked tests to use database-backed objects, ensuring that we are testing observable behavior and not implementation details.",
    "ellipsis_summary": "Refactor `reap` method to integrate `leaf` and `donate` functionality, streamline child strand handling, and update tests accordingly.\n> \n>   - **Behavior**:\n>     - Refactor `reap` method in `base.rb` to absorb `leaf` and `donate` functionality, reducing redundant queries.\n>     - Introduce `hop`, `reaper`, `nap`, and `fallthrough` keyword arguments to handle different scenarios in `reap`.\n>     - Update `reap` usage across various classes, such as `Vm::HostNexus`, `Kubernetes::UpgradeKubernetesNode`, and `LoadBalancerNexus`.\n>   - **Tests**:\n>     - Update test cases in `*_spec.rb` files to align with the refactored `reap` method.\n>     - Modify mock objects and expectations to reflect changes in child strand handling.\n>   - **Misc**:\n>     - Remove `leaf` and `donate` methods where no longer needed.\n>     - Ensure database-backed objects are used in tests to verify observable behavior.\n> \n>"
  },
  {
    "pr": 3496,
    "title": "umount at `verify_extra_disks` if disk is already mounted.",
    "description": "If `verify_extra_disks` fails after mounting the disk, a retry will always fail because the `sudo mkfs.ext4` command will error out with:\n\n```\nmke2fs 1.46.5 (30-Dec-2021)\n/path/to/disk is mounted; will not make a filesystem here!\n```\n\nThis change makes the label retriable by umounting if already mounted.",
    "ellipsis_summary": "Add logic to unmount disk if already mounted in `verify_extra_disks` to allow retries, with tests for new behavior.\n> \n>   - **Behavior**:\n>     - In `verify_extra_disks` in `vm.rb`, added logic to unmount disk if already mounted before formatting with `mkfs.ext4`.\n>     - Introduced `umount_if_mounted` method to handle unmounting logic.\n>   - **Tests**:\n>     - Added tests for `umount_if_mounted` in `vm_spec.rb` to ensure it unmounts if mounted and handles errors correctly.\n>     - Updated `verify_extra_disks` test in `vm_spec.rb` to check for unmounting behavior.\n> \n>"
  },
  {
    "pr": 3497,
    "title": "Combine donate and reap",
    "description": "This builds on #3495 and #3493, and takes the additional step of combing donate into reap.\n\nWith #3495, Prog::Base#donate is only called by Prog::Base#reap (outside a couple of test calls that don't need to call it).\n\nMoving donate into reap avoids a redundant child query. When we would call donate, we already know which children are active, because reap already selected all children, and separated them into reapable children and active children.\n\n#3495 and #3493 are independent. Since you cannot base a PR on a merge of multiple other PRs, this includes #3493 as the first commit, and adds a second commit for combining donate into reap.\n\nA future potential improvement is to nap for a longer time by default in reap (could do 120-3600 seconds instead of 1 second), and have exiting child progs schedule their parent prog if the parent prog has no longer has active children. I'm not sure whether that will result in any negative side effects, though.",
    "ellipsis_summary": "Combines `donate` into `reap` in `prog/base.rb`, optimizing child strand handling and updating tests accordingly.\n> \n>   - **Behavior**:\n>     - Combines `donate` into `reap` in `prog/base.rb`, removing redundant child queries.\n>     - `reap` now directly handles active children by running them and napping.\n>   - **Tests**:\n>     - Updates `prog/test.rb` to replace `donate` calls with `nap 1` in `increment_semaphore` and `decrement_semaphore`.\n>     - Adds test in `spec/prog/base_spec.rb` to ensure failure in one child strand does not affect others.\n> \n>"
  },
  {
    "pr": 3500,
    "title": "Fix CA certificate download button",
    "description": "Connection information is now served from its own subpage, so `request.path` is not the correct way to generate the API endpoint.",
    "ellipsis_summary": "----\r\n\r\n> [!IMPORTANT]\r\n> Fixes CA certificate download link in `views/postgres/connection.erb` by using `@project_data[:path]` and `@pg.path` instead of `request.path`.\r\n> \r\n>   - **Fix**:\r\n>     - Corrects CA certificate download link in `views/postgres/connection.erb` by using `@project_data[:path]` and `@pg.path` instead of `request.path`.\r\n>     - Ensures correct API endpoint generation for CA certificate download.\r\n> \r\n>"
  },
  {
    "pr": 3501,
    "title": "Improve restarter and respirate exit handling",
    "description": "This has restarter wait until respirate exits before exiting.  It also fixes some edge case in respirate shutdown.\n\nThe last commit here allows up to 2 additional seconds for respirate to finish processing strands.  That should reduce the percentage of expired strands during each deploy, at the cost of more time when no respirate process is handling new strands.",
    "ellipsis_summary": "Improves shutdown handling by ensuring `restarter` waits for `respirate` to exit and allowing `respirate` extra time to finish processing strands.\n> \n>   - **Behavior**:\n>     - `restarter` now waits for `respirate` to exit before exiting itself, handling `TERM` signal to terminate `respirate` process in `bin/restarter`.\n>     - `respirate` allows up to 2 additional seconds for strand threads to exit in `bin/respirate`.\n>   - **Shutdown Handling**:\n>     - In `scheduling/dispatcher.rb`, `shutdown_and_cleanup_threads` now uses `SizedQueue#close` for `@strand_queue` and pushes `nil` to `@metrics_queue` to ensure proper shutdown.\n>     - `strand_thread` in `scheduling/dispatcher.rb` now handles `ClosedQueueError` during shutdown.\n>   - **Misc**:\n>     - Minor changes to signal handling and process management in `bin/restarter` and `bin/respirate`.\n> \n>"
  },
  {
    "pr": 3502,
    "title": "Use PrivateSubnet#nics_dataset to simplify code",
    "description": "Recommended in https://github.com/ubicloud/ubicloud/pull/3390#discussion_r2154363150 , but I didn't get to it when merging the related PR.",
    "ellipsis_summary": "Simplifies code in `private_subnet.rb` by using `ps.nics_dataset` instead of direct `nic` table query.\n> \n>   - **Code Simplification**:\n>     - Replaces direct query to `DB[:nic]` with `ps.nics_dataset` in `routes/project/location/private_subnet.rb` to select `vm_id` for exclusion in `vms_dataset`.\n> \n>"
  },
  {
    "pr": 3503,
    "title": "Use the ipv4_address table in Allocator",
    "description": "I think this fixes handling of leaseweb, because the calculation used previously will assume leaseweb can use the first and last addresses in the subnet.  Using the ipv4_address table should fix that.",
    "ellipsis_summary": "Use `ipv4_address` table in `Allocator` to correctly handle IPv4 address availability, fixing Leaseweb issues.\n> \n>   - **Behavior**:\n>     - Use `ipv4_address` table in `candidate_hosts()` in `allocator.rb` to determine available IPv4 addresses.\n>     - Fixes issue with Leaseweb by not assuming first and last addresses in subnet are available.\n>   - **SQL Changes**:\n>     - Replace joins on `total_ipv4` and `used_ipv4` with `available_ipv4` in `candidate_hosts()`.\n>     - Modify `with` clause to use `ipv4_address` table for available IPv4 calculation.\n>   - **Tests**:\n>     - Update tests in `allocator_spec.rb` to reflect changes in IPv4 address handling.\n>     - Add test cases to ensure correct behavior when IPv4 addresses are available or not.\n> \n>"
  },
  {
    "pr": 3504,
    "title": "Use Ubiblk for E2E tests.",
    "description": "This is done by creating a VhostBlockBackend with non-zero allocation_weight for the VmHost.",
    "ellipsis_summary": "Introduce `VhostBlockBackend` for E2E tests by updating `VmHost` model, test programs, and specifications to integrate and verify the new backend.\n> \n>   - **Behavior**:\n>     - Introduces `VhostBlockBackend` for E2E tests by creating a `VhostBlockBackend` with non-zero `allocation_weight` for `VmHost`.\n>     - Updates `verify_storage_backends` in `vm_group.rb` to check for `vhost_block_backends` and ensure no SPDK volumes are present.\n>   - **Model Changes**:\n>     - Adds `vhost_block_backends` to `association_dependencies` in `vm_host.rb`.\n>   - **Test Program Changes**:\n>     - Adds `install_vhost_backend` method in `hetzner_server.rb` to set up `VhostBlockBackend`.\n>     - Modifies `verify_host_capacity` in `vm_group.rb` to include `verify_storage_backends`.\n>   - **Test Specification Changes**:\n>     - Adds tests for `install_vhost_backend` in `hetzner_server_spec.rb`.\n>     - Adds tests for `verify_storage_backends` in `vm_group_spec.rb`.\n> \n>"
  },
  {
    "pr": 3505,
    "title": "Remove the max_ios_per_sec storage limit.",
    "description": "SPDK supported max ios per sec for read/write combined, so we added support for it. However, cgroup v2 (which we’re migrating to for I/O rate limiting) does not support combined IOPS limits — only separate `IOReadIOPSMax` and `IOWriteIOPSMax`.\n\nThis patch removes the unused `max_ios_per_sec` knob. It was never used in production, and our current rate limiting relies solely on read/write bandwidth, which is fully supported by cgroup v2.",
    "ellipsis_summary": "Remove unused `max_ios_per_sec` feature and related logic across the codebase.\n> \n>   - **Behavior**:\n>     - Removes `max_ios_per_sec` from `IoLimits` in `lib/option.rb` and related logic in `lib/validation.rb`.\n>     - Drops `max_ios_per_sec` column from `vm_storage_volume` table in `migrate/20250624_remove_ios_per_sec.rb`.\n>     - Updates `set_qos_limits` in `rhizome/host/lib/storage_volume.rb` to exclude `rw_ios_per_sec`.\n>   - **Tests**:\n>     - Removes tests related to `max_ios_per_sec` in `spec/lib/validation_spec.rb`, `spec/model/vm_spec.rb`, and `spec/prog/test/vm_spec.rb`.\n>     - Updates `spec/scheduling/allocator_spec.rb` to reflect removal of `max_ios_per_sec`.\n>   - **Misc**:\n>     - Removes `max_ios_per_sec` from `VmStorageVolume` and related logic in `model/vm.rb` and `model/vm_storage_volume.rb`.\n>     - Updates `prog/test/vm.rb` and `prog/test/vm_group.rb` to remove `max_ios_per_sec` references.\n>     - Adjusts `prog/vm/nexus.rb` and `scheduling/allocator.rb` to remove `max_ios_per_sec` handling.\n> \n>"
  },
  {
    "pr": 3506,
    "title": "Add FK Reference from Kubernetes Cluster to Services Load Balancer",
    "description": "**Add FK Reference from Kubernetes Cluster to Services Load Balancer**\n\nThis was a technical debt left from the launch of CCM for automatic\nservice to LB port mapping. We were using name and project queries\nto reference the load balancer created for serving user services.\n\nThe fields will be backfilled manually upon deployment.\n\n**Create Services LB as part of Kubernetes Cluster creation**\n\nThis change moves the services LB creation from kubernetes nodepool\nto kubernetes cluster nexus, alongside the apiserver lb creation.\nWe still don't know how to support multiple nodepools and their\nrelationship to service LBs, but it's simpler to assume that we will\nsupport a single service LB for the whole cluster.\n\nThis change also starts using the FK for the service LB reference,\ninstead of the name based query.",
    "ellipsis_summary": "Add FK from Kubernetes clusters to service load balancers, moving LB creation to cluster level and updating references.\n> \n>   - **Behavior**:\n>     - Add FK `services_lb_id` to `kubernetes_cluster` table in `20250623_add_services_lb_to_kubernetes_cluster.rb`.\n>     - Move service LB creation to `kubernetes_cluster_nexus.rb` from `kubernetes_nodepool_nexus.rb`.\n>     - Use FK `services_lb` in `Kubernetes::Client` instead of name-based query.\n>   - **Models**:\n>     - Add `many_to_one :services_lb` in `KubernetesCluster`.\n>     - Update `LoadBalancer` references in `kubernetes_cluster.rb` and `load_balancer.rb`.\n>   - **Tests**:\n>     - Update tests in `client_spec.rb`, `kubernetes_cluster_nexus_spec.rb`, and `kubernetes_nodepool_nexus_spec.rb` to reflect FK changes.\n>   - **Views**:\n>     - Update `show.erb` to use `services_lb.hostname` for service URL display.\n> \n>"
  },
  {
    "pr": 3507,
    "title": "Add new 20250622.1.0 runner image",
    "description": "- **Remove old 20250406.1.1 runner image**\n  \n\n- **Add new 20250622.1.0 runner image**\n  Jobs:\n    - https://github.com/ubicloud/runner-images/actions/runs/15868420718\n    - https://github.com/ubicloud/runner-images/actions/runs/15872130121",
    "ellipsis_summary": "Add new runner image version `20250622.1.0` and remove old version `20250406.1.1` in `config.rb` and `download_boot_image.rb`.\n> \n>   - **Add new runner image version**:\n>     - Update `github_ubuntu_2404_version`, `github_ubuntu_2204_version`, and `github_gpu_ubuntu_2204_version` to `20250622.1.0` in `config.rb`.\n>     - Add SHA256 checksums for `20250622.1.0` in `download_boot_image.rb`.\n>   - **Remove old runner image version**:\n>     - Remove `20250406.1.1` entries from `download_boot_image.rb`.\n> \n>"
  },
  {
    "pr": 3508,
    "title": "Fix exit status for respirate and restarter",
    "description": "Make respirate return 1 if it wasn't able to cleanup all threads before shutting down.\n\nMake restarter exit the same as the respirate process it was monitoring.",
    "ellipsis_summary": "Fix exit status handling in `respirate` and `restarter` to ensure proper shutdown behavior.\n> \n>   - **Behavior**:\n>     - `respirate` now exits with status `1` if it fails to clean up all threads before shutdown.\n>     - `restarter` exits with the same status as the `respirate` process it monitors when shutting down.\n> \n>"
  },
  {
    "pr": 3509,
    "title": "Support Ubiblk v0.1-6",
    "description": "Notable changes in Ubiblk v0.1-6 are:\n- Support direct_io\n- init-metadata syncs metadata after writing it",
    "ellipsis_summary": "Support Ubiblk v0.1-6 by updating version handling, systemd service configuration, and metadata synchronization.\n> \n>   - **Version Support**:\n>     - Update `SUPPORTED_VHOST_BLOCK_BACKEND_VERSIONS` in `setup_vhost_block_backend.rb` to support `v0.1-6` for `x64` and `arm64`.\n>     - Update `sha256` in `vhost_block_backend.rb` for `v0.1-6`.\n>     - Update `vhost_block_backend_version` in `config.rb` to `v0.1-6`.\n>   - **Functionality**:\n>     - Add `systemd_io_rate_limits` to `vhost_backend_create_service_file` in `storage_volume.rb`.\n>     - Implement `systemd_io_rate_limits` and `persistent_device_id` methods in `storage_volume.rb`.\n>     - Update `vhost_backend_create_metadata` in `storage_volume.rb` to sync metadata after writing.\n>   - **Testing**:\n>     - Add tests for `systemd_io_rate_limits` and `persistent_device_id` in `storage_volume_spec.rb`.\n>     - Update tests in `setup_vhost_block_backend_spec.rb` to reflect version changes.\n> \n>"
  },
  {
    "pr": 3510,
    "title": "Rhizome: support per-volume I/O bandwidth limits for ubiblk",
    "description": "This is done by adding the following to the storage systemd units:\n\n```\nIOReadBandwidthMax=/dev/disk/by-id/disk-id $read_limit_bytes\nIOWriteBandwidthMax=/dev/disk/by-id/disk-id $write_limit_bytes\n```\n\nIf the disk file resides on a file system backedn by an md device, `disk-id` refers to the persistent ID of the md device. Otherwise, it refers to the ID of the underlying physical disk.",
    "ellipsis_summary": "Adds per-volume I/O bandwidth limits to `StorageVolume` using systemd configurations and updates tests accordingly.\n> \n>   - **Behavior**:\n>     - Adds I/O bandwidth limits to `StorageVolume` via `systemd_io_rate_limits` in `storage_volume.rb`.\n>     - Uses `IOReadBandwidthMax` and `IOWriteBandwidthMax` for rate limiting.\n>     - Determines device ID using `persistent_device_id()`.\n>   - **Functions**:\n>     - `systemd_io_rate_limits()`: Calculates limits based on `@max_read_mbytes_per_sec` and `@max_write_mbytes_per_sec`.\n>     - `persistent_device_id()`: Finds persistent device ID for a given path, handles SSDs, NVMe, and MD devices.\n>   - **Tests**:\n>     - Adds tests for `systemd_io_rate_limits()` and `persistent_device_id()` in `storage_volume_spec.rb`.\n>     - Tests handle cases with and without rate limits, and device ID resolution.\n> \n>"
  },
  {
    "pr": 3511,
    "title": "Bring back frozen arrays for flow control exception backtraces",
    "description": "The related rspec bug was fixed in rspec-core 3.13.5.",
    "ellipsis_summary": "Reintroduces frozen arrays for backtraces in flow control exceptions in `base.rb` using `EMPTY_ARRAY` constant.\n> \n>   - **Behavior**:\n>     - Reintroduces frozen arrays for backtraces in `Exit`, `Hop`, and `Nap` classes in `base.rb`.\n>     - Uses `EMPTY_ARRAY` constant for backtraces to optimize memory usage.\n>   - **Constants**:\n>     - Adds `EMPTY_ARRAY` constant in `base.rb` as a frozen empty array for backtrace usage.\n> \n>"
  },
  {
    "pr": 3512,
    "title": "Fixes for AWS setup",
    "description": "**Pass region while creating Aws::IAM::Client**\n`Aws::IAM::Client` requires a region to be specified when creating an instance.\nThis change ensures that the client is initialized with the correct region.\n\n**Add project public keys on AWS resources**\nWe are adding the public keys in the project to the VMs authorized_keys file\nfor the other providers but not for AWS. This commit adds the public keys\nto the AWS resources as well.",
    "ellipsis_summary": "Fix AWS IAM client initialization with region and add project public keys to AWS VMs.\n> \n>   - **AWS IAM Client Initialization**:\n>     - Add `region` parameter to `Aws::IAM::Client` initialization in `destroy_aws_s3` and `setup_aws_s3` in `prog/postgres/postgres_timeline_nexus.rb`.\n>     - Update tests in `postgres_timeline_nexus_spec.rb` to include `region` in mock expectations.\n>   - **Public Keys on AWS VMs**:\n>     - Modify `start` method in `prog/aws/instance.rb` to include project public keys in `authorized_keys` for AWS VMs.\n> \n>"
  },
  {
    "pr": 3514,
    "title": "Optimize Strand#take_lease_and_reload",
    "description": "This has three separate changes:\n\n* Remove lease_clear_debug_snapshot for every strand checkin\n* Use a prepared statement for the strand release lease UPDATE\n* Use Strand constants for prepared statements\n\nSee individual commit messages for details.",
    "ellipsis_summary": "Optimize `Strand#take_lease_and_reload` by removing redundant operations and using prepared statements for database updates.\n> \n>   - **Optimization**:\n>     - Remove `lease_clear_debug_snapshot` for every strand check-in in `strand.rb`.\n>     - Use prepared statements `TAKE_LEASE_PS` and `RELEASE_LEASE_PS` for lease operations in `strand.rb`.\n>   - **Testing**:\n>     - Update tests in `strand_spec.rb` to reflect changes in lease handling and ensure integrity checks are performed correctly.\n> \n>"
  },
  {
    "pr": 3517,
    "title": "Update some bundle packages",
    "description": "We use dependabot to update package versions in our project. But the don't update production pacakges for a time. Currently dependabot creates a PR with 37 depencies [^1]. It's litte bit too much for one PR. So I decided to update some packages manually to divide it multiple steps.\r\n\r\nIn ideal world, we should update packages more often without cluttred pile of packages\r\n\r\n[^1]: https://github.com/ubicloud/ubicloud/pull/3472",
    "ellipsis_summary": ""
  },
  {
    "pr": 3520,
    "title": "Add created_at column to installations and load balancers",
    "description": "We typically add a created_at column to our resources, but it looks like we missed doing so for installations and load balancers initially.\n\nI’ll populate the created_at column for installations using the GitHub API. For load balancers, I may populate the column based on the timestamps of associated resources.",
    "ellipsis_summary": "Add `created_at` column to `github_installation` and `load_balancer` tables with default `CURRENT_TIMESTAMP`.\n> \n>   - **Migration**:\n>     - Adds `created_at` column to `github_installation` and `load_balancer` tables in `20250626_add_created_at_2.rb`.\n>     - Sets default value to `CURRENT_TIMESTAMP` and makes it non-nullable.\n>   - **Models**:\n>     - Updates `github_installation.rb` to include `created_at` column in the schema comment.\n>     - Updates `load_balancer.rb` to include `created_at` column in the schema comment.\n> \n>"
  },
  {
    "pr": 3522,
    "title": "Remove ip4_random_vm_network fallback code",
    "description": "We haven't had any \"ipv4_address table not populated for ipv4 address range\" log messages emitted since this was committed. We also started using ipv4_address in the allocator, so we are all in at this point.",
    "ellipsis_summary": "Remove fallback logic in `ip4_random_vm_network` for unpopulated `ipv4_address` table and update tests.\n> \n>   - **Behavior**:\n>     - Removes fallback logic in `ip4_random_vm_network` in `vm_host.rb` for unpopulated `ipv4_address` table.\n>     - `ip4_random_vm_network` now directly queries `ipv4_address` table and returns nil if no available subnets.\n>   - **Tests**:\n>     - Updates `ip4_random_vm_network` tests in `vm_host_spec.rb` to reflect removal of fallback logic.\n>     - Ensures `ip4_random_vm_network` returns nil when no available subnets and returns unused IP when available.\n> \n>"
  },
  {
    "pr": 3524,
    "title": "Avoid recursion if VmHost#veth_pair_random_ip4_addr selects address in use",
    "description": "Instead of recursing and trying a new random address, keep trying the next valid address until an unused address is found.  Carve out the top of the range so we can be sure to always find a valid address before the end of the range.\n\nWhile I believe this is an uncommon operation (even for a fully loaded host with 30 VMs, should only be a < 1/1000 chance of random address already being used), I'd like to avoid recursive approaches based on randomness.\n\nIn addition to removing recursion, this also reduces object allocation using constants.\n\nThis selects existing local_vetho_ip values using the association dataset instead of the association array.  This is only called by the allocator, and at the point it is called, the association is not cached, so using the dataset and only selecting the needed column is faster and uses less memory.",
    "ellipsis_summary": "`veth_pair_random_ip4_addr` in `vm_host.rb` now iterates through IPs to find an unused one, avoiding recursion and optimizing memory usage.\n> \n>   - **Behavior**:\n>     - `veth_pair_random_ip4_addr` in `vm_host.rb` now iterates through IPs instead of using recursion to find an unused IP.\n>     - Carves out 1024 addresses at the top of the range to ensure a valid IP is always found.\n>   - **Performance**:\n>     - Reduces object allocation by using constants for IP range and mask.\n>   - **Testing**:\n>     - Updates tests in `vm_host_spec.rb` to verify new IP selection logic without recursion.\n> \n>"
  },
  {
    "pr": 3525,
    "title": "Filter in the database for VmHost#sshable_address",
    "description": "This appears to only be used in bin/stress_up, but in general we should not select all associated rows if we only need the first.",
    "ellipsis_summary": "Optimize `sshable_address` in `VmHost` to filter directly in the database, updating corresponding test in `vm_host_spec.rb`.\n> \n>   - **Behavior**:\n>     - Optimize `sshable_address` in `VmHost` to filter directly in the database using `assigned_host_addresses_dataset.first` with `{family(ip) => 4}`.\n>   - **Tests**:\n>     - Update test for `sshable_address` in `vm_host_spec.rb` to reflect database filtering behavior.\n> \n>"
  },
  {
    "pr": 3526,
    "title": "Fix respirate partitioning on Heroku when using heroku run bin/respriate",
    "description": "To try to avoid strand delay spikes during deployments, I had the bright idea to run `heroku run -r prod bin/respirate`. Unfortunately, due to respirate DYNO environment variable parsing and a lack of sanity checking in the dispatcher, this resulted in increased delay during the deployment.  This should fix the issue.",
    "ellipsis_summary": "Fix `respirate` partitioning on Heroku by improving environment variable parsing and adding validation for partition numbers.\n> \n>   - **Behavior**:\n>     - Fix `partition_number` parsing in `bin/respirate` by consolidating Heroku and Foreman logic.\n>     - Add validation in `repartition_thread` in `dispatcher.rb` to ensure `partition_num` is <= 256.\n>   - **Tests**:\n>     - Update `dispatcher_spec.rb` to test invalid `respirate` notifications for values like `foo` and `257`.\n> \n>"
  },
  {
    "pr": 3527,
    "title": "Have last exiting child schedule parent strand",
    "description": "Previously, when reaping child processes, if there were no remaining\nreapable children, the parent strand would only nap 1, which puts\nunnecessary load on respirate unless at least one child strand\nexits in the next second.\n\nChange this approach by having the exiting child strands, after they\nrelease the lease, schedule their parent immediately if the parent\nhas no non-exited child strands.\n\nWhen doing this, you need to be careful to make sure there are not\nrace conditions that would delay the scheduling of the parent.\nThere are two potential situations you need to handle:\n\n1. Multiple children exiting at the same time\n2. Parent currently running while child is exiting\n\nBy waiting until after the child strand leases are released, you\nstill have a race condition with 1, but the race condition is that \nmultiple child strands exiting concurrently could both reschedule\nthe parent strand.  However, that isn't a problem. You want to avoid\nthe case where neither child strand schedules the parent, which\nrescheduling after releasing the lease should do.\n\nTo handle 2, inside reap use Model#lock! to lock the parent strand.\nThis will make exiting child strands block if they UPDATE the parent\nstrand with a new schedule, until the parent strand's transaction\ncommits.  However, it's possible that a child strand already UPDATED\nthe parent. To handle this situation, before calling lock!, store\nthe cached schedule value in a local variable.  lock! implicitly does\na reload, so compare the schedule value after reload.  If the schedule\nhas changed, likely a child scheduled the parent for immediate\nexecution, so nap 0 in that case.\n\nJust in case there are unforeseen race conditions that are not handled,\nonly nap for 120 seconds if there are active children.  Worst case\nscenario, this results in a 2 minute delay for running the parent.\nHowever, this can potentially result in 120x less load from parent\nstrands polling children.",
    "ellipsis_summary": "Optimize parent strand scheduling by having the last exiting child schedule the parent immediately, reducing unnecessary load and potential delays.\n> \n>   - **Behavior**:\n>     - Exiting child strands now schedule their parent immediately if no active siblings exist, reducing potential 120s delay (`strand.rb`).\n>     - Parent strand locks during reap to prevent race conditions (`base.rb`).\n>     - Default nap time increased to 120s if active children exist (`base.rb`).\n>   - **Tests**:\n>     - Updated nap expectations from 1s to 120s in various test files (`inference_endpoint_replica_nexus_spec.rb`, `inference_router_replica_nexus_spec.rb`, `install_dnsmasq_spec.rb`, `kubernetes_cluster_nexus_spec.rb`, `kubernetes_nodepool_nexus_spec.rb`, `provision_kubernetes_node_spec.rb`, `upgrade_kubernetes_node_spec.rb`, `minio_server_nexus_spec.rb`, `postgres_server_nexus_spec.rb`, `setup_grafana_spec.rb`, `vm_group_spec.rb`, `victoria_metrics_server_nexus_spec.rb`, `host_nexus_spec.rb`).\n> \n>"
  },
  {
    "pr": 3529,
    "title": "Billing rates for DeepSeek R1 and V3 and Playground fixes",
    "description": "**Billing rate for DeepSeek R1**\r\n    \r\nAdd billing rate for DeepSeek R1 with pricing per 1M tokens of $3/$7 input/output. This matches what Together is charging: https://www.together.ai/pricing\r\n\r\n---\r\n\r\n**Billing rate for DeepSeek V3**\r\n    \r\nAdd billing rate for DeepSeek V3 with pricing per 1M tokens of $0.90 for both input and output tokens. This matches what Fireworks is charging: https://fireworks.ai/models/fireworks/deepseek-v3\r\n\r\n---\r\n\r\n**Playground: Support multiple inference router models**\r\n\r\nPreviously, the playground distinguished models based solely on their URL. However, with the introduction of inference router, multiple models can now share the same URL endpoint. This update changes the model identification logic to use model names instead, allowing the playground to support multiple models behind the same endpoint.\r\n\r\n---\r\n\r\n**Change order of models**\r\n    \r\nShow inference router based models before other models in the web console. In the future, we might want to come up with a more explicit ordering of models.",
    "ellipsis_summary": "----\r\n\r\n> [!IMPORTANT]\r\n> Add billing rates for DeepSeek V3 and R1, update JavaScript for model selection, and modify Ruby routes to prioritize inference router models.\r\n> \r\n>   - **Billing Rates**:\r\n>     - Add billing rate for `DeepSeek V3` with $0.90 per 1M tokens for both input and output in `billing_rates.yml`.\r\n>     - Add billing rate for `DeepSeek R1` with $3/$7 per 1M tokens for input/output in `billing_rates.yml`.\r\n>   - **JavaScript**:\r\n>     - Rename `endpoint` to `model` in `setupPlayground()` in `app.js`.\r\n>     - Add `data-url` attribute for selected model in `setupPlayground()` in `app.js`.\r\n>   - **Ruby Routes**:\r\n>     - Change order of `@inference_models` to prioritize `inference_router_models` over `inference_endpoints` in `inference_endpoint.rb` and `inference_playground.rb`.\r\n>   - **Testing**:\r\n>     - Update test expectation for selected inference endpoint in `inference_playground_spec.rb`.\r\n> \r\n>"
  },
  {
    "pr": 3531,
    "title": "Various improvements for Postgres on AWS",
    "description": "This PR contains number of small commits that are not related with each other. Some of them are bug fixes or small improvements I noticed while playing with Ubi Postgres on AWS. The rest are preparation for slightly more complex future PR. I extracted the some self-contained parts as separate commits and added to this PR to make the future PR simpler and easier to review.",
    "ellipsis_summary": "Improves Postgres on AWS with enhanced validation, error handling, and configuration updates across backend and frontend components.\n> \n>   - **Validation and Error Handling**:\n>     - In `helpers/postgres.rb`, added error handling for invalid `family` in `validate_postgres_input()`.\n>     - In `routes/project/location/postgres.rb`, improved error messages for invalid size and storage size during Postgres resource updates.\n>     - In `spec/routes/api/project/location/postgres_spec.rb`, added tests for invalid size and storage size errors.\n>   - **Configuration and Options**:\n>     - Updated `POSTGRES_SIZE_OPTIONS` in `lib/option.rb` to use structured data for size options.\n>     - In `lib/content_generator.rb`, updated `family()` to use `POSTGRES_FAMILY_OPTIONS`.\n>     - In `views/postgres/resize.erb` and `views/postgres/high_availability.erb`, updated pre-selected values to use `POSTGRES_SIZE_OPTIONS`.\n>   - **Miscellaneous**:\n>     - Removed redundant semicolons in `assets/js/app.js`.\n>     - In `prog/aws/instance.rb`, added `Name` tag to AWS instance creation.\n>     - In `prog/postgres/postgres_server_nexus.rb`, added architecture selection for VM assembly.\n> \n>"
  },
  {
    "pr": 3532,
    "title": "Use a better error message if turnstile is enabled but parameter is not submitted",
    "description": "Mostly likely cause is Javascript is not enabled or access to Cloudflare is blocked, so put that in the error message.\n\nDon't attempt to verify empty/missing turnstile responses with Cloudflare.",
    "ellipsis_summary": "Improve error handling for missing Cloudflare Turnstile parameter during account creation, with specific error message and test coverage.\n> \n>   - **Behavior**:\n>     - In `clover.rb`, if `cf-turnstile-response` is empty and `cloudflare_turnstile_site_key` is set, log the issue and show an error message about enabling JavaScript and Cloudflare access.\n>     - Redirect to `/create-account` if the response is empty.\n>     - Skip Cloudflare verification for empty responses.\n>   - **Tests**:\n>     - In `auth_spec.rb`, add test to ensure account creation fails with appropriate error message when `cf-turnstile-response` is missing and Turnstile is enabled.\n> \n>"
  },
  {
    "pr": 3535,
    "title": "Add standard-32 and 64 to ubi-on-aws PG sizes",
    "description": "## Add standard-32 and 64 to ubi-on-aws PG sizes\r\n\r\n## Allocate VmStorageVolume directly in assemble for AWS resources\r\nRight at the time of creating the entities, we need to create the\r\nvm_storage_volume entities as well. This is mainly because we calculate\r\nthe storage size through these entities in convergence prog to see if\r\nthere is a new server that matches resource's description of target\r\nstorage size. If not, we create a new VM infinitely. Therefore, this\r\nmust be created with the vm entity so that we create only 1 instance.\r\n\r\n## Separate the EIP association from allocation\r\nIn case something goes wrong in association, we run the same state which\r\ncauses a new allocation of a new EIP. To avoid that, we separate their",
    "ellipsis_summary": "----\r\n\r\n> [!IMPORTANT]\r\n> Add support for `standard-32` and `standard-64` PostgreSQL sizes on AWS, updating instance mappings, options, and tests.\r\n> \r\n>   - **Behavior**:\r\n>     - Add support for `standard-32` and `standard-64` PostgreSQL sizes in `helpers/postgres.rb`.\r\n>     - Update AWS instance size mappings in `prog/aws/instance.rb` to include `m6id.8xlarge` and `m6id.16xlarge`.\r\n>     - Update CLI help files to include new sizes in `spec/routes/api/cli/golden-files/help -r.txt` and `pg eu-central-h1_test2-pg create invalid.txt`.\r\n>   - **Options**:\r\n>     - Update `POSTGRES_SIZE_OPTIONS` in `lib/option.rb` to include `standard-32` and `standard-64`.\r\n>     - Update `aws_storage_size_options` in `helpers/postgres.rb` to include storage sizes for 32 and 64 vCPUs.\r\n>   - **Tests**:\r\n>     - Modify tests in `spec/prog/aws/instance_spec.rb` and `spec/prog/aws/nic_spec.rb` to reflect new instance sizes and behaviors.\r\n> \r\n>"
  },
  {
    "pr": 3537,
    "title": "Playground: Display reasoning output for DeepSeek R1",
    "description": "Reasoning output may currently vary slightly in format. In the future, we plan to standardize the API response for reasoning output.\n\nUntil then, the playground will render both the `reasoning_content` and `reasoning` fields as reasoning content.",
    "ellipsis_summary": "Modify `setupPlayground()` in `app.js` to support both `reasoning_content` and `reasoning` fields for reasoning output.\n> \n>   - **Behavior**:\n>     - In `setupPlayground()` in `app.js`, modify reasoning content handling to support both `reasoning_content` and `reasoning` fields.\n>     - Ensures compatibility with varying API responses for reasoning output.\n> \n>"
  }
]